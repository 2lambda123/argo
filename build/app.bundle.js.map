{"version":3,"sources":["webpack:///app.bundle.js","webpack:///./src/client/app/common/common.module.js","webpack:///./src/client/app/components/components.module.js","webpack:///./src/client/app/root.component.js","webpack:///./src/client/app/common/app.component.js","webpack:///./src/client/app/common/app.config.js","webpack:///./src/client/app/common/app.controller.js","webpack:///./src/client/app/common/app.module.js","webpack:///./src/client/app/components/account/account.component.js","webpack:///./src/client/app/components/account/account.controller.js","webpack:///./src/client/app/components/account/account.module.js","webpack:///./src/client/app/components/account/accounts.service.js","webpack:///./src/client/app/components/accounts-bottomsheet/accounts-bottomsheet.component.js","webpack:///./src/client/app/components/accounts-bottomsheet/accounts-bottomsheet.controller.js","webpack:///./src/client/app/components/accounts-bottomsheet/accounts-bottomsheet.module.js","webpack:///./src/client/app/components/activity/activity.component.js","webpack:///./src/client/app/components/activity/activity.controller.js","webpack:///./src/client/app/components/activity/activity.module.js","webpack:///./src/client/app/components/activity/activity.service.js","webpack:///./src/client/app/components/charts/charts.component.js","webpack:///./src/client/app/components/charts/charts.controller.js","webpack:///./src/client/app/components/charts/charts.module.js","webpack:///./src/client/app/components/charts/charts.service.js","webpack:///./src/client/app/components/dual-color/dual-color.directive.js","webpack:///./src/client/app/components/dual-color/dual-color.module.js","webpack:///./src/client/app/components/exposure/exposure.component.js","webpack:///./src/client/app/components/exposure/exposure.controller.js","webpack:///./src/client/app/components/exposure/exposure.module.js","webpack:///./src/client/app/components/header/header.component.js","webpack:///./src/client/app/components/header/header.controller.js","webpack:///./src/client/app/components/header/header.module.js","webpack:///./src/client/app/components/highlighter/highlighter.directive.js","webpack:///./src/client/app/components/highlighter/highlighter.module.js","webpack:///./src/client/app/components/news/news.component.js","webpack:///./src/client/app/components/news/news.controller.js","webpack:///./src/client/app/components/news/news.module.js","webpack:///./src/client/app/components/news/news.service.js","webpack:///./src/client/app/components/ohlc-chart/ohlc-chart.directive.js","webpack:///./src/client/app/components/ohlc-chart/ohlc-chart.module.js","webpack:///./src/client/app/components/order-dialog/order-dialog.component.js","webpack:///./src/client/app/components/order-dialog/order-dialog.controller.js","webpack:///./src/client/app/components/order-dialog/order-dialog.module.js","webpack:///./src/client/app/components/orders/orders.component.js","webpack:///./src/client/app/components/orders/orders.controller.js","webpack:///./src/client/app/components/orders/orders.module.js","webpack:///./src/client/app/components/orders/orders.service.js","webpack:///./src/client/app/components/plugins/plugins.component.js","webpack:///./src/client/app/components/plugins/plugins.controller.js","webpack:///./src/client/app/components/plugins/plugins.module.js","webpack:///./src/client/app/components/plugins/plugins.service.js","webpack:///./src/client/app/components/positions/positions.component.js","webpack:///./src/client/app/components/positions/positions.controller.js","webpack:///./src/client/app/components/positions/positions.module.js","webpack:///./src/client/app/components/positions/positions.service.js","webpack:///./src/client/app/components/quotes/quotes.component.js","webpack:///./src/client/app/components/quotes/quotes.controller.js","webpack:///./src/client/app/components/quotes/quotes.module.js","webpack:///./src/client/app/components/quotes/quotes.service.js","webpack:///./src/client/app/components/session/session.module.js","webpack:///./src/client/app/components/session/session.service.js","webpack:///./src/client/app/components/settings-dialog/settings-dialog.component.js","webpack:///./src/client/app/components/settings-dialog/settings-dialog.controller.js","webpack:///./src/client/app/components/settings-dialog/settings-dialog.module.js","webpack:///./src/client/app/components/sl-chart/sl-chart.directive.js","webpack:///./src/client/app/components/sl-chart/sl-chart.module.js","webpack:///./src/client/app/components/streaming/streaming.module.js","webpack:///./src/client/app/components/streaming/streaming.service.js","webpack:///./src/client/app/components/toast/toast.module.js","webpack:///./src/client/app/components/toast/toast.service.js","webpack:///./src/client/app/components/token-dialog/token-dialog.component.js","webpack:///./src/client/app/components/token-dialog/token-dialog.controller.js","webpack:///./src/client/app/components/token-dialog/token-dialog.module.js","webpack:///./src/client/app/components/trades/trades.component.js","webpack:///./src/client/app/components/trades/trades.controller.js","webpack:///./src/client/app/components/trades/trades.module.js","webpack:///./src/client/app/components/trades/trades.service.js","webpack:///./src/client/app/root.module.js"],"names":["webpackJsonp","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_angular__","__WEBPACK_IMPORTED_MODULE_0_angular___default","n","__WEBPACK_IMPORTED_MODULE_1__app_module__","common","a","name","__WEBPACK_IMPORTED_MODULE_1__account_account_module__","__WEBPACK_IMPORTED_MODULE_2__accounts_bottomsheet_accounts_bottomsheet_module__","__WEBPACK_IMPORTED_MODULE_3__activity_activity_module__","__WEBPACK_IMPORTED_MODULE_4__charts_charts_module__","__WEBPACK_IMPORTED_MODULE_5__dual_color_dual_color_module__","__WEBPACK_IMPORTED_MODULE_6__exposure_exposure_module__","__WEBPACK_IMPORTED_MODULE_7__header_header_module__","__WEBPACK_IMPORTED_MODULE_8__highlighter_highlighter_module__","__WEBPACK_IMPORTED_MODULE_9__news_news_module__","__WEBPACK_IMPORTED_MODULE_10__ohlc_chart_ohlc_chart_module__","__WEBPACK_IMPORTED_MODULE_11__order_dialog_order_dialog_module__","__WEBPACK_IMPORTED_MODULE_12__orders_orders_module__","__WEBPACK_IMPORTED_MODULE_13__plugins_plugins_module__","__WEBPACK_IMPORTED_MODULE_14__positions_positions_module__","__WEBPACK_IMPORTED_MODULE_15__quotes_quotes_module__","__WEBPACK_IMPORTED_MODULE_16__session_session_module__","__WEBPACK_IMPORTED_MODULE_17__settings_dialog_settings_dialog_module__","__WEBPACK_IMPORTED_MODULE_18__sl_chart_sl_chart_module__","__WEBPACK_IMPORTED_MODULE_19__streaming_streaming_module__","__WEBPACK_IMPORTED_MODULE_20__toast_toast_module__","__WEBPACK_IMPORTED_MODULE_21__token_dialog_token_dialog_module__","__WEBPACK_IMPORTED_MODULE_22__trades_trades_module__","components","rootComponent","templateUrl","exports","__WEBPACK_IMPORTED_MODULE_0__app_controller__","appComponent","controller","appConfig","$httpProvider","$locationProvider","interceptors","push","$q","$rootScope","nLoadings","[object Object]","request","isLoadingView","response","reject","html5Mode","$inject","AppController","this","tabSelectedIndex","Math","min","max","__WEBPACK_IMPORTED_MODULE_0__app_css__","__WEBPACK_IMPORTED_MODULE_0__app_css___default","__WEBPACK_IMPORTED_MODULE_1_angular__","__WEBPACK_IMPORTED_MODULE_1_angular___default","__WEBPACK_IMPORTED_MODULE_2_angular_material__","__WEBPACK_IMPORTED_MODULE_2_angular_material___default","__WEBPACK_IMPORTED_MODULE_3__app_component__","__WEBPACK_IMPORTED_MODULE_4__app_config__","app","component","config","__WEBPACK_IMPORTED_MODULE_0__account_controller__","accountComponent","AccountController","AccountService","account","getAccount","__WEBPACK_IMPORTED_MODULE_1__account_component__","__WEBPACK_IMPORTED_MODULE_2__accounts_service__","service","AccountsService","$http","SessionService","isLogged","then","credentials","getAccounts","environment","token","accountId","data","api","post","accounts","message","length","merge","timestamp","Date","unrealizedPLPercent","unrealizedPL","balance","instruments","pips","forEach","i","pow","pipLocation","settings","streamingInstruments","Object","keys","filter","el","__WEBPACK_IMPORTED_MODULE_0__accounts_bottomsheet_controller__","accountsBottomsheetComponent","bindings","AccountsBottomsheetController","$mdBottomSheet","$index","hide","__WEBPACK_IMPORTED_MODULE_1__accounts_bottomsheet_component__","accountsBottomsheet","__WEBPACK_IMPORTED_MODULE_0__activity_controller__","activityComponent","ActivityController","ActivityService","getActivities","activities","__WEBPACK_IMPORTED_MODULE_1__activity_component__","__WEBPACK_IMPORTED_MODULE_2__activity_service__","activity","lastTransactionID","transactions","reverse","catch","err","splice","id","type","instrument","units","price","pl","accountBalance","time","__WEBPACK_IMPORTED_MODULE_0__charts_controller__","chartsComponent","ChartsController","$mdDialog","ChartsService","QuotesService","TradesService","selectedInstrument","granularities","selectedGranularity","feed","getQuotes","trades","getTrades","changeChart","granularity","getHistQuotes","candles","event","side","scope","extend","$new","params","show","template","preserveScope","targetEvent","__WEBPACK_IMPORTED_MODULE_0__charts_css__","__WEBPACK_IMPORTED_MODULE_0__charts_css___default","__WEBPACK_IMPORTED_MODULE_2__charts_component__","__WEBPACK_IMPORTED_MODULE_3__charts_service__","charts","opt","count","alignmentTimezone","dailyAlignment","dualColorDirective","directive","restrict","link","element","attrs","$watch","dualColor","newValue","oldValue","removeClass","addClass","__WEBPACK_IMPORTED_MODULE_1__dual_color_directive__","__WEBPACK_IMPORTED_MODULE_0__exposure_controller__","exposureComponent","ExposureController","exposures","exps","trade","legs","split","parseInt","currentUnits","exp","market","abs","__WEBPACK_IMPORTED_MODULE_1__exposure_component__","exposure","__WEBPACK_IMPORTED_MODULE_0__header_controller__","headerComponent","HeaderController","$window","ToastService","StreamingService","instrsStorage","localStorage","getItem","instrs","fromJson","EUR_USD","USD_JPY","GBP_USD","EUR_GBP","USD_CHF","EUR_JPY","EUR_CHF","USD_CAD","AUD_USD","GBP_JPY","isLoadingViewWatcher","tokenInfo","accountSelected","setCredentials","setStreamingInstruments","startStream","accessToken","allInstrs","hasOwnProperty","settingsInfo","setItem","toJson","reset","__WEBPACK_IMPORTED_MODULE_1__header_component__","header","highlighterDirective","$timeout","highlighter","newclass","__WEBPACK_IMPORTED_MODULE_1__highlighter_directive__","__WEBPACK_IMPORTED_MODULE_0__news_controller__","newsComponent","NewsController","NewsService","getNews","news","__WEBPACK_IMPORTED_MODULE_1__news_component__","__WEBPACK_IMPORTED_MODULE_2__news_service__","ohlcChartDirective","myInstrument","myGranularity","myTrades","refreshChart","lastHistUpdate","lastData","lastClose","feedVolume","csv","drawChart","close","volume","getLastHistUpdate","tick","nextHistUpdate","midPrice","shift","bid","parseFloat","ask","open","high","low","date","now","coeff","floor","margin","top","right","bottom","left","width","height","x","techan","scale","financetime","range","y","d3","scaleLinear","yVolume","ohlc","plot","xScale","yScale","tradearrow","orient","d","startsWith","sma0","sma","sma0Calculator","indicator","period","sma1","sma1Calculator","accessor","xAxis","axisBottom","yAxis","axisLeft","volumeAxis","axisRight","ticks","tickFormat","format","timeAnnotation","axisannotation","axis","timeFormat","translate","ohlcAnnotation","volumeAnnotation","crosshair","xAnnotation","yAnnotation","select","remove","svg","append","attr","defs","ohlcSelection","style","text","csvParse","map","Open","High","Low","Close","Volume","datum","redraw","domain","zoomable","slice","call","openTime","__WEBPACK_IMPORTED_MODULE_1__ohlc_chart_directive__","ohlcChart","__WEBPACK_IMPORTED_MODULE_0__order_dialog_controller__","orderDialogComponent","OrderDialogController","OrdersService","changeMarket","expires","label","value","selectedExpire","measure","isLowerBound","isUpperBound","isTakeProfit","isStopLoss","isTrailingStop","fixed","toString","match","step","quote","takeProfit","toFixed","stopLoss","lowerBound","upperBound","trailingStop","cancel","action","order","isBuy","isMeasurePips","gtdTime","priceBound","takeProfitOnFill","stopLossOnFill","trailingStopLossOnFill","distance","putOrder","transaction","opened","canceled","code","errorMessage","orderCancelTransaction","reason","orderFillTransaction","orderCreateTransaction","__WEBPACK_IMPORTED_MODULE_1__order_dialog_component__","orderDialog","__WEBPACK_IMPORTED_MODULE_0__orders_controller__","ordersComponent","OrdersController","orders","getOrders","refresh","confirm","textContent","ariaLabel","ok","closeOrder","orderID","__WEBPACK_IMPORTED_MODULE_1__orders_component__","__WEBPACK_IMPORTED_MODULE_2__orders_service__","res","expiry","index","current","__WEBPACK_IMPORTED_MODULE_0__plugins_controller__","pluginsComponent","PluginsController","PluginsService","plugins","getPlugins","pluginsInfo","getPluginsInfo","engagePlugins","__WEBPACK_IMPORTED_MODULE_1__plugins_component__","__WEBPACK_IMPORTED_MODULE_2__plugins_service__","key","plugs","__WEBPACK_IMPORTED_MODULE_0__positions_controller__","positionsComponent","PositionsController","PositionsService","getPositions","positions","__WEBPACK_IMPORTED_MODULE_1__positions_component__","__WEBPACK_IMPORTED_MODULE_2__positions_service__","position","longUnits","long","shortUnits","short","avgPrice","averagePrice","__WEBPACK_IMPORTED_MODULE_0__quotes_controller__","quotesComponent","QuotesController","quotes","__WEBPACK_IMPORTED_MODULE_1__quotes_component__","__WEBPACK_IMPORTED_MODULE_2__quotes_service__","spread","equals","instr","temp","__WEBPACK_IMPORTED_MODULE_1__session_service__","session","deferred","defer","resolve","promise","__WEBPACK_IMPORTED_MODULE_0__settings_dialog_controller__","settingsDialogComponent","SettingsDialogController","__WEBPACK_IMPORTED_MODULE_1__settings_dialog_component__","settingsDialog","slChartDirective","replace","transclude","node","w","clientWidth","h","getComputedStyle","selectAll","stroke","paths","join","__WEBPACK_IMPORTED_MODULE_1__sl_chart_directive__","slChart","__WEBPACK_IMPORTED_MODULE_1__streaming_service__","streaming","getStream","ws","WebSocket","onmessage","isTick","isTransaction","refreshPlugins","closeoutAsk","closeoutBid","accountID","updateTick","updateTrades","updateOrders","addActivity","e","__WEBPACK_IMPORTED_MODULE_1__toast_service__","toast","$mdToast","simple","hideDelay","__WEBPACK_IMPORTED_MODULE_0__token_dialog_controller__","tokenDialogComponent","TokenDialogController","__WEBPACK_IMPORTED_MODULE_1__token_dialog_component__","tokenDialog","__WEBPACK_IMPORTED_MODULE_0__trades_controller__","tradesComponent","TradesController","closeTrade","__WEBPACK_IMPORTED_MODULE_1__trades_component__","__WEBPACK_IMPORTED_MODULE_2__trades_service__","profitPips","defineProperty","__WEBPACK_IMPORTED_MODULE_1__root_component__","__WEBPACK_IMPORTED_MODULE_2__common_common_module__","__WEBPACK_IMPORTED_MODULE_3__components_components_module__","root"],"mappings":"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","file":"app.bundle.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */,\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__app_module__ = __webpack_require__(17);\n\r\n\r\n\r\n\r\nconst common = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"common\", [\r\n        __WEBPACK_IMPORTED_MODULE_1__app_module__[\"a\" /* app */]\r\n    ])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = common;\n\r\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__account_account_module__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__accounts_bottomsheet_accounts_bottomsheet_module__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__activity_activity_module__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__charts_charts_module__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__dual_color_dual_color_module__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__exposure_exposure_module__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__header_header_module__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__highlighter_highlighter_module__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__news_news_module__ = __webpack_require__(45);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ohlc_chart_ohlc_chart_module__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__order_dialog_order_dialog_module__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__orders_orders_module__ = __webpack_require__(54);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__plugins_plugins_module__ = __webpack_require__(58);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__positions_positions_module__ = __webpack_require__(62);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__quotes_quotes_module__ = __webpack_require__(66);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__session_session_module__ = __webpack_require__(68);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__settings_dialog_settings_dialog_module__ = __webpack_require__(72);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__sl_chart_sl_chart_module__ = __webpack_require__(74);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__streaming_streaming_module__ = __webpack_require__(75);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__toast_toast_module__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__token_dialog_token_dialog_module__ = __webpack_require__(81);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__trades_trades_module__ = __webpack_require__(84);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst components = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components\", [\r\n        __WEBPACK_IMPORTED_MODULE_1__account_account_module__[\"a\" /* account */],\r\n        __WEBPACK_IMPORTED_MODULE_2__accounts_bottomsheet_accounts_bottomsheet_module__[\"a\" /* accountsBottomsheet */],\r\n        __WEBPACK_IMPORTED_MODULE_3__activity_activity_module__[\"a\" /* activity */],\r\n        __WEBPACK_IMPORTED_MODULE_4__charts_charts_module__[\"a\" /* charts */],\r\n        __WEBPACK_IMPORTED_MODULE_5__dual_color_dual_color_module__[\"a\" /* dualColor */],\r\n        __WEBPACK_IMPORTED_MODULE_6__exposure_exposure_module__[\"a\" /* exposure */],\r\n        __WEBPACK_IMPORTED_MODULE_7__header_header_module__[\"a\" /* header */],\r\n        __WEBPACK_IMPORTED_MODULE_8__highlighter_highlighter_module__[\"a\" /* highlighter */],\r\n        __WEBPACK_IMPORTED_MODULE_9__news_news_module__[\"a\" /* news */],\r\n        __WEBPACK_IMPORTED_MODULE_10__ohlc_chart_ohlc_chart_module__[\"a\" /* ohlcChart */],\r\n        __WEBPACK_IMPORTED_MODULE_11__order_dialog_order_dialog_module__[\"a\" /* orderDialog */],\r\n        __WEBPACK_IMPORTED_MODULE_12__orders_orders_module__[\"a\" /* orders */],\r\n        __WEBPACK_IMPORTED_MODULE_13__plugins_plugins_module__[\"a\" /* plugins */],\r\n        __WEBPACK_IMPORTED_MODULE_14__positions_positions_module__[\"a\" /* positions */],\r\n        __WEBPACK_IMPORTED_MODULE_15__quotes_quotes_module__[\"a\" /* quotes */],\r\n        __WEBPACK_IMPORTED_MODULE_16__session_session_module__[\"a\" /* session */],\r\n        __WEBPACK_IMPORTED_MODULE_17__settings_dialog_settings_dialog_module__[\"a\" /* settingsDialog */],\r\n        __WEBPACK_IMPORTED_MODULE_18__sl_chart_sl_chart_module__[\"a\" /* slChart */],\r\n        __WEBPACK_IMPORTED_MODULE_19__streaming_streaming_module__[\"a\" /* streaming */],\r\n        __WEBPACK_IMPORTED_MODULE_20__toast_toast_module__[\"a\" /* toast */],\r\n        __WEBPACK_IMPORTED_MODULE_21__token_dialog_token_dialog_module__[\"a\" /* tokenDialog */],\r\n        __WEBPACK_IMPORTED_MODULE_22__trades_trades_module__[\"a\" /* trades */]\r\n    ])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = components;\n\r\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nconst rootComponent = {\r\n    templateUrl: \"app/root.html\"\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = rootComponent;\n\r\n\n\n/***/ }),\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 14 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__app_controller__ = __webpack_require__(16);\n\r\n\r\nconst appComponent = {\r\n    templateUrl: \"app/common/app.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__app_controller__[\"a\" /* AppController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = appComponent;\n\r\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = appConfig;\nfunction appConfig($httpProvider, $locationProvider) {\r\n    const interceptors = $httpProvider.interceptors;\r\n\r\n    interceptors.push([\"$q\", \"$rootScope\", ($q, $rootScope) => {\r\n        let nLoadings = 0;\r\n\r\n        return {\r\n            request(request) {\r\n                nLoadings += 1;\r\n\r\n                $rootScope.isLoadingView = true;\r\n\r\n                return request;\r\n            },\r\n\r\n            response(response) {\r\n                nLoadings -= 1;\r\n                if (nLoadings === 0) {\r\n                    $rootScope.isLoadingView = false;\r\n                }\r\n\r\n                return response;\r\n            },\r\n\r\n            responseError(response) {\r\n                nLoadings -= 1;\r\n                if (!nLoadings) {\r\n                    $rootScope.isLoadingView = false;\r\n                }\r\n\r\n                return $q.reject(response);\r\n            }\r\n        };\r\n    }]);\r\n\r\n    $locationProvider.html5Mode(true);\r\n}\r\nappConfig.$inject = [\"$httpProvider\", \"$locationProvider\"];\r\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass AppController {\r\n    $onInit() {\r\n        this.tabSelectedIndex = 0;\r\n    }\r\n\r\n    next() {\r\n        this.tabSelectedIndex = Math.min(this.tabSelectedIndex + 1, 6);\r\n    }\r\n\r\n    previous() {\r\n        this.tabSelectedIndex = Math.max(this.tabSelectedIndex - 1, 0);\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = AppController;\n\r\nAppController.$inject = [];\r\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__app_css__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__app_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__app_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_angular_material__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_angular_material___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_angular_material__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_component__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__app_config__ = __webpack_require__(15);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst app = __WEBPACK_IMPORTED_MODULE_1_angular___default.a\r\n    .module(\"common.app\", [\r\n        __WEBPACK_IMPORTED_MODULE_2_angular_material___default.a\r\n    ])\r\n    .component(\"app\", __WEBPACK_IMPORTED_MODULE_3__app_component__[\"a\" /* appComponent */])\r\n    .config(__WEBPACK_IMPORTED_MODULE_4__app_config__[\"a\" /* appConfig */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = app;\n\r\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__account_controller__ = __webpack_require__(19);\n\r\n\r\nconst accountComponent = {\r\n    templateUrl: \"app/components/account/account.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__account_controller__[\"a\" /* AccountController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = accountComponent;\n\r\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass AccountController {\r\n    constructor(AccountService) {\r\n        this.AccountService = AccountService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.account = this.AccountService.getAccount();\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = AccountController;\n\r\nAccountController.$inject = [\"AccountsService\"];\r\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__account_component__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__accounts_service__ = __webpack_require__(21);\n\r\n\r\n\r\n\r\n\r\nconst account = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.account\", [])\r\n    .component(\"account\", __WEBPACK_IMPORTED_MODULE_1__account_component__[\"a\" /* accountComponent */])\r\n    .service(\"AccountsService\", __WEBPACK_IMPORTED_MODULE_2__accounts_service__[\"a\" /* AccountsService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = account;\n\r\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n\r\n\r\nclass AccountsService {\r\n    constructor($http, SessionService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n\r\n        this.account = {};\r\n    }\r\n\r\n    getAccount() {\r\n        return this.account;\r\n    }\r\n\r\n    refresh() {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            this.getAccounts({\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            });\r\n        });\r\n    }\r\n\r\n    getAccounts(data) {\r\n        const environment = data.environment || \"practice\",\r\n            token = data.token,\r\n            accountId = data.accountId,\r\n            api = accountId ? \"/api/account\" : \"/api/accounts\";\r\n\r\n        return this.$http.post(api, {\r\n            environment,\r\n            token,\r\n            accountId\r\n        }).then(response => {\r\n            const accounts = response.data.accounts || response.data;\r\n\r\n            if (response.data.message) {\r\n                throw response.data.message;\r\n            }\r\n\r\n            if (!accounts.length) {\r\n                __WEBPACK_IMPORTED_MODULE_0_angular___default.a.merge(this.account, response.data.account);\r\n\r\n                this.account.timestamp = new Date();\r\n\r\n                this.account.unrealizedPLPercent =\r\n                    this.account.unrealizedPL / this.account.balance * 100;\r\n\r\n                if (!this.account.instruments) {\r\n                    this.$http.post(\"/api/instruments\", {\r\n                        environment,\r\n                        token,\r\n                        accountId\r\n                    }).then(instruments => {\r\n                        this.account.instruments = instruments.data;\r\n                        this.account.pips = {};\r\n                        __WEBPACK_IMPORTED_MODULE_0_angular___default.a.forEach(this.account.instruments, i => {\r\n                            this.account.pips[i.name] =\r\n                                Math.pow(10, i.pipLocation);\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n\r\n            return accounts;\r\n        });\r\n    }\r\n\r\n    setStreamingInstruments(settings) {\r\n        this.account.streamingInstruments = Object.keys(settings)\r\n            .filter(el => !!settings[el]);\r\n\r\n        return this.account.streamingInstruments;\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = AccountsService;\n\r\nAccountsService.$inject = [\"$http\", \"SessionService\"];\r\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__accounts_bottomsheet_controller__ = __webpack_require__(23);\n\r\n\r\nconst accountsBottomsheetComponent = {\r\n    templateUrl: \"app/components/accounts-bottomsheet/accounts-bottomsheet.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__accounts_bottomsheet_controller__[\"a\" /* AccountsBottomsheetController */],\r\n    bindings: {\r\n        accounts: \"<\"\r\n    }\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = accountsBottomsheetComponent;\n\r\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass AccountsBottomsheetController {\r\n    constructor($mdBottomSheet) {\r\n        this.$mdBottomSheet = $mdBottomSheet;\r\n    }\r\n\r\n    onAccountClick($index) {\r\n        const account = this.accounts[$index];\r\n\r\n        this.$mdBottomSheet.hide(account);\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = AccountsBottomsheetController;\n\r\nAccountsBottomsheetController.$inject = [\"$mdBottomSheet\"];\r\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__accounts_bottomsheet_component__ = __webpack_require__(22);\n\r\n\r\n\r\n\r\nconst accountsBottomsheet = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.accounts-bottomsheet\", [])\r\n    .component(\"accountsBottomsheet\", __WEBPACK_IMPORTED_MODULE_1__accounts_bottomsheet_component__[\"a\" /* accountsBottomsheetComponent */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = accountsBottomsheet;\n\r\n\r\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__activity_controller__ = __webpack_require__(26);\n\r\n\r\nconst activityComponent = {\r\n    templateUrl: \"app/components/activity/activity.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__activity_controller__[\"a\" /* ActivityController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = activityComponent;\n\r\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass ActivityController {\r\n    constructor(ActivityService) {\r\n        this.ActivityService = ActivityService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.ActivityService.getActivities().then(activities => {\r\n            this.activities = activities;\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ActivityController;\n\r\nActivityController.$inject = [\"ActivityService\"];\r\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__activity_component__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__activity_service__ = __webpack_require__(28);\n\r\n\r\n\r\n\r\n\r\nconst activity = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.activity\", [])\r\n    .component(\"activity\", __WEBPACK_IMPORTED_MODULE_1__activity_component__[\"a\" /* activityComponent */])\r\n    .service(\"ActivityService\", __WEBPACK_IMPORTED_MODULE_2__activity_service__[\"a\" /* ActivityService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = activity;\n\r\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass ActivityService {\r\n    constructor($http, SessionService, AccountsService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.activities = [];\r\n    }\r\n\r\n    getActivities() {\r\n        const account = this.AccountsService.getAccount(),\r\n            lastTransactionID = account.lastTransactionID;\r\n\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/transactions\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                lastTransactionID\r\n            }).then(transactions => {\r\n                this.activities = transactions.data.reverse();\r\n\r\n                return this.activities;\r\n            }).catch(err => err.data)\r\n        );\r\n    }\r\n\r\n    addActivity(activity) {\r\n        this.activities.splice(0, 0, {\r\n            id: activity.id,\r\n            type: activity.type,\r\n            instrument: activity.instrument,\r\n            units: activity.units,\r\n            price: activity.price,\r\n            pl: activity.pl,\r\n            accountBalance: activity.accountBalance,\r\n            time: activity.time\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ActivityService;\n\r\nActivityService.$inject = [\"$http\", \"SessionService\", \"AccountsService\"];\r\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__charts_controller__ = __webpack_require__(30);\n\r\n\r\nconst chartsComponent = {\r\n    templateUrl: \"app/components/charts/charts.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__charts_controller__[\"a\" /* ChartsController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = chartsComponent;\n\r\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n\r\n\r\nclass ChartsController {\r\n    constructor($rootScope, $mdDialog, AccountsService,\r\n            ChartsService, QuotesService, TradesService) {\r\n        this.$rootScope = $rootScope;\r\n        this.$mdDialog = $mdDialog;\r\n        this.AccountsService = AccountsService;\r\n        this.ChartsService = ChartsService;\r\n        this.QuotesService = QuotesService;\r\n        this.TradesService = TradesService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.account = this.AccountsService.getAccount();\r\n\r\n        this.selectedInstrument = \"EUR_USD\";\r\n\r\n        this.granularities = [\r\n            \"S5\",\r\n            \"S10\",\r\n            \"S15\",\r\n            \"S30\",\r\n            \"M1\",\r\n            \"M2\",\r\n            \"M3\",\r\n            \"M4\",\r\n            \"M5\",\r\n            \"M10\",\r\n            \"M15\",\r\n            \"M30\",\r\n            \"H1\",\r\n            \"H2\",\r\n            \"H3\",\r\n            \"H4\",\r\n            \"H6\",\r\n            \"H8\",\r\n            \"H12\",\r\n            \"D\",\r\n            \"W\",\r\n            \"M\"\r\n        ];\r\n        this.selectedGranularity = \"M5\";\r\n\r\n        this.feed = this.QuotesService.getQuotes();\r\n\r\n        this.trades = this.TradesService.getTrades();\r\n\r\n        this.changeChart(this.selectedInstrument, this.selectedGranularity);\r\n    }\r\n\r\n    changeChart(instrument, granularity) {\r\n        this.ChartsService.getHistQuotes({\r\n            instrument,\r\n            granularity\r\n        }).then(candles => {\r\n            this.data = candles;\r\n        });\r\n    }\r\n\r\n\r\n    openOrderDialog(event, side) {\r\n        const scope = __WEBPACK_IMPORTED_MODULE_0_angular___default.a.extend(this.$rootScope.$new(true), {\r\n            params: {\r\n                side,\r\n                selectedInstrument: this.selectedInstrument,\r\n                instruments: this.account.streamingInstruments\r\n            }\r\n        });\r\n\r\n        this.$mdDialog.show({\r\n            template: \"<order-dialog aria-label='Order Dialog' params='params'></order-dialog>\",\r\n            scope,\r\n            preserveScope: true,\r\n            targetEvent: event\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ChartsController;\n\r\nChartsController.$inject = [\"$rootScope\", \"$mdDialog\", \"AccountsService\",\r\n    \"ChartsService\", \"QuotesService\", \"TradesService\"];\r\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__charts_css__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__charts_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__charts_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__charts_component__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__charts_service__ = __webpack_require__(32);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst charts = __WEBPACK_IMPORTED_MODULE_1_angular___default.a\r\n    .module(\"components.charts\", [])\r\n    .component(\"charts\", __WEBPACK_IMPORTED_MODULE_2__charts_component__[\"a\" /* chartsComponent */])\r\n    .service(\"ChartsService\", __WEBPACK_IMPORTED_MODULE_3__charts_service__[\"a\" /* ChartsService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = charts;\n\r\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass ChartsService {\r\n    constructor($http, SessionService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n    }\r\n\r\n    getHistQuotes(opt) {\r\n        return this.SessionService.isLogged().then(credentials => {\r\n            const instrument = opt && opt.instrument || \"EUR_USD\",\r\n                granularity = opt && opt.granularity || \"M5\",\r\n                count = opt && opt.count || 251,\r\n                alignmentTimezone = opt && opt.alignmentTimezone\r\n                    || \"America/New_York\",\r\n                dailyAlignment = opt && opt.dailyAlignment || \"0\";\r\n\r\n            return this.$http.post(\"/api/candles\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                instrument,\r\n                granularity,\r\n                count,\r\n                alignmentTimezone,\r\n                dailyAlignment\r\n            }).then(candles => candles.data)\r\n            .catch(err => err.data);\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ChartsService;\n\r\nChartsService.$inject = [\"$http\", \"SessionService\"];\r\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = dualColorDirective;\nfunction dualColorDirective() {\r\n    const directive = {\r\n        restrict: \"A\",\r\n        link\r\n    };\r\n\r\n    return directive;\r\n\r\n    function link(scope, element, attrs) {\r\n        scope.$watch(attrs.dualColor, (newValue, oldValue) => {\r\n            if (newValue !== oldValue) {\r\n                if (newValue > 0) {\r\n                    element.removeClass(\"highlight-red\");\r\n                    element.addClass(\"highlight-green\");\r\n                }\r\n                if (newValue < 0) {\r\n                    element.removeClass(\"highlight-green\");\r\n                    element.addClass(\"highlight-red\");\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\ndualColorDirective.$inject = [];\r\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__dual_color_directive__ = __webpack_require__(33);\n\r\n\r\n\r\n\r\nconst dualColor = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.dual-color\", [])\r\n    .directive(\"dualColor\", __WEBPACK_IMPORTED_MODULE_1__dual_color_directive__[\"a\" /* dualColorDirective */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = dualColor;\n\r\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__exposure_controller__ = __webpack_require__(36);\n\r\n\r\nconst exposureComponent = {\r\n    templateUrl: \"app/components/exposure/exposure.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__exposure_controller__[\"a\" /* ExposureController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = exposureComponent;\n\r\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass ExposureController {\r\n    constructor(TradesService) {\r\n        this.TradesService = TradesService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.exposures = [];\r\n\r\n        const trades = this.TradesService.getTrades(),\r\n            exps = {};\r\n\r\n        trades.forEach(trade => {\r\n            const legs = trade.instrument.split(\"_\");\r\n\r\n            exps[legs[0]] = exps[legs[0]] || 0;\r\n            exps[legs[1]] = exps[legs[1]] || 0;\r\n\r\n            exps[legs[0]] += parseInt(trade.currentUnits, 10);\r\n            exps[legs[1]] -= trade.currentUnits * trade.price;\r\n        });\r\n\r\n        Object.keys(exps).forEach(exp => {\r\n            const type = exps[exp] > 0;\r\n\r\n            this.exposures.push({\r\n                type: type ? \"Long\" : \"Short\",\r\n                market: exp,\r\n                units: Math.abs(exps[exp])\r\n            });\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ExposureController;\n\r\nExposureController.$inject = [\"TradesService\"];\r\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__exposure_component__ = __webpack_require__(35);\n\r\n\r\n\r\n\r\nconst exposure = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.exposure\", [])\r\n    .component(\"exposure\", __WEBPACK_IMPORTED_MODULE_1__exposure_component__[\"a\" /* exposureComponent */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = exposure;\n\r\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__header_controller__ = __webpack_require__(39);\n\r\n\r\nconst headerComponent = {\r\n    templateUrl: \"app/components/header/header.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__header_controller__[\"a\" /* HeaderController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = headerComponent;\n\r\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n\r\n\r\nclass HeaderController {\r\n    constructor($window, $rootScope, $mdDialog, $mdBottomSheet,\r\n            ToastService, AccountsService, SessionService,\r\n            QuotesService, StreamingService) {\r\n        this.$window = $window;\r\n        this.$rootScope = $rootScope;\r\n        this.$mdDialog = $mdDialog;\r\n        this.$mdBottomSheet = $mdBottomSheet;\r\n        this.ToastService = ToastService;\r\n        this.AccountsService = AccountsService;\r\n        this.SessionService = SessionService;\r\n        this.QuotesService = QuotesService;\r\n        this.StreamingService = StreamingService;\r\n    }\r\n\r\n    $onInit() {\r\n        const instrsStorage = this.$window.localStorage.getItem(\"argo.instruments\");\r\n\r\n        this.instrs = __WEBPACK_IMPORTED_MODULE_0_angular___default.a.fromJson(instrsStorage) || {\r\n            EUR_USD: true,\r\n            USD_JPY: true,\r\n            GBP_USD: true,\r\n            EUR_GBP: true,\r\n            USD_CHF: true,\r\n            EUR_JPY: true,\r\n            EUR_CHF: true,\r\n            USD_CAD: true,\r\n            AUD_USD: true,\r\n            GBP_JPY: true\r\n        };\r\n\r\n        this.isLoadingViewWatcher = this.$rootScope.$watch(\"isLoadingView\", () => {\r\n            this.isLoadingView = this.$rootScope.isLoadingView;\r\n        });\r\n    }\r\n\r\n    openTokenDialog(event) {\r\n        this.$mdDialog.show({\r\n            template: \"<token-dialog aria-label='Token Dialog'></token-dialog>\",\r\n            targetEvent: event\r\n        }).then(tokenInfo => {\r\n            if (tokenInfo) {\r\n                this.environment = tokenInfo.environment;\r\n                this.token = tokenInfo.token;\r\n            } else {\r\n                this.environment = \"\";\r\n                this.token = \"\";\r\n                this.accountId = \"\";\r\n            }\r\n\r\n            this.AccountsService.getAccounts({\r\n                environment: this.environment,\r\n                token: this.token\r\n            }).then(accounts => {\r\n                const scope = __WEBPACK_IMPORTED_MODULE_0_angular___default.a.extend(this.$rootScope.$new(true), {\r\n                    accounts\r\n                });\r\n\r\n                this.$mdBottomSheet.show({\r\n                    template: \"<accounts-bottomsheet accounts='accounts'></accounts-bottomsheet>\",\r\n                    scope,\r\n                    preserveScope: true,\r\n                    targetEvent: event\r\n                }).then(accountSelected => {\r\n                    this.accountId = accountSelected.id;\r\n\r\n                    this.SessionService.setCredentials({\r\n                        environment: this.environment,\r\n                        token: this.token,\r\n                        accountId: this.accountId\r\n                    });\r\n\r\n                    this.AccountsService.getAccounts({\r\n                        environment: this.environment,\r\n                        token: this.token,\r\n                        accountId: this.accountId\r\n                    }).then(() => {\r\n                        const instruments = this.AccountsService\r\n                            .setStreamingInstruments(this.instrs);\r\n\r\n                        this.StreamingService.startStream({\r\n                            environment: this.environment,\r\n                            accessToken: this.token,\r\n                            accountId: this.accountId,\r\n                            instruments\r\n                        });\r\n                    });\r\n                });\r\n            }, err => {\r\n                this.ToastService.show(err);\r\n            });\r\n        })\r\n        .catch(err => {\r\n            if (err) {\r\n                this.ToastService.show(err);\r\n            }\r\n        });\r\n    }\r\n\r\n    openSettingsDialog(event) {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            const allInstrs = this.AccountsService.getAccount().instruments;\r\n\r\n            __WEBPACK_IMPORTED_MODULE_0_angular___default.a.forEach(allInstrs, instrument => {\r\n                if (!this.instrs.hasOwnProperty(instrument.name)) {\r\n                    this.instrs[instrument.name] = false;\r\n                }\r\n            });\r\n\r\n            const scope = __WEBPACK_IMPORTED_MODULE_0_angular___default.a.extend(this.$rootScope.$new(true), {\r\n                instruments: this.instrs\r\n            });\r\n\r\n            this.$mdDialog.show({\r\n                template: \"<settings-dialog aria-label='Settings Dialog' instruments='instruments'></settings-dialog>\",\r\n                scope,\r\n                preserveScope: true,\r\n                targetEvent: event\r\n            }).then(settingsInfo => {\r\n                let instruments;\r\n\r\n                if (settingsInfo) {\r\n                    this.$window.localStorage.setItem(\"argo.instruments\",\r\n                        __WEBPACK_IMPORTED_MODULE_0_angular___default.a.toJson(settingsInfo));\r\n                    instruments = this.AccountsService\r\n                        .setStreamingInstruments(settingsInfo);\r\n\r\n                    this.QuotesService.reset();\r\n\r\n                    this.StreamingService.startStream({\r\n                        environment: credentials.environment,\r\n                        accessToken: credentials.token,\r\n                        accountId: credentials.accountId,\r\n                        instruments\r\n                    });\r\n                }\r\n            })\r\n            .catch(err => {\r\n                if (err) {\r\n                    this.ToastService.show(err);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = HeaderController;\n\r\nHeaderController.$inject = [\r\n    \"$window\", \"$rootScope\", \"$mdDialog\", \"$mdBottomSheet\",\r\n    \"ToastService\", \"AccountsService\", \"SessionService\",\r\n    \"QuotesService\", \"StreamingService\"\r\n];\r\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__header_component__ = __webpack_require__(38);\n\r\n\r\n\r\n\r\nconst header = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.header\", [])\r\n    .component(\"header\", __WEBPACK_IMPORTED_MODULE_1__header_component__[\"a\" /* headerComponent */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = header;\n\r\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = highlighterDirective;\nfunction highlighterDirective($timeout) {\r\n    const directive = {\r\n        restrict: \"A\",\r\n        link\r\n    };\r\n\r\n    return directive;\r\n\r\n    function link(scope, element, attrs) {\r\n        scope.$watch(attrs.highlighter, (newValue, oldValue) => {\r\n            let newclass;\r\n\r\n            if (newValue !== oldValue) {\r\n                newclass = newValue < oldValue ?\r\n                    \"highlight-red\" : \"highlight-green\";\r\n\r\n                element.addClass(newclass);\r\n\r\n                $timeout(() => {\r\n                    element.removeClass(newclass);\r\n                }, 500);\r\n            }\r\n        });\r\n    }\r\n}\r\nhighlighterDirective.$inject = [\"$timeout\"];\r\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__highlighter_directive__ = __webpack_require__(41);\n\r\n\r\n\r\n\r\nconst highlighter = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.highlighter\", [])\r\n    .directive(\"highlighter\", __WEBPACK_IMPORTED_MODULE_1__highlighter_directive__[\"a\" /* highlighterDirective */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = highlighter;\n\r\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__news_controller__ = __webpack_require__(44);\n\r\n\r\nconst newsComponent = {\r\n    templateUrl: \"app/components/news/news.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__news_controller__[\"a\" /* NewsController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = newsComponent;\n\r\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass NewsController {\r\n    constructor(NewsService) {\r\n        this.NewsService = NewsService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.NewsService.getNews().then(news => {\r\n            this.news = news;\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = NewsController;\n\r\nNewsController.$inject = [\"NewsService\"];\r\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__news_component__ = __webpack_require__(43);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__news_service__ = __webpack_require__(46);\n\r\n\r\n\r\n\r\n\r\nconst news = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.news\", [])\r\n    .component(\"news\", __WEBPACK_IMPORTED_MODULE_1__news_component__[\"a\" /* newsComponent */])\r\n    .service(\"NewsService\", __WEBPACK_IMPORTED_MODULE_2__news_service__[\"a\" /* NewsService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = news;\n\r\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass NewsService {\r\n    constructor($http, SessionService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n    }\r\n\r\n    getNews() {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/calendar\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token\r\n            }).then(news => news.data)\r\n            .catch(err => err.data)\r\n        );\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = NewsService;\n\r\nNewsService.$inject = [\"$http\", \"SessionService\"];\r\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ohlcChartDirective;\n// import * as d3 from \"d3\";\r\n// import techan from \"techan\";\r\n\r\nfunction ohlcChartDirective() {\r\n    const directive = {\r\n        restrict: \"E\",\r\n        scope: {\r\n            instrument: \"=\",\r\n            granularity: \"=\",\r\n            data: \"=\",\r\n            feed: \"=\",\r\n            trades: \"=\"\r\n        },\r\n        link\r\n    };\r\n\r\n    return directive;\r\n\r\n    function link(scope, element) {\r\n        let myInstrument,\r\n            myGranularity,\r\n            myTrades,\r\n            data,\r\n            refreshChart,\r\n            lastHistUpdate,\r\n            lastData,\r\n            lastClose,\r\n            feedVolume = 0;\r\n\r\n        scope.$watch(\"data\", csv => {\r\n            if (csv && csv.length > 0) {\r\n                myInstrument = scope.instrument;\r\n                myGranularity = scope.granularity;\r\n\r\n                refreshChart = drawChart(element[0], csv);\r\n\r\n                lastData = data && data[data.length - 1];\r\n                lastClose = lastData.close;\r\n                feedVolume = lastData.volume;\r\n                lastHistUpdate = getLastHistUpdate(myGranularity);\r\n            }\r\n        });\r\n\r\n        scope.$watch(\"feed\", feed => {\r\n            const tick = feed[myInstrument],\r\n                nextHistUpdate = getLastHistUpdate(myGranularity, tick);\r\n\r\n            let midPrice;\r\n\r\n            if (tick && data && lastHistUpdate !== nextHistUpdate) {\r\n                data.shift();\r\n                tick.bid = parseFloat(tick.bid);\r\n                tick.ask = parseFloat(tick.ask);\r\n                midPrice = (tick.bid + tick.ask) / 2;\r\n                feedVolume = 0;\r\n                data.push({\r\n                    open: midPrice,\r\n                    close: midPrice,\r\n                    high: midPrice,\r\n                    low: midPrice,\r\n                    date: new Date(nextHistUpdate),\r\n                    volume: feedVolume\r\n                });\r\n\r\n                lastHistUpdate = nextHistUpdate;\r\n            }\r\n\r\n            if (tick && data) {\r\n\r\n                if (lastData.close !== lastClose) {\r\n                    feedVolume += 1;\r\n                }\r\n\r\n                tick.bid = parseFloat(tick.bid);\r\n                tick.ask = parseFloat(tick.ask);\r\n                midPrice = (tick.bid + tick.ask) / 2;\r\n\r\n                lastData = data && data[data.length - 1];\r\n                lastClose = lastData.close;\r\n                lastData.close = midPrice;\r\n                lastData.volume = feedVolume;\r\n\r\n                if (lastData.close > lastData.high) {\r\n                    lastData.high = lastData.close;\r\n                }\r\n\r\n                if (lastData.close < lastData.low) {\r\n                    lastData.low = lastData.close;\r\n                }\r\n\r\n                refreshChart();\r\n            }\r\n\r\n        }, true);\r\n\r\n        function getLastHistUpdate(granularity, tick) {\r\n            const time = tick && tick.time,\r\n                now = time ? new Date(time) : new Date();\r\n\r\n            let coeff;\r\n\r\n            if (granularity === \"S5\") {\r\n                coeff = 1000 * 5;\r\n            } else if (granularity === \"S10\") {\r\n                coeff = 1000 * 10;\r\n            } else if (granularity === \"S15\") {\r\n                coeff = 1000 * 15;\r\n            } else if (granularity === \"S30\") {\r\n                coeff = 1000 * 30;\r\n            } else if (granularity === \"M1\") {\r\n                coeff = 1000 * 60;\r\n            } else if (granularity === \"M2\") {\r\n                coeff = 1000 * 60 * 2;\r\n            } else if (granularity === \"M3\") {\r\n                coeff = 1000 * 60 * 3;\r\n            } else if (granularity === \"M4\") {\r\n                coeff = 1000 * 60 * 4;\r\n            } else if (granularity === \"M5\") {\r\n                coeff = 1000 * 60 * 5;\r\n            } else if (granularity === \"M10\") {\r\n                coeff = 1000 * 60 * 10;\r\n            } else if (granularity === \"M15\") {\r\n                coeff = 1000 * 60 * 15;\r\n            } else if (granularity === \"M30\") {\r\n                coeff = 1000 * 60 * 30;\r\n            } else if (granularity === \"H1\") {\r\n                coeff = 1000 * 60 * 60;\r\n            } else if (granularity === \"H2\") {\r\n                coeff = 1000 * 60 * 60 * 2;\r\n            } else if (granularity === \"H3\") {\r\n                coeff = 1000 * 60 * 60 * 3;\r\n            } else if (granularity === \"H4\") {\r\n                coeff = 1000 * 60 * 60 * 4;\r\n            } else if (granularity === \"H6\") {\r\n                coeff = 1000 * 60 * 60 * 6;\r\n            } else if (granularity === \"H8\") {\r\n                coeff = 1000 * 60 * 60 * 8;\r\n            } else if (granularity === \"H12\") {\r\n                coeff = 1000 * 60 * 60 * 12;\r\n            } else {\r\n\r\n                // for D / W / M\r\n                coeff = 1000 * 60 * 60 * 12;\r\n            }\r\n\r\n            return Math.floor(now / (coeff)) * coeff;\r\n        }\r\n\r\n        function drawChart(el, csv) {\r\n            const margin = {\r\n                    top: 0,\r\n                    right: 20,\r\n                    bottom: 30,\r\n                    left: 75\r\n                },\r\n                width = 960 - margin.left - margin.right,\r\n                height = 400 - margin.top - margin.bottom;\r\n\r\n            const x = techan.scale.financetime()\r\n                .range([0, width]);\r\n\r\n            const y = d3.scaleLinear()\r\n                .range([height, 0]);\r\n\r\n            const yVolume = d3.scaleLinear()\r\n                .range([y(0), y(0.2)]);\r\n\r\n            const ohlc = techan.plot.ohlc()\r\n                .xScale(x)\r\n                .yScale(y);\r\n\r\n            const tradearrow = techan.plot.tradearrow()\r\n                .xScale(x)\r\n                .yScale(y)\r\n                .orient(d => {\r\n                    const side = d.type.startsWith(\"buy\") ? \"up\" : \"down\";\r\n\r\n                    return side;\r\n                });\r\n\r\n            const sma0 = techan.plot.sma()\r\n                .xScale(x)\r\n                .yScale(y);\r\n\r\n            const sma0Calculator = techan.indicator.sma()\r\n                .period(10);\r\n\r\n            const sma1 = techan.plot.sma()\r\n                .xScale(x)\r\n                .yScale(y);\r\n\r\n            const sma1Calculator = techan.indicator.sma()\r\n                .period(20);\r\n\r\n            const volume = techan.plot.volume()\r\n                .accessor(ohlc.accessor())\r\n                .xScale(x)\r\n                .yScale(yVolume);\r\n\r\n            const xAxis = d3.axisBottom(x);\r\n\r\n            const yAxis = d3.axisLeft(y);\r\n\r\n            const volumeAxis = d3.axisRight(yVolume)\r\n                .ticks(3)\r\n                .tickFormat(d3.format(\",.3s\"));\r\n\r\n            const timeAnnotation = techan.plot.axisannotation()\r\n                .axis(xAxis)\r\n                .orient(\"bottom\")\r\n                .format(d3.timeFormat(\"%Y-%m-%d %H:%M\"))\r\n                .width(80)\r\n                .translate([0, height]);\r\n\r\n            const ohlcAnnotation = techan.plot.axisannotation()\r\n                .axis(yAxis)\r\n                .orient(\"left\")\r\n                .format(d3.format(\",.4f\"));\r\n\r\n            const volumeAnnotation = techan.plot.axisannotation()\r\n                .axis(volumeAxis)\r\n                .orient(\"right\")\r\n                .width(35);\r\n\r\n            const crosshair = techan.plot.crosshair()\r\n                .xScale(x)\r\n                .yScale(y)\r\n                .xAnnotation(timeAnnotation)\r\n                .yAnnotation([ohlcAnnotation, volumeAnnotation]);\r\n\r\n            d3.select(el).select(\"svg\").remove();\r\n\r\n            const svg = d3.select(el).append(\"svg\")\r\n                .attr(\"width\", width + margin.left + margin.right)\r\n                .attr(\"height\", height + margin.top + margin.bottom)\r\n                .append(\"g\")\r\n                .attr(\"transform\",\r\n                    `translate(${margin.left}, ${margin.top})`);\r\n\r\n            const defs = svg.append(\"defs\")\r\n                .append(\"clipPath\")\r\n                    .attr(\"id\", \"ohlcClip\");\r\n\r\n            defs.append(\"rect\")\r\n                .attr(\"x\", 0)\r\n                .attr(\"y\", 0)\r\n                .attr(\"width\", width)\r\n                .attr(\"height\", height);\r\n\r\n            const ohlcSelection = svg.append(\"g\")\r\n                .attr(\"class\", \"ohlc\")\r\n                .attr(\"transform\", \"translate(0,0)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"volume\")\r\n                .attr(\"clip-path\", \"url(#ohlcClip)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"candlestick\")\r\n                .attr(\"clip-path\", \"url(#ohlcClip)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"indicator sma ma-0\")\r\n                .attr(\"clip-path\", \"url(#ohlcClip)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"indicator sma ma-1\")\r\n                .attr(\"clip-path\", \"url(#ohlcClip)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"tradearrow\");\r\n\r\n            svg.append(\"g\")\r\n                .attr(\"class\", \"x axis\")\r\n                .attr(\"transform\", `translate(0, ${height})`);\r\n\r\n            svg\r\n                .append(\"g\")\r\n                    .attr(\"class\", \"y axis\")\r\n                .append(\"text\")\r\n                    .attr(\"transform\", \"rotate(-90)\")\r\n                    .attr(\"y\", 6)\r\n                    .attr(\"dy\", \".71em\")\r\n                    .style(\"font-weight\", \"bold\")\r\n                    .style(\"text-anchor\", \"end\")\r\n                    .text(`Price (${myInstrument} / ${myGranularity})`);\r\n\r\n            svg.append(\"g\")\r\n                .attr(\"class\", \"volume axis\");\r\n\r\n            svg.append(\"g\")\r\n                .attr(\"class\", \"crosshair ohlc\");\r\n\r\n            data = d3.csvParse(csv).map(\r\n                d => ({\r\n                    date: new Date(d.Date),\r\n                    open: +d.Open,\r\n                    high: +d.High,\r\n                    low: +d.Low,\r\n                    close: +d.Close,\r\n                    volume: +d.Volume\r\n                })\r\n            );\r\n\r\n            svg.select(\"g.candlestick\").datum(data);\r\n            svg.select(\"g.sma.ma-0\").datum(sma0Calculator(data));\r\n            svg.select(\"g.sma.ma-1\").datum(sma1Calculator(data));\r\n            svg.select(\"g.volume\").datum(data);\r\n\r\n            redraw();\r\n\r\n            function redraw() {\r\n                const accessor = ohlc.accessor();\r\n\r\n                x.domain(data.map(accessor.d));\r\n                x.zoomable().domain([data.length - 130, data.length]);\r\n\r\n                y.domain(techan.scale.plot.ohlc(\r\n                    data.slice(data.length - 130, data.length)).domain());\r\n                yVolume.domain(techan.scale.plot.volume(\r\n                    data.slice(data.length - 130, data.length)).domain());\r\n\r\n                svg.select(\"g.x.axis\").call(xAxis);\r\n                svg.select(\"g.y.axis\").call(yAxis);\r\n                svg.select(\"g.volume.axis\").call(volumeAxis);\r\n\r\n                svg.select(\"g.candlestick\").datum(data).call(ohlc);\r\n                svg.select(\"g.tradearrow\").remove();\r\n                svg.append(\"g\").attr(\"class\", \"tradearrow\");\r\n                myTrades = scope.trades.filter(\r\n                    trade => trade.instrument === myInstrument)\r\n                    .map(\r\n                        trade => ({\r\n                            date: new Date(trade.openTime),\r\n                            type: trade.currentUnits > 0 ? \"buy\" : \"sell\",\r\n                            price: trade.price\r\n                        })\r\n                    );\r\n                svg.select(\"g.tradearrow\").datum(myTrades).call(tradearrow);\r\n\r\n                svg.select(\"g.sma.ma-0\")\r\n                    .datum(sma0Calculator(data)).call(sma0);\r\n                svg.select(\"g.sma.ma-1\")\r\n                    .datum(sma1Calculator(data)).call(sma1);\r\n\r\n                svg.select(\"g.volume\").datum(data).call(volume);\r\n\r\n                svg.select(\"g.crosshair.ohlc\").call(crosshair);\r\n            }\r\n\r\n            return redraw;\r\n        }\r\n\r\n    }\r\n}\r\nohlcChartDirective.$inject = [];\r\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ohlc_chart_directive__ = __webpack_require__(47);\n\r\n\r\n\r\n\r\nconst ohlcChart = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.ohlc-chart\", [])\r\n    .directive(\"ohlcChart\", __WEBPACK_IMPORTED_MODULE_1__ohlc_chart_directive__[\"a\" /* ohlcChartDirective */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ohlcChart;\n\r\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__order_dialog_controller__ = __webpack_require__(50);\n\r\n\r\nconst orderDialogComponent = {\r\n    templateUrl: \"app/components/order-dialog/order-dialog.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__order_dialog_controller__[\"a\" /* OrderDialogController */],\r\n    bindings: {\r\n        params: \"<\"\r\n    }\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = orderDialogComponent;\n\r\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass OrderDialogController {\r\n    constructor($mdDialog, ToastService,\r\n            QuotesService, OrdersService, AccountsService) {\r\n        this.$mdDialog = $mdDialog;\r\n        this.ToastService = ToastService;\r\n        this.QuotesService = QuotesService;\r\n        this.OrdersService = OrdersService;\r\n        this.AccountsService = AccountsService;\r\n    }\r\n\r\n    $onInit() {\r\n        const account = this.AccountsService.getAccount();\r\n\r\n        this.pips = account.pips;\r\n\r\n        this.type = \"MARKET\";\r\n        this.side = this.params.side;\r\n        this.instruments = this.params.instruments;\r\n        this.selectedInstrument = this.params.selectedInstrument;\r\n        this.changeMarket(this.selectedInstrument);\r\n        this.expires = [\r\n            { label: \"1 Hour\", value: 60 * 60 * 1000 },\r\n            { label: \"2 Hours\", value: 2 * 60 * 60 * 1000 },\r\n            { label: \"3 Hours\", value: 3 * 60 * 60 * 1000 },\r\n            { label: \"4 Hours\", value: 4 * 60 * 60 * 1000 },\r\n            { label: \"5 Hours\", value: 5 * 60 * 60 * 1000 },\r\n            { label: \"6 Hours\", value: 6 * 60 * 60 * 1000 },\r\n            { label: \"8 Hours\", value: 8 * 60 * 60 * 1000 },\r\n            { label: \"12 Hours\", value: 12 * 60 * 60 * 1000 },\r\n            { label: \"18 Hours\", value: 18 * 60 * 60 * 1000 },\r\n            { label: \"1 Day\", value: 60 * 60 * 24 * 1000 },\r\n            { label: \"2 Days\", value: 2 * 60 * 60 * 24 * 1000 },\r\n            { label: \"1 Week\", value: 7 * 60 * 60 * 24 * 1000 },\r\n            { label: \"1 Month\", value: 30 * 60 * 60 * 24 * 1000 },\r\n            { label: \"2 Months\", value: 60 * 60 * 60 * 24 * 1000 },\r\n            { label: \"3 Months\", value: 90 * 60 * 60 * 24 * 1000 }\r\n        ];\r\n        this.selectedExpire = 604800000; // 1 week\r\n        this.measure = \"price\";\r\n        this.isLowerBound = false;\r\n        this.isUpperBound = false;\r\n        this.isTakeProfit = false;\r\n        this.isStopLoss = false;\r\n        this.isTrailingStop = false;\r\n    }\r\n\r\n    changeMarket(instrument) {\r\n        if (!this.pips) {\r\n            return;\r\n        }\r\n\r\n        const price = this.QuotesService.getQuotes()[instrument],\r\n            fixed = ((this.pips[this.selectedInstrument].toString())\r\n                .match(/0/g) || []).length;\r\n\r\n        this.measure = \"price\";\r\n        this.step = parseFloat(this.pips[this.selectedInstrument]);\r\n        if (this.side === \"buy\") {\r\n            this.quote = parseFloat(price && price.ask);\r\n            this.takeProfit = parseFloat((this.quote + this.step * 10)\r\n                .toFixed(fixed));\r\n            this.stopLoss = parseFloat((this.quote - this.step * 10)\r\n                .toFixed(fixed));\r\n        } else {\r\n            this.quote = parseFloat(price && price.bid);\r\n            this.takeProfit = parseFloat((this.quote - this.step * 10)\r\n                .toFixed(fixed));\r\n            this.stopLoss = parseFloat((this.quote + this.step * 10)\r\n                .toFixed(fixed));\r\n        }\r\n        this.lowerBound = parseFloat((this.quote - this.step).toFixed(fixed));\r\n        this.upperBound = parseFloat((this.quote + this.step).toFixed(fixed));\r\n        this.trailingStop = 25;\r\n    }\r\n\r\n    changeMeasure(measure) {\r\n        if (measure === \"price\") {\r\n            this.changeMarket(this.selectedInstrument);\r\n        } else {\r\n            this.lowerBound = 1;\r\n            this.upperBound = 1;\r\n            this.takeProfit = 10;\r\n            this.stopLoss = 10;\r\n            this.trailingStop = 25;\r\n            this.step = 1;\r\n        }\r\n    }\r\n\r\n    hide() {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    cancel() {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n    answer(action) {\r\n        const order = {},\r\n            isBuy = this.side === \"buy\",\r\n            isMeasurePips = this.measure === \"pips\";\r\n\r\n        this.$mdDialog.hide(action);\r\n\r\n        this.step = parseFloat(this.pips[this.selectedInstrument]);\r\n\r\n        order.instrument = this.selectedInstrument;\r\n        order.units = this.units;\r\n        if (this.units && !isBuy) {\r\n            order.units = `-${order.units}`;\r\n        }\r\n\r\n        order.side = this.side;\r\n        order.type = this.type;\r\n\r\n        if (order.type === \"LIMIT\") {\r\n            order.price = this.quote && this.quote.toString();\r\n            order.gtdTime = new Date(Date.now() + this.selectedExpire);\r\n        }\r\n\r\n        if (isMeasurePips) {\r\n            if (this.isLowerBound) {\r\n                order.priceBound =\r\n                    parseFloat(this.quote - this.step * this.lowerBound)\r\n                        .toString();\r\n            }\r\n            if (this.isUpperBound) {\r\n                order.priceBound =\r\n                    parseFloat(this.quote + this.step * this.upperBound)\r\n                        .toString();\r\n            }\r\n            if (isBuy) {\r\n                if (this.isTakeProfit) {\r\n                    order.takeProfitOnFill = {};\r\n                    order.takeProfitOnFill.price =\r\n                        parseFloat(this.quote + this.step * this.takeProfit)\r\n                            .toString();\r\n                }\r\n                if (this.isStopLoss) {\r\n                    order.stopLossOnFill = {};\r\n                    order.order.takeProfitOnFill.price =\r\n                        parseFloat(this.quote - this.step * this.stopLoss)\r\n                            .toString();\r\n                }\r\n            } else {\r\n                if (this.isTakeProfit) {\r\n                    order.takeProfitOnFill = {};\r\n                    order.takeProfitOnFill.price =\r\n                        parseFloat(this.quote - this.step * this.takeProfit)\r\n                            .toString();\r\n                }\r\n                if (this.isStopLoss) {\r\n                    order.stopLossOnFill = {};\r\n                    order.order.takeProfitOnFill.price =\r\n                        parseFloat(this.quote + this.step * this.stopLoss)\r\n                            .toString();\r\n                }\r\n            }\r\n        } else {\r\n            if (this.isLowerBound) {\r\n                order.priceBound = this.lowerBound.toString();\r\n            }\r\n            if (this.isUpperBound) {\r\n                order.priceBound = this.upperBound.toString();\r\n            }\r\n            if (this.isTakeProfit) {\r\n                order.takeProfitOnFill = {};\r\n                order.takeProfitOnFill.price = this.takeProfit.toString();\r\n            }\r\n            if (this.isStopLoss) {\r\n                order.stopLossOnFill = {};\r\n                order.stopLossOnFill.price = this.stopLoss.toString();\r\n            }\r\n        }\r\n        if (this.isTrailingStop) {\r\n            order.trailingStopLossOnFill = {};\r\n            order.trailingStopLossOnFill.distance =\r\n                (this.step * this.trailingStop).toString();\r\n        }\r\n\r\n        if (action === \"submit\") {\r\n            this.OrdersService.putOrder(order).then(transaction => {\r\n                let opened,\r\n                    canceled,\r\n                    side,\r\n                    message;\r\n\r\n                if (transaction.code && transaction.message) {\r\n                    message = \"ERROR \" +\r\n                        `${transaction.code} ${transaction.message}`;\r\n\r\n                    this.ToastService.show(message);\r\n                } else if (transaction.errorMessage) {\r\n                    message = `ERROR ${transaction.errorMessage}`;\r\n\r\n                    this.ToastService.show(message);\r\n                } else if (transaction.orderCancelTransaction) {\r\n                    canceled = transaction.orderCancelTransaction;\r\n\r\n                    message = `ERROR ${canceled.reason}`;\r\n\r\n                    this.ToastService.show(message);\r\n                } else {\r\n                    opened = transaction.orderFillTransaction ||\r\n                        transaction.orderFillTransaction ||\r\n                        transaction.orderCreateTransaction;\r\n\r\n                    side = opened.units > 0 ? \"buy\" : \"sell\";\r\n                    message = `${side} ` +\r\n                        `${opened.instrument} ` +\r\n                        `#${opened.id} ` +\r\n                        `@${opened.price} ` +\r\n                        `for ${opened.units}`;\r\n\r\n                    this.ToastService.show(message);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = OrderDialogController;\n\r\nOrderDialogController.$inject = [\r\n    \"$mdDialog\", \"ToastService\",\r\n    \"QuotesService\", \"OrdersService\", \"AccountsService\"\r\n];\r\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__order_dialog_component__ = __webpack_require__(49);\n\r\n\r\n\r\n\r\nconst orderDialog = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.order-dialog\", [])\r\n    .component(\"orderDialog\", __WEBPACK_IMPORTED_MODULE_1__order_dialog_component__[\"a\" /* orderDialogComponent */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = orderDialog;\n\r\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__orders_controller__ = __webpack_require__(53);\n\r\n\r\nconst ordersComponent = {\r\n    templateUrl: \"app/components/orders/orders.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__orders_controller__[\"a\" /* OrdersController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ordersComponent;\n\r\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass OrdersController {\r\n    constructor($mdDialog, ToastService, OrdersService) {\r\n        this.$mdDialog = $mdDialog;\r\n        this.ToastService = ToastService;\r\n        this.OrdersService = OrdersService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.orders = this.OrdersService.getOrders();\r\n\r\n        this.OrdersService.refresh();\r\n    }\r\n\r\n    closeOrder(event, id) {\r\n        const confirm = this.$mdDialog.confirm()\r\n            .textContent(\"Are you sure to close the order?\")\r\n            .ariaLabel(\"Order closing confirmation\")\r\n            .ok(\"Ok\")\r\n            .cancel(\"Cancel\")\r\n            .targetEvent(event);\r\n\r\n        this.$mdDialog.show(confirm).then(() => {\r\n            this.OrdersService.closeOrder(id).then(order => {\r\n                const message = \"Closed \" +\r\n                    `#${order.orderCancelTransaction.orderID}`;\r\n\r\n                this.ToastService.show(message);\r\n            });\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = OrdersController;\n\r\nOrdersController.$inject = [\"$mdDialog\", \"ToastService\", \"OrdersService\"];\r\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__orders_component__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__orders_service__ = __webpack_require__(55);\n\r\n\r\n\r\n\r\n\r\nconst orders = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.orders\", [])\r\n    .component(\"orders\", __WEBPACK_IMPORTED_MODULE_1__orders_component__[\"a\" /* ordersComponent */])\r\n    .service(\"OrdersService\", __WEBPACK_IMPORTED_MODULE_2__orders_service__[\"a\" /* OrdersService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = orders;\n\r\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n\r\n\r\nclass OrdersService {\r\n    constructor($http, SessionService, AccountsService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.orders = [];\r\n    }\r\n\r\n    getOrders() {\r\n        return this.orders;\r\n    }\r\n\r\n    refresh() {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            this.$http.post(\"/api/orders\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            }).then(res => {\r\n                this.orders.length = 0;\r\n                __WEBPACK_IMPORTED_MODULE_0_angular___default.a.extend(this.orders, res.data);\r\n            });\r\n        });\r\n    }\r\n\r\n    putOrder(order) {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/order\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                instrument: order.instrument,\r\n                units: order.units,\r\n                side: order.side,\r\n                type: order.type,\r\n                expiry: order.expiry,\r\n                price: order.price,\r\n                priceBound: order.lowerBound || order.upperBound,\r\n                stopLossOnFill: order.stopLossOnFill,\r\n                takeProfitOnFill: order.takeProfitOnFill,\r\n                trailingStopLossOnFill: order.trailingStopLossOnFill\r\n            }).then(trade => trade.data)\r\n            .catch(err => err.data)\r\n        );\r\n    }\r\n\r\n    closeOrder(id) {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/closeorder\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                id\r\n            }).then(order => order.data)\r\n            .catch(err => err.data)\r\n        );\r\n    }\r\n\r\n    updateOrders(tick) {\r\n        const account = this.AccountsService.getAccount(),\r\n            pips = account.pips;\r\n\r\n        this.orders.forEach((order, index) => {\r\n            let current;\r\n\r\n            if (order.instrument === tick.instrument) {\r\n\r\n                if (order.units > 0) {\r\n                    current = tick.ask;\r\n                }\r\n                if (order.units < 0) {\r\n                    current = tick.bid;\r\n                }\r\n\r\n                this.orders[index].current = current;\r\n                this.orders[index].distance = (Math.abs(current - order.price) /\r\n                    pips[order.instrument]);\r\n            }\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = OrdersService;\n\r\nOrdersService.$inject = [\"$http\", \"SessionService\", \"AccountsService\"];\r\n\n\n/***/ }),\n/* 56 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__plugins_controller__ = __webpack_require__(57);\n\r\n\r\nconst pluginsComponent = {\r\n    templateUrl: \"app/components/plugins/plugins.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__plugins_controller__[\"a\" /* PluginsController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = pluginsComponent;\n\r\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass PluginsController {\r\n    constructor(PluginsService) {\r\n        this.PluginsService = PluginsService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.plugins = this.PluginsService.getPlugins();\r\n        this.pluginsInfo = this.PluginsService.getPluginsInfo();\r\n\r\n        this.PluginsService.refresh();\r\n    }\r\n\r\n    engage() {\r\n        this.PluginsService.engagePlugins(this.plugins);\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = PluginsController;\n\r\nPluginsController.$inject = [\"PluginsService\"];\r\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__plugins_component__ = __webpack_require__(56);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__plugins_service__ = __webpack_require__(59);\n\r\n\r\n\r\n\r\n\r\nconst plugins = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.plugins\", [])\r\n    .component(\"plugins\", __WEBPACK_IMPORTED_MODULE_1__plugins_component__[\"a\" /* pluginsComponent */])\r\n    .service(\"PluginsService\", __WEBPACK_IMPORTED_MODULE_2__plugins_service__[\"a\" /* PluginsService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = plugins;\n\r\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n\r\n\r\nclass PluginsService {\r\n    constructor($http, SessionService, AccountsService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.plugins = {};\r\n        this.pluginsInfo = {\r\n            count: 0\r\n        };\r\n    }\r\n\r\n    getPlugins() {\r\n        return this.plugins;\r\n    }\r\n\r\n    getPluginsInfo() {\r\n        return this.pluginsInfo;\r\n    }\r\n\r\n    refresh() {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            this.$http.post(\"/api/plugins\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            }).then(res => {\r\n                let name;\r\n\r\n                for (name in this.plugins) {\r\n                    if (this.plugins.hasOwnProperty(name)) {\r\n                        delete this.plugins[name];\r\n                    }\r\n                }\r\n                __WEBPACK_IMPORTED_MODULE_0_angular___default.a.extend(this.plugins, res.data);\r\n                this.pluginsInfo.count = Object.keys(this.plugins).length;\r\n\r\n                Object.keys(this.plugins).forEach(key => {\r\n                    if (this.plugins[key] === \"enabled\") {\r\n                        this.plugins[key] = true;\r\n                    } else {\r\n                        this.plugins[key] = false;\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    engagePlugins(plugs) {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            const account = this.AccountsService.getAccount();\r\n\r\n            this.$http.post(\"/api/engageplugins\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                plugins: plugs,\r\n                config: {\r\n                    pips: account.pips\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = PluginsService;\n\r\nPluginsService.$inject = [\"$http\", \"SessionService\", \"AccountsService\"];\r\n\n\n/***/ }),\n/* 60 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__positions_controller__ = __webpack_require__(61);\n\r\n\r\nconst positionsComponent = {\r\n    templateUrl: \"app/components/positions/positions.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__positions_controller__[\"a\" /* PositionsController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = positionsComponent;\n\r\n\n\n/***/ }),\n/* 61 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass PositionsController {\r\n    constructor(PositionsService) {\r\n        this.PositionsService = PositionsService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.PositionsService.getPositions().then(positions => {\r\n            this.positions = positions;\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = PositionsController;\n\r\nPositionsController.$inject = [\"PositionsService\"];\r\n\n\n/***/ }),\n/* 62 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__positions_component__ = __webpack_require__(60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__positions_service__ = __webpack_require__(63);\n\r\n\r\n\r\n\r\n\r\nconst positions = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.positions\", [])\r\n    .component(\"positions\", __WEBPACK_IMPORTED_MODULE_1__positions_component__[\"a\" /* positionsComponent */])\r\n    .service(\"PositionsService\", __WEBPACK_IMPORTED_MODULE_2__positions_service__[\"a\" /* PositionsService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = positions;\n\r\n\n\n/***/ }),\n/* 63 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass PositionsService {\r\n    constructor($http, SessionService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n    }\r\n\r\n    getPositions() {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/positions\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            }).then(positions => {\r\n                const data = [];\r\n\r\n                positions.data.forEach(position => {\r\n                    const longUnits = position.long &&\r\n                        parseInt(position.long.units, 10);\r\n                    const shortUnits = position.short &&\r\n                        parseInt(position.short.units, 10);\r\n                    const units = longUnits || shortUnits;\r\n                    const side = units > 0 ? \"buy\" : \"sell\";\r\n                    const avgPrice = (longUnits && position.long.averagePrice)\r\n                         || (shortUnits && position.short.averagePrice);\r\n\r\n                    data.push({\r\n                        side,\r\n                        instrument: position.instrument,\r\n                        units,\r\n                        avgPrice\r\n                    });\r\n                });\r\n\r\n                return data;\r\n            }).catch(err => err.data)\r\n        );\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = PositionsService;\n\r\nPositionsService.$inject = [\"$http\", \"SessionService\"];\r\n\n\n/***/ }),\n/* 64 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__quotes_controller__ = __webpack_require__(65);\n\r\n\r\nconst quotesComponent = {\r\n    templateUrl: \"app/components/quotes/quotes.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__quotes_controller__[\"a\" /* QuotesController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = quotesComponent;\n\r\n\n\n/***/ }),\n/* 65 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass QuotesController {\r\n    constructor(QuotesService) {\r\n        this.QuotesService = QuotesService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.quotes = this.QuotesService.getQuotes();\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = QuotesController;\n\r\nQuotesController.$inject = [\"QuotesService\"];\r\n\n\n/***/ }),\n/* 66 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__quotes_component__ = __webpack_require__(64);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__quotes_service__ = __webpack_require__(67);\n\r\n\r\n\r\n\r\n\r\nconst quotes = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.quotes\", [])\r\n    .component(\"quotes\", __WEBPACK_IMPORTED_MODULE_1__quotes_component__[\"a\" /* quotesComponent */])\r\n    .service(\"QuotesService\", __WEBPACK_IMPORTED_MODULE_2__quotes_service__[\"a\" /* QuotesService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = quotes;\n\r\n\n\n/***/ }),\n/* 67 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n\r\n\r\nclass QuotesService {\r\n    constructor(AccountsService) {\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.quotes = {};\r\n    }\r\n\r\n    getQuotes() {\r\n        return this.quotes;\r\n    }\r\n\r\n    updateTick(tick) {\r\n        const account = this.AccountsService.getAccount(),\r\n            streamingInstruments = account.streamingInstruments,\r\n            pips = account.pips,\r\n            instrument = tick.instrument;\r\n\r\n        this.quotes[instrument] = {\r\n            time: tick.time,\r\n            ask: tick.ask,\r\n            bid: tick.bid,\r\n            spread: ((tick.ask - tick.bid) / pips[instrument]).toFixed(1)\r\n        };\r\n\r\n\r\n        if (!__WEBPACK_IMPORTED_MODULE_0_angular___default.a.equals(streamingInstruments, Object.keys(this.quotes))) {\r\n            streamingInstruments.forEach(instr => {\r\n                let temp;\r\n\r\n                if (this.quotes.hasOwnProperty(instr)) {\r\n                    temp = this.quotes[instr];\r\n                    delete this.quotes[instr];\r\n                    this.quotes[instr] = temp;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        let key;\r\n\r\n        for (key in this.quotes) {\r\n            if (this.quotes.hasOwnProperty(key)) {\r\n                delete this.quotes[key];\r\n            }\r\n        }\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = QuotesService;\n\r\nQuotesService.$inject = [\"AccountsService\"];\r\n\n\n/***/ }),\n/* 68 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__session_service__ = __webpack_require__(69);\n\r\n\r\n\r\n\r\nconst session = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.session\", [])\r\n    .service(\"SessionService\", __WEBPACK_IMPORTED_MODULE_1__session_service__[\"a\" /* SessionService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = session;\n\r\n\n\n/***/ }),\n/* 69 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass SessionService {\r\n    constructor($q) {\r\n        this.deferred = $q.defer();\r\n        this.credentials = {\r\n            environment: null,\r\n            token: null,\r\n            accountId: null\r\n        };\r\n    }\r\n\r\n    setCredentials(session) {\r\n        this.credentials.environment = session.environment;\r\n        this.credentials.token = session.token;\r\n        this.credentials.accountId = session.accountId;\r\n\r\n        this.deferred.resolve(this.credentials);\r\n    }\r\n\r\n    isLogged() {\r\n        return this.deferred.promise;\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = SessionService;\n\r\nSessionService.$inject = [\"$q\"];\r\n\n\n/***/ }),\n/* 70 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__settings_dialog_controller__ = __webpack_require__(71);\n\r\n\r\nconst settingsDialogComponent = {\r\n    templateUrl: \"app/components/settings-dialog/settings-dialog.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__settings_dialog_controller__[\"a\" /* SettingsDialogController */],\r\n    bindings: {\r\n        instruments: \"<\"\r\n    }\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = settingsDialogComponent;\n\r\n\n\n/***/ }),\n/* 71 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass SettingsDialogController {\r\n    constructor($mdDialog) {\r\n        this.$mdDialog = $mdDialog;\r\n    }\r\n\r\n    hide() {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    cancel() {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n    answer(settings) {\r\n        this.$mdDialog.hide(settings);\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = SettingsDialogController;\n\r\nSettingsDialogController.$inject = [\"$mdDialog\"];\r\n\n\n/***/ }),\n/* 72 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__settings_dialog_component__ = __webpack_require__(70);\n\r\n\r\n\r\n\r\nconst settingsDialog = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.settings-dialog\", [])\r\n    .component(\"settingsDialog\", __WEBPACK_IMPORTED_MODULE_1__settings_dialog_component__[\"a\" /* settingsDialogComponent */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = settingsDialog;\n\r\n\r\n\n\n/***/ }),\n/* 73 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = slChartDirective;\n// import * as d3 from \"d3\";\r\n\r\n// Inspired by http://bl.ocks.org/vicapow/9904319\r\nfunction slChartDirective() {\r\n    const data = {},\r\n        directive = {\r\n            restrict: \"E\",\r\n            link,\r\n            scope: {\r\n                instrument: \"=\",\r\n                data: \"=\",\r\n                length: \"=\"\r\n            },\r\n            replace: true,\r\n            template: \"<svg class='sl'></svg>\",\r\n            transclude: true\r\n        };\r\n\r\n    return directive;\r\n\r\n    function link(scope, element) {\r\n\r\n        scope.$watch(\"data\", quote => {\r\n            redraw(quote);\r\n        });\r\n\r\n        function redraw(quote) {\r\n            const svg = d3.select(element[0]),\r\n                node = svg.node(),\r\n                instrument = scope.instrument,\r\n                w = node.clientWidth,\r\n                h = getComputedStyle(node)[\"font-size\"].replace(\"px\", \"\");\r\n\r\n            svg.selectAll(\"*\").remove();\r\n\r\n            if (!data[instrument]) {\r\n                data[instrument] = [];\r\n            }\r\n\r\n            data[instrument].push(\r\n                (parseFloat(quote.bid) +\r\n                    parseFloat(quote.ask)) / 2);\r\n\r\n            data[instrument] = data[instrument].slice(-scope.length);\r\n\r\n            if (data[instrument][0] > data[instrument].slice(-1)) {\r\n                node.style.stroke = \"red\";\r\n            } else {\r\n                node.style.stroke = \"green\";\r\n            }\r\n            node.style.height = `${h}px`;\r\n\r\n            const min = d3.min(data[instrument]);\r\n            const max = d3.max(data[instrument]);\r\n\r\n            const x = d3.scaleLinear()\r\n                .domain([0, data[instrument].length - 1]).range([0, w]);\r\n            const y = d3.scaleLinear()\r\n                .domain([min, max]).range([h, 0]);\r\n\r\n            const paths = data[instrument]\r\n                .map((d, i) => [x(i), y(d)])\r\n                .join(\"L\");\r\n\r\n            svg.append(\"path\").attr(\"d\", `M${paths}`);\r\n        }\r\n    }\r\n}\r\nslChartDirective.$inject = [];\r\n\n\n/***/ }),\n/* 74 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__sl_chart_directive__ = __webpack_require__(73);\n\r\n\r\n\r\n\r\nconst slChart = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.sl-chart\", [])\r\n    .directive(\"slChart\", __WEBPACK_IMPORTED_MODULE_1__sl_chart_directive__[\"a\" /* slChartDirective */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = slChart;\n\r\n\n\n/***/ }),\n/* 75 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__streaming_service__ = __webpack_require__(76);\n\r\n\r\n\r\n\r\nconst streaming = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.streaming\", [])\r\n    .service(\"StreamingService\", __WEBPACK_IMPORTED_MODULE_1__streaming_service__[\"a\" /* StreamingService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = streaming;\n\r\n\n\n/***/ }),\n/* 76 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n\r\n\r\nclass StreamingService {\r\n    constructor($timeout, $http, ToastService,\r\n            QuotesService, ActivityService, TradesService,\r\n            OrdersService, AccountsService, PluginsService) {\r\n        this.$timeout = $timeout;\r\n        this.$http = $http;\r\n        this.ToastService = ToastService;\r\n        this.QuotesService = QuotesService;\r\n        this.ActivityService = ActivityService;\r\n        this.TradesService = TradesService;\r\n        this.OrdersService = OrdersService;\r\n        this.AccountsService = AccountsService;\r\n        this.PluginsService = PluginsService;\r\n    }\r\n\r\n    startStream(data) {\r\n        this.$http.post(\"/api/startstream\", {\r\n            environment: data.environment,\r\n            accessToken: data.accessToken,\r\n            accountId: data.accountId,\r\n            instruments: data.instruments\r\n        }).then(() => {\r\n            this.getStream();\r\n        }).catch(err => {\r\n            this.ToastService.show(err);\r\n        });\r\n    }\r\n\r\n    getStream() {\r\n        const ws = new WebSocket(\"ws://localhost:8000/stream\");\r\n\r\n        ws.onmessage = event => {\r\n            let data,\r\n                isTick,\r\n                tick,\r\n                isTransaction,\r\n                transaction,\r\n                refreshPlugins;\r\n\r\n            this.$timeout(() => {\r\n                try {\r\n                    data = __WEBPACK_IMPORTED_MODULE_0_angular___default.a.fromJson(event.data);\r\n\r\n                    isTick = data.closeoutAsk && data.closeoutBid;\r\n                    isTransaction = data.accountID;\r\n                    refreshPlugins = data.refreshPlugins;\r\n\r\n                    if (isTick) {\r\n                        tick = {\r\n                            time: data.time,\r\n                            instrument: data.instrument,\r\n                            ask: data.closeoutAsk,\r\n                            bid: data.closeoutBid\r\n                        };\r\n\r\n                        this.QuotesService.updateTick(tick);\r\n                        this.TradesService.updateTrades(tick);\r\n                        this.OrdersService.updateOrders(tick);\r\n                    }\r\n\r\n                    if (isTransaction) {\r\n                        transaction = data;\r\n                        this.ActivityService.addActivity(transaction);\r\n\r\n                        this.TradesService.refresh();\r\n                        this.OrdersService.refresh();\r\n                        this.AccountsService.refresh();\r\n                    }\r\n\r\n                    if (refreshPlugins) {\r\n                        this.PluginsService.refresh();\r\n                    }\r\n                } catch (e) {\r\n\r\n                    // Discard \"incomplete\" json\r\n                    // console.log(e.name + \": \" + e.message);\r\n                }\r\n            });\r\n        };\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = StreamingService;\n\r\nStreamingService.$inject = [\r\n    \"$timeout\", \"$http\", \"ToastService\",\r\n    \"QuotesService\", \"ActivityService\", \"TradesService\",\r\n    \"OrdersService\", \"AccountsService\", \"PluginsService\"\r\n];\r\n\n\n/***/ }),\n/* 77 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__toast_service__ = __webpack_require__(78);\n\r\n\r\n\r\n\r\nconst toast = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.toast\", [])\r\n    .service(\"ToastService\", __WEBPACK_IMPORTED_MODULE_1__toast_service__[\"a\" /* ToastService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = toast;\n\r\n\n\n/***/ }),\n/* 78 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass ToastService {\r\n    constructor($mdToast) {\r\n        this.$mdToast = $mdToast;\r\n    }\r\n\r\n    show(message) {\r\n        this.$mdToast.show(\r\n            this.$mdToast.simple()\r\n                .textContent(message)\r\n                .action(\"CLOSE\")\r\n                .position(\"right bottom\")\r\n                .hideDelay(10000)\r\n        );\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ToastService;\n\r\nToastService.$inject = [\"$mdToast\"];\r\n\n\n/***/ }),\n/* 79 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__token_dialog_controller__ = __webpack_require__(80);\n\r\n\r\nconst tokenDialogComponent = {\r\n    templateUrl: \"app/components/token-dialog/token-dialog.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__token_dialog_controller__[\"a\" /* TokenDialogController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = tokenDialogComponent;\n\r\n\n\n/***/ }),\n/* 80 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass TokenDialogController {\r\n    constructor($mdDialog) {\r\n        this.$mdDialog = $mdDialog;\r\n    }\r\n\r\n    $onInit() {\r\n        this.environment = \"practice\";\r\n    }\r\n\r\n    hide() {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    cancel() {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n    answer(token) {\r\n        this.$mdDialog.hide(token);\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = TokenDialogController;\n\r\nTokenDialogController.$inject = [\"$mdDialog\"];\r\n\n\n/***/ }),\n/* 81 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__token_dialog_component__ = __webpack_require__(79);\n\r\n\r\n\r\n\r\nconst tokenDialog = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.token-dialog\", [])\r\n    .component(\"tokenDialog\", __WEBPACK_IMPORTED_MODULE_1__token_dialog_component__[\"a\" /* tokenDialogComponent */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = tokenDialog;\n\r\n\n\n/***/ }),\n/* 82 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__trades_controller__ = __webpack_require__(83);\n\r\n\r\nconst tradesComponent = {\r\n    templateUrl: \"app/components/trades/trades.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__trades_controller__[\"a\" /* TradesController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = tradesComponent;\n\r\n\n\n/***/ }),\n/* 83 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass TradesController {\r\n    constructor($mdDialog, ToastService, TradesService) {\r\n        this.$mdDialog = $mdDialog;\r\n        this.ToastService = ToastService;\r\n        this.TradesService = TradesService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.trades = this.TradesService.getTrades();\r\n\r\n        this.TradesService.refresh();\r\n    }\r\n\r\n    closeTrade(event, id) {\r\n        const confirm = this.$mdDialog.confirm()\r\n            .textContent(\"Are you sure to close the trade?\")\r\n            .ariaLabel(\"Trade closing confirmation\")\r\n            .ok(\"Ok\")\r\n            .cancel(\"Cancel\")\r\n            .targetEvent(event);\r\n\r\n        this.$mdDialog.show(confirm).then(() => {\r\n            this.TradesService.closeTrade(id).then(trade => {\r\n                const message = \"Closed \" +\r\n                    `${(trade.units > 0 ? \"sell\" : \"buy\")} ` +\r\n                    `${trade.instrument} ` +\r\n                    `#${trade.id} ` +\r\n                    `@${trade.price} ` +\r\n                    `P&L ${trade.pl}`;\r\n\r\n                this.ToastService.show(message);\r\n            }).catch(err => {\r\n                const message = `ERROR ${err.code} ${err.message}`;\r\n\r\n                this.ToastService.show(message);\r\n            });\r\n\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = TradesController;\n\r\nTradesController.$inject = [\"$mdDialog\", \"ToastService\", \"TradesService\"];\r\n\n\n/***/ }),\n/* 84 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__trades_component__ = __webpack_require__(82);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__trades_service__ = __webpack_require__(85);\n\r\n\r\n\r\n\r\n\r\nconst trades = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.trades\", [])\r\n    .component(\"trades\", __WEBPACK_IMPORTED_MODULE_1__trades_component__[\"a\" /* tradesComponent */])\r\n    .service(\"TradesService\", __WEBPACK_IMPORTED_MODULE_2__trades_service__[\"a\" /* TradesService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = trades;\n\r\n\n\n/***/ }),\n/* 85 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n\r\n\r\nclass TradesService {\r\n    constructor($http, SessionService, AccountsService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.trades = [];\r\n    }\r\n\r\n    getTrades() {\r\n        return this.trades;\r\n    }\r\n\r\n    refresh() {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            this.$http.post(\"/api/trades\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            }).then(res => {\r\n                this.trades.length = 0;\r\n                __WEBPACK_IMPORTED_MODULE_0_angular___default.a.extend(this.trades, res.data);\r\n                this.trades.forEach(trade => {\r\n                    trade.side = trade.currentUnits > 0 ? \"buy\" : \"sell\";\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    closeTrade(id) {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/closetrade\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                id\r\n            }).then(order => order.data)\r\n            .catch(err => err.data)\r\n        );\r\n    }\r\n\r\n    updateTrades(tick) {\r\n        const account = this.AccountsService.getAccount(),\r\n            pips = account.pips;\r\n\r\n        this.trades.forEach((trade, index) => {\r\n            let current,\r\n                side;\r\n\r\n            if (trade.instrument === tick.instrument) {\r\n                side = trade.currentUnits > 0 ? \"buy\" : \"sell\";\r\n\r\n                if (side === \"buy\") {\r\n                    current = tick.bid;\r\n                    this.trades[index].profitPips =\r\n                        ((current - trade.price) / pips[trade.instrument]);\r\n                }\r\n                if (side === \"sell\") {\r\n                    current = tick.ask;\r\n                    this.trades[index].profitPips =\r\n                        ((trade.price - current) / pips[trade.instrument]);\r\n                }\r\n\r\n                this.trades[index].current = current;\r\n            }\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = TradesService;\n\r\nTradesService.$inject = [\"$http\", \"SessionService\", \"AccountsService\"];\r\n\n\n/***/ }),\n/* 86 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__root_component__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__common_common_module__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_components_module__ = __webpack_require__(6);\n\r\n\r\n\r\n\r\n\r\n\r\nconst root = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"root\", [\r\n        __WEBPACK_IMPORTED_MODULE_2__common_common_module__[\"a\" /* common */],\r\n        __WEBPACK_IMPORTED_MODULE_3__components_components_module__[\"a\" /* components */]\r\n    ])\r\n    .component(\"root\", __WEBPACK_IMPORTED_MODULE_1__root_component__[\"a\" /* rootComponent */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"root\"] = root;\n\r\n\n\n/***/ })\n],[86]);\n\n\n// WEBPACK FOOTER //\n// app.bundle.js","import angular from \"angular\";\r\n\r\nimport { app } from \"./app.module\";\r\n\r\nexport const common = angular\r\n    .module(\"common\", [\r\n        app\r\n    ])\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/common/common.module.js\n// module id = 5\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { account } from \"./account/account.module\";\r\nimport { accountsBottomsheet } from \"./accounts-bottomsheet/accounts-bottomsheet.module\";\r\nimport { activity } from \"./activity/activity.module\";\r\nimport { charts } from \"./charts/charts.module\";\r\nimport { dualColor } from \"./dual-color/dual-color.module\";\r\nimport { exposure } from \"./exposure/exposure.module\";\r\nimport { header } from \"./header/header.module\";\r\nimport { highlighter } from \"./highlighter/highlighter.module\";\r\nimport { news } from \"./news/news.module\";\r\nimport { ohlcChart } from \"./ohlc-chart/ohlc-chart.module\";\r\nimport { orderDialog } from \"./order-dialog/order-dialog.module\";\r\nimport { orders } from \"./orders/orders.module\";\r\nimport { plugins } from \"./plugins/plugins.module\";\r\nimport { positions } from \"./positions/positions.module\";\r\nimport { quotes } from \"./quotes/quotes.module\";\r\nimport { session } from \"./session/session.module\";\r\nimport { settingsDialog } from \"./settings-dialog/settings-dialog.module\";\r\nimport { slChart } from \"./sl-chart/sl-chart.module\";\r\nimport { streaming } from \"./streaming/streaming.module\";\r\nimport { toast } from \"./toast/toast.module\";\r\nimport { tokenDialog } from \"./token-dialog/token-dialog.module\";\r\nimport { trades } from \"./trades/trades.module\";\r\n\r\nexport const components = angular\r\n    .module(\"components\", [\r\n        account,\r\n        accountsBottomsheet,\r\n        activity,\r\n        charts,\r\n        dualColor,\r\n        exposure,\r\n        header,\r\n        highlighter,\r\n        news,\r\n        ohlcChart,\r\n        orderDialog,\r\n        orders,\r\n        plugins,\r\n        positions,\r\n        quotes,\r\n        session,\r\n        settingsDialog,\r\n        slChart,\r\n        streaming,\r\n        toast,\r\n        tokenDialog,\r\n        trades\r\n    ])\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/components.module.js\n// module id = 6\n// module chunks = 0","export const rootComponent = {\r\n    templateUrl: \"app/root.html\"\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/root.component.js\n// module id = 7\n// module chunks = 0","import { AppController } from \"./app.controller\";\r\n\r\nexport const appComponent = {\r\n    templateUrl: \"app/common/app.html\",\r\n    controller: AppController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/common/app.component.js\n// module id = 14\n// module chunks = 0","export function appConfig($httpProvider, $locationProvider) {\r\n    const interceptors = $httpProvider.interceptors;\r\n\r\n    interceptors.push([\"$q\", \"$rootScope\", ($q, $rootScope) => {\r\n        let nLoadings = 0;\r\n\r\n        return {\r\n            request(request) {\r\n                nLoadings += 1;\r\n\r\n                $rootScope.isLoadingView = true;\r\n\r\n                return request;\r\n            },\r\n\r\n            response(response) {\r\n                nLoadings -= 1;\r\n                if (nLoadings === 0) {\r\n                    $rootScope.isLoadingView = false;\r\n                }\r\n\r\n                return response;\r\n            },\r\n\r\n            responseError(response) {\r\n                nLoadings -= 1;\r\n                if (!nLoadings) {\r\n                    $rootScope.isLoadingView = false;\r\n                }\r\n\r\n                return $q.reject(response);\r\n            }\r\n        };\r\n    }]);\r\n\r\n    $locationProvider.html5Mode(true);\r\n}\r\nappConfig.$inject = [\"$httpProvider\", \"$locationProvider\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/common/app.config.js\n// module id = 15\n// module chunks = 0","export class AppController {\r\n    $onInit() {\r\n        this.tabSelectedIndex = 0;\r\n    }\r\n\r\n    next() {\r\n        this.tabSelectedIndex = Math.min(this.tabSelectedIndex + 1, 6);\r\n    }\r\n\r\n    previous() {\r\n        this.tabSelectedIndex = Math.max(this.tabSelectedIndex - 1, 0);\r\n    }\r\n}\r\nAppController.$inject = [];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/common/app.controller.js\n// module id = 16\n// module chunks = 0","import \"./app.css\";\r\n\r\nimport angular from \"angular\";\r\nimport material from \"angular-material\";\r\n\r\nimport { appComponent } from \"./app.component\";\r\nimport { appConfig } from \"./app.config\";\r\n\r\nexport const app = angular\r\n    .module(\"common.app\", [\r\n        material\r\n    ])\r\n    .component(\"app\", appComponent)\r\n    .config(appConfig)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/common/app.module.js\n// module id = 17\n// module chunks = 0","import { AccountController } from \"./account.controller\";\r\n\r\nexport const accountComponent = {\r\n    templateUrl: \"app/components/account/account.html\",\r\n    controller: AccountController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/account/account.component.js\n// module id = 18\n// module chunks = 0","export class AccountController {\r\n    constructor(AccountService) {\r\n        this.AccountService = AccountService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.account = this.AccountService.getAccount();\r\n    }\r\n}\r\nAccountController.$inject = [\"AccountsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/account/account.controller.js\n// module id = 19\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { accountComponent } from \"./account.component\";\r\nimport { AccountsService } from \"./accounts.service\";\r\n\r\nexport const account = angular\r\n    .module(\"components.account\", [])\r\n    .component(\"account\", accountComponent)\r\n    .service(\"AccountsService\", AccountsService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/account/account.module.js\n// module id = 20\n// module chunks = 0","import angular from \"angular\";\r\n\r\nexport class AccountsService {\r\n    constructor($http, SessionService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n\r\n        this.account = {};\r\n    }\r\n\r\n    getAccount() {\r\n        return this.account;\r\n    }\r\n\r\n    refresh() {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            this.getAccounts({\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            });\r\n        });\r\n    }\r\n\r\n    getAccounts(data) {\r\n        const environment = data.environment || \"practice\",\r\n            token = data.token,\r\n            accountId = data.accountId,\r\n            api = accountId ? \"/api/account\" : \"/api/accounts\";\r\n\r\n        return this.$http.post(api, {\r\n            environment,\r\n            token,\r\n            accountId\r\n        }).then(response => {\r\n            const accounts = response.data.accounts || response.data;\r\n\r\n            if (response.data.message) {\r\n                throw response.data.message;\r\n            }\r\n\r\n            if (!accounts.length) {\r\n                angular.merge(this.account, response.data.account);\r\n\r\n                this.account.timestamp = new Date();\r\n\r\n                this.account.unrealizedPLPercent =\r\n                    this.account.unrealizedPL / this.account.balance * 100;\r\n\r\n                if (!this.account.instruments) {\r\n                    this.$http.post(\"/api/instruments\", {\r\n                        environment,\r\n                        token,\r\n                        accountId\r\n                    }).then(instruments => {\r\n                        this.account.instruments = instruments.data;\r\n                        this.account.pips = {};\r\n                        angular.forEach(this.account.instruments, i => {\r\n                            this.account.pips[i.name] =\r\n                                Math.pow(10, i.pipLocation);\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n\r\n            return accounts;\r\n        });\r\n    }\r\n\r\n    setStreamingInstruments(settings) {\r\n        this.account.streamingInstruments = Object.keys(settings)\r\n            .filter(el => !!settings[el]);\r\n\r\n        return this.account.streamingInstruments;\r\n    }\r\n}\r\nAccountsService.$inject = [\"$http\", \"SessionService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/account/accounts.service.js\n// module id = 21\n// module chunks = 0","import { AccountsBottomsheetController } from \"./accounts-bottomsheet.controller\";\r\n\r\nexport const accountsBottomsheetComponent = {\r\n    templateUrl: \"app/components/accounts-bottomsheet/accounts-bottomsheet.html\",\r\n    controller: AccountsBottomsheetController,\r\n    bindings: {\r\n        accounts: \"<\"\r\n    }\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/accounts-bottomsheet/accounts-bottomsheet.component.js\n// module id = 22\n// module chunks = 0","export class AccountsBottomsheetController {\r\n    constructor($mdBottomSheet) {\r\n        this.$mdBottomSheet = $mdBottomSheet;\r\n    }\r\n\r\n    onAccountClick($index) {\r\n        const account = this.accounts[$index];\r\n\r\n        this.$mdBottomSheet.hide(account);\r\n    }\r\n}\r\nAccountsBottomsheetController.$inject = [\"$mdBottomSheet\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/accounts-bottomsheet/accounts-bottomsheet.controller.js\n// module id = 23\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { accountsBottomsheetComponent } from \"./accounts-bottomsheet.component\";\r\n\r\nexport const accountsBottomsheet = angular\r\n    .module(\"components.accounts-bottomsheet\", [])\r\n    .component(\"accountsBottomsheet\", accountsBottomsheetComponent)\r\n    .name;\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/accounts-bottomsheet/accounts-bottomsheet.module.js\n// module id = 24\n// module chunks = 0","import { ActivityController } from \"./activity.controller\";\r\n\r\nexport const activityComponent = {\r\n    templateUrl: \"app/components/activity/activity.html\",\r\n    controller: ActivityController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/activity/activity.component.js\n// module id = 25\n// module chunks = 0","export class ActivityController {\r\n    constructor(ActivityService) {\r\n        this.ActivityService = ActivityService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.ActivityService.getActivities().then(activities => {\r\n            this.activities = activities;\r\n        });\r\n    }\r\n}\r\nActivityController.$inject = [\"ActivityService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/activity/activity.controller.js\n// module id = 26\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { activityComponent } from \"./activity.component\";\r\nimport { ActivityService } from \"./activity.service\";\r\n\r\nexport const activity = angular\r\n    .module(\"components.activity\", [])\r\n    .component(\"activity\", activityComponent)\r\n    .service(\"ActivityService\", ActivityService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/activity/activity.module.js\n// module id = 27\n// module chunks = 0","export class ActivityService {\r\n    constructor($http, SessionService, AccountsService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.activities = [];\r\n    }\r\n\r\n    getActivities() {\r\n        const account = this.AccountsService.getAccount(),\r\n            lastTransactionID = account.lastTransactionID;\r\n\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/transactions\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                lastTransactionID\r\n            }).then(transactions => {\r\n                this.activities = transactions.data.reverse();\r\n\r\n                return this.activities;\r\n            }).catch(err => err.data)\r\n        );\r\n    }\r\n\r\n    addActivity(activity) {\r\n        this.activities.splice(0, 0, {\r\n            id: activity.id,\r\n            type: activity.type,\r\n            instrument: activity.instrument,\r\n            units: activity.units,\r\n            price: activity.price,\r\n            pl: activity.pl,\r\n            accountBalance: activity.accountBalance,\r\n            time: activity.time\r\n        });\r\n    }\r\n}\r\nActivityService.$inject = [\"$http\", \"SessionService\", \"AccountsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/activity/activity.service.js\n// module id = 28\n// module chunks = 0","import { ChartsController } from \"./charts.controller\";\r\n\r\nexport const chartsComponent = {\r\n    templateUrl: \"app/components/charts/charts.html\",\r\n    controller: ChartsController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/charts/charts.component.js\n// module id = 29\n// module chunks = 0","import angular from \"angular\";\r\n\r\nexport class ChartsController {\r\n    constructor($rootScope, $mdDialog, AccountsService,\r\n            ChartsService, QuotesService, TradesService) {\r\n        this.$rootScope = $rootScope;\r\n        this.$mdDialog = $mdDialog;\r\n        this.AccountsService = AccountsService;\r\n        this.ChartsService = ChartsService;\r\n        this.QuotesService = QuotesService;\r\n        this.TradesService = TradesService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.account = this.AccountsService.getAccount();\r\n\r\n        this.selectedInstrument = \"EUR_USD\";\r\n\r\n        this.granularities = [\r\n            \"S5\",\r\n            \"S10\",\r\n            \"S15\",\r\n            \"S30\",\r\n            \"M1\",\r\n            \"M2\",\r\n            \"M3\",\r\n            \"M4\",\r\n            \"M5\",\r\n            \"M10\",\r\n            \"M15\",\r\n            \"M30\",\r\n            \"H1\",\r\n            \"H2\",\r\n            \"H3\",\r\n            \"H4\",\r\n            \"H6\",\r\n            \"H8\",\r\n            \"H12\",\r\n            \"D\",\r\n            \"W\",\r\n            \"M\"\r\n        ];\r\n        this.selectedGranularity = \"M5\";\r\n\r\n        this.feed = this.QuotesService.getQuotes();\r\n\r\n        this.trades = this.TradesService.getTrades();\r\n\r\n        this.changeChart(this.selectedInstrument, this.selectedGranularity);\r\n    }\r\n\r\n    changeChart(instrument, granularity) {\r\n        this.ChartsService.getHistQuotes({\r\n            instrument,\r\n            granularity\r\n        }).then(candles => {\r\n            this.data = candles;\r\n        });\r\n    }\r\n\r\n\r\n    openOrderDialog(event, side) {\r\n        const scope = angular.extend(this.$rootScope.$new(true), {\r\n            params: {\r\n                side,\r\n                selectedInstrument: this.selectedInstrument,\r\n                instruments: this.account.streamingInstruments\r\n            }\r\n        });\r\n\r\n        this.$mdDialog.show({\r\n            template: \"<order-dialog aria-label='Order Dialog' params='params'></order-dialog>\",\r\n            scope,\r\n            preserveScope: true,\r\n            targetEvent: event\r\n        });\r\n    }\r\n}\r\nChartsController.$inject = [\"$rootScope\", \"$mdDialog\", \"AccountsService\",\r\n    \"ChartsService\", \"QuotesService\", \"TradesService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/charts/charts.controller.js\n// module id = 30\n// module chunks = 0","import \"./charts.css\";\r\n\r\nimport angular from \"angular\";\r\n\r\nimport { chartsComponent } from \"./charts.component\";\r\nimport { ChartsService } from \"./charts.service\";\r\n\r\nexport const charts = angular\r\n    .module(\"components.charts\", [])\r\n    .component(\"charts\", chartsComponent)\r\n    .service(\"ChartsService\", ChartsService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/charts/charts.module.js\n// module id = 31\n// module chunks = 0","export class ChartsService {\r\n    constructor($http, SessionService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n    }\r\n\r\n    getHistQuotes(opt) {\r\n        return this.SessionService.isLogged().then(credentials => {\r\n            const instrument = opt && opt.instrument || \"EUR_USD\",\r\n                granularity = opt && opt.granularity || \"M5\",\r\n                count = opt && opt.count || 251,\r\n                alignmentTimezone = opt && opt.alignmentTimezone\r\n                    || \"America/New_York\",\r\n                dailyAlignment = opt && opt.dailyAlignment || \"0\";\r\n\r\n            return this.$http.post(\"/api/candles\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                instrument,\r\n                granularity,\r\n                count,\r\n                alignmentTimezone,\r\n                dailyAlignment\r\n            }).then(candles => candles.data)\r\n            .catch(err => err.data);\r\n        });\r\n    }\r\n}\r\nChartsService.$inject = [\"$http\", \"SessionService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/charts/charts.service.js\n// module id = 32\n// module chunks = 0","export function dualColorDirective() {\r\n    const directive = {\r\n        restrict: \"A\",\r\n        link\r\n    };\r\n\r\n    return directive;\r\n\r\n    function link(scope, element, attrs) {\r\n        scope.$watch(attrs.dualColor, (newValue, oldValue) => {\r\n            if (newValue !== oldValue) {\r\n                if (newValue > 0) {\r\n                    element.removeClass(\"highlight-red\");\r\n                    element.addClass(\"highlight-green\");\r\n                }\r\n                if (newValue < 0) {\r\n                    element.removeClass(\"highlight-green\");\r\n                    element.addClass(\"highlight-red\");\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\ndualColorDirective.$inject = [];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/dual-color/dual-color.directive.js\n// module id = 33\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { dualColorDirective } from \"./dual-color.directive\";\r\n\r\nexport const dualColor = angular\r\n    .module(\"components.dual-color\", [])\r\n    .directive(\"dualColor\", dualColorDirective)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/dual-color/dual-color.module.js\n// module id = 34\n// module chunks = 0","import { ExposureController } from \"./exposure.controller\";\r\n\r\nexport const exposureComponent = {\r\n    templateUrl: \"app/components/exposure/exposure.html\",\r\n    controller: ExposureController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/exposure/exposure.component.js\n// module id = 35\n// module chunks = 0","export class ExposureController {\r\n    constructor(TradesService) {\r\n        this.TradesService = TradesService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.exposures = [];\r\n\r\n        const trades = this.TradesService.getTrades(),\r\n            exps = {};\r\n\r\n        trades.forEach(trade => {\r\n            const legs = trade.instrument.split(\"_\");\r\n\r\n            exps[legs[0]] = exps[legs[0]] || 0;\r\n            exps[legs[1]] = exps[legs[1]] || 0;\r\n\r\n            exps[legs[0]] += parseInt(trade.currentUnits, 10);\r\n            exps[legs[1]] -= trade.currentUnits * trade.price;\r\n        });\r\n\r\n        Object.keys(exps).forEach(exp => {\r\n            const type = exps[exp] > 0;\r\n\r\n            this.exposures.push({\r\n                type: type ? \"Long\" : \"Short\",\r\n                market: exp,\r\n                units: Math.abs(exps[exp])\r\n            });\r\n        });\r\n    }\r\n}\r\nExposureController.$inject = [\"TradesService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/exposure/exposure.controller.js\n// module id = 36\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { exposureComponent } from \"./exposure.component\";\r\n\r\nexport const exposure = angular\r\n    .module(\"components.exposure\", [])\r\n    .component(\"exposure\", exposureComponent)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/exposure/exposure.module.js\n// module id = 37\n// module chunks = 0","import { HeaderController } from \"./header.controller\";\r\n\r\nexport const headerComponent = {\r\n    templateUrl: \"app/components/header/header.html\",\r\n    controller: HeaderController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/header/header.component.js\n// module id = 38\n// module chunks = 0","import angular from \"angular\";\r\n\r\nexport class HeaderController {\r\n    constructor($window, $rootScope, $mdDialog, $mdBottomSheet,\r\n            ToastService, AccountsService, SessionService,\r\n            QuotesService, StreamingService) {\r\n        this.$window = $window;\r\n        this.$rootScope = $rootScope;\r\n        this.$mdDialog = $mdDialog;\r\n        this.$mdBottomSheet = $mdBottomSheet;\r\n        this.ToastService = ToastService;\r\n        this.AccountsService = AccountsService;\r\n        this.SessionService = SessionService;\r\n        this.QuotesService = QuotesService;\r\n        this.StreamingService = StreamingService;\r\n    }\r\n\r\n    $onInit() {\r\n        const instrsStorage = this.$window.localStorage.getItem(\"argo.instruments\");\r\n\r\n        this.instrs = angular.fromJson(instrsStorage) || {\r\n            EUR_USD: true,\r\n            USD_JPY: true,\r\n            GBP_USD: true,\r\n            EUR_GBP: true,\r\n            USD_CHF: true,\r\n            EUR_JPY: true,\r\n            EUR_CHF: true,\r\n            USD_CAD: true,\r\n            AUD_USD: true,\r\n            GBP_JPY: true\r\n        };\r\n\r\n        this.isLoadingViewWatcher = this.$rootScope.$watch(\"isLoadingView\", () => {\r\n            this.isLoadingView = this.$rootScope.isLoadingView;\r\n        });\r\n    }\r\n\r\n    openTokenDialog(event) {\r\n        this.$mdDialog.show({\r\n            template: \"<token-dialog aria-label='Token Dialog'></token-dialog>\",\r\n            targetEvent: event\r\n        }).then(tokenInfo => {\r\n            if (tokenInfo) {\r\n                this.environment = tokenInfo.environment;\r\n                this.token = tokenInfo.token;\r\n            } else {\r\n                this.environment = \"\";\r\n                this.token = \"\";\r\n                this.accountId = \"\";\r\n            }\r\n\r\n            this.AccountsService.getAccounts({\r\n                environment: this.environment,\r\n                token: this.token\r\n            }).then(accounts => {\r\n                const scope = angular.extend(this.$rootScope.$new(true), {\r\n                    accounts\r\n                });\r\n\r\n                this.$mdBottomSheet.show({\r\n                    template: \"<accounts-bottomsheet accounts='accounts'></accounts-bottomsheet>\",\r\n                    scope,\r\n                    preserveScope: true,\r\n                    targetEvent: event\r\n                }).then(accountSelected => {\r\n                    this.accountId = accountSelected.id;\r\n\r\n                    this.SessionService.setCredentials({\r\n                        environment: this.environment,\r\n                        token: this.token,\r\n                        accountId: this.accountId\r\n                    });\r\n\r\n                    this.AccountsService.getAccounts({\r\n                        environment: this.environment,\r\n                        token: this.token,\r\n                        accountId: this.accountId\r\n                    }).then(() => {\r\n                        const instruments = this.AccountsService\r\n                            .setStreamingInstruments(this.instrs);\r\n\r\n                        this.StreamingService.startStream({\r\n                            environment: this.environment,\r\n                            accessToken: this.token,\r\n                            accountId: this.accountId,\r\n                            instruments\r\n                        });\r\n                    });\r\n                });\r\n            }, err => {\r\n                this.ToastService.show(err);\r\n            });\r\n        })\r\n        .catch(err => {\r\n            if (err) {\r\n                this.ToastService.show(err);\r\n            }\r\n        });\r\n    }\r\n\r\n    openSettingsDialog(event) {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            const allInstrs = this.AccountsService.getAccount().instruments;\r\n\r\n            angular.forEach(allInstrs, instrument => {\r\n                if (!this.instrs.hasOwnProperty(instrument.name)) {\r\n                    this.instrs[instrument.name] = false;\r\n                }\r\n            });\r\n\r\n            const scope = angular.extend(this.$rootScope.$new(true), {\r\n                instruments: this.instrs\r\n            });\r\n\r\n            this.$mdDialog.show({\r\n                template: \"<settings-dialog aria-label='Settings Dialog' instruments='instruments'></settings-dialog>\",\r\n                scope,\r\n                preserveScope: true,\r\n                targetEvent: event\r\n            }).then(settingsInfo => {\r\n                let instruments;\r\n\r\n                if (settingsInfo) {\r\n                    this.$window.localStorage.setItem(\"argo.instruments\",\r\n                        angular.toJson(settingsInfo));\r\n                    instruments = this.AccountsService\r\n                        .setStreamingInstruments(settingsInfo);\r\n\r\n                    this.QuotesService.reset();\r\n\r\n                    this.StreamingService.startStream({\r\n                        environment: credentials.environment,\r\n                        accessToken: credentials.token,\r\n                        accountId: credentials.accountId,\r\n                        instruments\r\n                    });\r\n                }\r\n            })\r\n            .catch(err => {\r\n                if (err) {\r\n                    this.ToastService.show(err);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\nHeaderController.$inject = [\r\n    \"$window\", \"$rootScope\", \"$mdDialog\", \"$mdBottomSheet\",\r\n    \"ToastService\", \"AccountsService\", \"SessionService\",\r\n    \"QuotesService\", \"StreamingService\"\r\n];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/header/header.controller.js\n// module id = 39\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { headerComponent } from \"./header.component\";\r\n\r\nexport const header = angular\r\n    .module(\"components.header\", [])\r\n    .component(\"header\", headerComponent)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/header/header.module.js\n// module id = 40\n// module chunks = 0","export function highlighterDirective($timeout) {\r\n    const directive = {\r\n        restrict: \"A\",\r\n        link\r\n    };\r\n\r\n    return directive;\r\n\r\n    function link(scope, element, attrs) {\r\n        scope.$watch(attrs.highlighter, (newValue, oldValue) => {\r\n            let newclass;\r\n\r\n            if (newValue !== oldValue) {\r\n                newclass = newValue < oldValue ?\r\n                    \"highlight-red\" : \"highlight-green\";\r\n\r\n                element.addClass(newclass);\r\n\r\n                $timeout(() => {\r\n                    element.removeClass(newclass);\r\n                }, 500);\r\n            }\r\n        });\r\n    }\r\n}\r\nhighlighterDirective.$inject = [\"$timeout\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/highlighter/highlighter.directive.js\n// module id = 41\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { highlighterDirective } from \"./highlighter.directive\";\r\n\r\nexport const highlighter = angular\r\n    .module(\"components.highlighter\", [])\r\n    .directive(\"highlighter\", highlighterDirective)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/highlighter/highlighter.module.js\n// module id = 42\n// module chunks = 0","import { NewsController } from \"./news.controller\";\r\n\r\nexport const newsComponent = {\r\n    templateUrl: \"app/components/news/news.html\",\r\n    controller: NewsController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/news/news.component.js\n// module id = 43\n// module chunks = 0","export class NewsController {\r\n    constructor(NewsService) {\r\n        this.NewsService = NewsService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.NewsService.getNews().then(news => {\r\n            this.news = news;\r\n        });\r\n    }\r\n}\r\nNewsController.$inject = [\"NewsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/news/news.controller.js\n// module id = 44\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { newsComponent } from \"./news.component\";\r\nimport { NewsService } from \"./news.service\";\r\n\r\nexport const news = angular\r\n    .module(\"components.news\", [])\r\n    .component(\"news\", newsComponent)\r\n    .service(\"NewsService\", NewsService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/news/news.module.js\n// module id = 45\n// module chunks = 0","export class NewsService {\r\n    constructor($http, SessionService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n    }\r\n\r\n    getNews() {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/calendar\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token\r\n            }).then(news => news.data)\r\n            .catch(err => err.data)\r\n        );\r\n    }\r\n}\r\nNewsService.$inject = [\"$http\", \"SessionService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/news/news.service.js\n// module id = 46\n// module chunks = 0","// import * as d3 from \"d3\";\r\n// import techan from \"techan\";\r\n\r\nexport function ohlcChartDirective() {\r\n    const directive = {\r\n        restrict: \"E\",\r\n        scope: {\r\n            instrument: \"=\",\r\n            granularity: \"=\",\r\n            data: \"=\",\r\n            feed: \"=\",\r\n            trades: \"=\"\r\n        },\r\n        link\r\n    };\r\n\r\n    return directive;\r\n\r\n    function link(scope, element) {\r\n        let myInstrument,\r\n            myGranularity,\r\n            myTrades,\r\n            data,\r\n            refreshChart,\r\n            lastHistUpdate,\r\n            lastData,\r\n            lastClose,\r\n            feedVolume = 0;\r\n\r\n        scope.$watch(\"data\", csv => {\r\n            if (csv && csv.length > 0) {\r\n                myInstrument = scope.instrument;\r\n                myGranularity = scope.granularity;\r\n\r\n                refreshChart = drawChart(element[0], csv);\r\n\r\n                lastData = data && data[data.length - 1];\r\n                lastClose = lastData.close;\r\n                feedVolume = lastData.volume;\r\n                lastHistUpdate = getLastHistUpdate(myGranularity);\r\n            }\r\n        });\r\n\r\n        scope.$watch(\"feed\", feed => {\r\n            const tick = feed[myInstrument],\r\n                nextHistUpdate = getLastHistUpdate(myGranularity, tick);\r\n\r\n            let midPrice;\r\n\r\n            if (tick && data && lastHistUpdate !== nextHistUpdate) {\r\n                data.shift();\r\n                tick.bid = parseFloat(tick.bid);\r\n                tick.ask = parseFloat(tick.ask);\r\n                midPrice = (tick.bid + tick.ask) / 2;\r\n                feedVolume = 0;\r\n                data.push({\r\n                    open: midPrice,\r\n                    close: midPrice,\r\n                    high: midPrice,\r\n                    low: midPrice,\r\n                    date: new Date(nextHistUpdate),\r\n                    volume: feedVolume\r\n                });\r\n\r\n                lastHistUpdate = nextHistUpdate;\r\n            }\r\n\r\n            if (tick && data) {\r\n\r\n                if (lastData.close !== lastClose) {\r\n                    feedVolume += 1;\r\n                }\r\n\r\n                tick.bid = parseFloat(tick.bid);\r\n                tick.ask = parseFloat(tick.ask);\r\n                midPrice = (tick.bid + tick.ask) / 2;\r\n\r\n                lastData = data && data[data.length - 1];\r\n                lastClose = lastData.close;\r\n                lastData.close = midPrice;\r\n                lastData.volume = feedVolume;\r\n\r\n                if (lastData.close > lastData.high) {\r\n                    lastData.high = lastData.close;\r\n                }\r\n\r\n                if (lastData.close < lastData.low) {\r\n                    lastData.low = lastData.close;\r\n                }\r\n\r\n                refreshChart();\r\n            }\r\n\r\n        }, true);\r\n\r\n        function getLastHistUpdate(granularity, tick) {\r\n            const time = tick && tick.time,\r\n                now = time ? new Date(time) : new Date();\r\n\r\n            let coeff;\r\n\r\n            if (granularity === \"S5\") {\r\n                coeff = 1000 * 5;\r\n            } else if (granularity === \"S10\") {\r\n                coeff = 1000 * 10;\r\n            } else if (granularity === \"S15\") {\r\n                coeff = 1000 * 15;\r\n            } else if (granularity === \"S30\") {\r\n                coeff = 1000 * 30;\r\n            } else if (granularity === \"M1\") {\r\n                coeff = 1000 * 60;\r\n            } else if (granularity === \"M2\") {\r\n                coeff = 1000 * 60 * 2;\r\n            } else if (granularity === \"M3\") {\r\n                coeff = 1000 * 60 * 3;\r\n            } else if (granularity === \"M4\") {\r\n                coeff = 1000 * 60 * 4;\r\n            } else if (granularity === \"M5\") {\r\n                coeff = 1000 * 60 * 5;\r\n            } else if (granularity === \"M10\") {\r\n                coeff = 1000 * 60 * 10;\r\n            } else if (granularity === \"M15\") {\r\n                coeff = 1000 * 60 * 15;\r\n            } else if (granularity === \"M30\") {\r\n                coeff = 1000 * 60 * 30;\r\n            } else if (granularity === \"H1\") {\r\n                coeff = 1000 * 60 * 60;\r\n            } else if (granularity === \"H2\") {\r\n                coeff = 1000 * 60 * 60 * 2;\r\n            } else if (granularity === \"H3\") {\r\n                coeff = 1000 * 60 * 60 * 3;\r\n            } else if (granularity === \"H4\") {\r\n                coeff = 1000 * 60 * 60 * 4;\r\n            } else if (granularity === \"H6\") {\r\n                coeff = 1000 * 60 * 60 * 6;\r\n            } else if (granularity === \"H8\") {\r\n                coeff = 1000 * 60 * 60 * 8;\r\n            } else if (granularity === \"H12\") {\r\n                coeff = 1000 * 60 * 60 * 12;\r\n            } else {\r\n\r\n                // for D / W / M\r\n                coeff = 1000 * 60 * 60 * 12;\r\n            }\r\n\r\n            return Math.floor(now / (coeff)) * coeff;\r\n        }\r\n\r\n        function drawChart(el, csv) {\r\n            const margin = {\r\n                    top: 0,\r\n                    right: 20,\r\n                    bottom: 30,\r\n                    left: 75\r\n                },\r\n                width = 960 - margin.left - margin.right,\r\n                height = 400 - margin.top - margin.bottom;\r\n\r\n            const x = techan.scale.financetime()\r\n                .range([0, width]);\r\n\r\n            const y = d3.scaleLinear()\r\n                .range([height, 0]);\r\n\r\n            const yVolume = d3.scaleLinear()\r\n                .range([y(0), y(0.2)]);\r\n\r\n            const ohlc = techan.plot.ohlc()\r\n                .xScale(x)\r\n                .yScale(y);\r\n\r\n            const tradearrow = techan.plot.tradearrow()\r\n                .xScale(x)\r\n                .yScale(y)\r\n                .orient(d => {\r\n                    const side = d.type.startsWith(\"buy\") ? \"up\" : \"down\";\r\n\r\n                    return side;\r\n                });\r\n\r\n            const sma0 = techan.plot.sma()\r\n                .xScale(x)\r\n                .yScale(y);\r\n\r\n            const sma0Calculator = techan.indicator.sma()\r\n                .period(10);\r\n\r\n            const sma1 = techan.plot.sma()\r\n                .xScale(x)\r\n                .yScale(y);\r\n\r\n            const sma1Calculator = techan.indicator.sma()\r\n                .period(20);\r\n\r\n            const volume = techan.plot.volume()\r\n                .accessor(ohlc.accessor())\r\n                .xScale(x)\r\n                .yScale(yVolume);\r\n\r\n            const xAxis = d3.axisBottom(x);\r\n\r\n            const yAxis = d3.axisLeft(y);\r\n\r\n            const volumeAxis = d3.axisRight(yVolume)\r\n                .ticks(3)\r\n                .tickFormat(d3.format(\",.3s\"));\r\n\r\n            const timeAnnotation = techan.plot.axisannotation()\r\n                .axis(xAxis)\r\n                .orient(\"bottom\")\r\n                .format(d3.timeFormat(\"%Y-%m-%d %H:%M\"))\r\n                .width(80)\r\n                .translate([0, height]);\r\n\r\n            const ohlcAnnotation = techan.plot.axisannotation()\r\n                .axis(yAxis)\r\n                .orient(\"left\")\r\n                .format(d3.format(\",.4f\"));\r\n\r\n            const volumeAnnotation = techan.plot.axisannotation()\r\n                .axis(volumeAxis)\r\n                .orient(\"right\")\r\n                .width(35);\r\n\r\n            const crosshair = techan.plot.crosshair()\r\n                .xScale(x)\r\n                .yScale(y)\r\n                .xAnnotation(timeAnnotation)\r\n                .yAnnotation([ohlcAnnotation, volumeAnnotation]);\r\n\r\n            d3.select(el).select(\"svg\").remove();\r\n\r\n            const svg = d3.select(el).append(\"svg\")\r\n                .attr(\"width\", width + margin.left + margin.right)\r\n                .attr(\"height\", height + margin.top + margin.bottom)\r\n                .append(\"g\")\r\n                .attr(\"transform\",\r\n                    `translate(${margin.left}, ${margin.top})`);\r\n\r\n            const defs = svg.append(\"defs\")\r\n                .append(\"clipPath\")\r\n                    .attr(\"id\", \"ohlcClip\");\r\n\r\n            defs.append(\"rect\")\r\n                .attr(\"x\", 0)\r\n                .attr(\"y\", 0)\r\n                .attr(\"width\", width)\r\n                .attr(\"height\", height);\r\n\r\n            const ohlcSelection = svg.append(\"g\")\r\n                .attr(\"class\", \"ohlc\")\r\n                .attr(\"transform\", \"translate(0,0)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"volume\")\r\n                .attr(\"clip-path\", \"url(#ohlcClip)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"candlestick\")\r\n                .attr(\"clip-path\", \"url(#ohlcClip)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"indicator sma ma-0\")\r\n                .attr(\"clip-path\", \"url(#ohlcClip)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"indicator sma ma-1\")\r\n                .attr(\"clip-path\", \"url(#ohlcClip)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"tradearrow\");\r\n\r\n            svg.append(\"g\")\r\n                .attr(\"class\", \"x axis\")\r\n                .attr(\"transform\", `translate(0, ${height})`);\r\n\r\n            svg\r\n                .append(\"g\")\r\n                    .attr(\"class\", \"y axis\")\r\n                .append(\"text\")\r\n                    .attr(\"transform\", \"rotate(-90)\")\r\n                    .attr(\"y\", 6)\r\n                    .attr(\"dy\", \".71em\")\r\n                    .style(\"font-weight\", \"bold\")\r\n                    .style(\"text-anchor\", \"end\")\r\n                    .text(`Price (${myInstrument} / ${myGranularity})`);\r\n\r\n            svg.append(\"g\")\r\n                .attr(\"class\", \"volume axis\");\r\n\r\n            svg.append(\"g\")\r\n                .attr(\"class\", \"crosshair ohlc\");\r\n\r\n            data = d3.csvParse(csv).map(\r\n                d => ({\r\n                    date: new Date(d.Date),\r\n                    open: +d.Open,\r\n                    high: +d.High,\r\n                    low: +d.Low,\r\n                    close: +d.Close,\r\n                    volume: +d.Volume\r\n                })\r\n            );\r\n\r\n            svg.select(\"g.candlestick\").datum(data);\r\n            svg.select(\"g.sma.ma-0\").datum(sma0Calculator(data));\r\n            svg.select(\"g.sma.ma-1\").datum(sma1Calculator(data));\r\n            svg.select(\"g.volume\").datum(data);\r\n\r\n            redraw();\r\n\r\n            function redraw() {\r\n                const accessor = ohlc.accessor();\r\n\r\n                x.domain(data.map(accessor.d));\r\n                x.zoomable().domain([data.length - 130, data.length]);\r\n\r\n                y.domain(techan.scale.plot.ohlc(\r\n                    data.slice(data.length - 130, data.length)).domain());\r\n                yVolume.domain(techan.scale.plot.volume(\r\n                    data.slice(data.length - 130, data.length)).domain());\r\n\r\n                svg.select(\"g.x.axis\").call(xAxis);\r\n                svg.select(\"g.y.axis\").call(yAxis);\r\n                svg.select(\"g.volume.axis\").call(volumeAxis);\r\n\r\n                svg.select(\"g.candlestick\").datum(data).call(ohlc);\r\n                svg.select(\"g.tradearrow\").remove();\r\n                svg.append(\"g\").attr(\"class\", \"tradearrow\");\r\n                myTrades = scope.trades.filter(\r\n                    trade => trade.instrument === myInstrument)\r\n                    .map(\r\n                        trade => ({\r\n                            date: new Date(trade.openTime),\r\n                            type: trade.currentUnits > 0 ? \"buy\" : \"sell\",\r\n                            price: trade.price\r\n                        })\r\n                    );\r\n                svg.select(\"g.tradearrow\").datum(myTrades).call(tradearrow);\r\n\r\n                svg.select(\"g.sma.ma-0\")\r\n                    .datum(sma0Calculator(data)).call(sma0);\r\n                svg.select(\"g.sma.ma-1\")\r\n                    .datum(sma1Calculator(data)).call(sma1);\r\n\r\n                svg.select(\"g.volume\").datum(data).call(volume);\r\n\r\n                svg.select(\"g.crosshair.ohlc\").call(crosshair);\r\n            }\r\n\r\n            return redraw;\r\n        }\r\n\r\n    }\r\n}\r\nohlcChartDirective.$inject = [];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/ohlc-chart/ohlc-chart.directive.js\n// module id = 47\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { ohlcChartDirective } from \"./ohlc-chart.directive\";\r\n\r\nexport const ohlcChart = angular\r\n    .module(\"components.ohlc-chart\", [])\r\n    .directive(\"ohlcChart\", ohlcChartDirective)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/ohlc-chart/ohlc-chart.module.js\n// module id = 48\n// module chunks = 0","import { OrderDialogController } from \"./order-dialog.controller\";\r\n\r\nexport const orderDialogComponent = {\r\n    templateUrl: \"app/components/order-dialog/order-dialog.html\",\r\n    controller: OrderDialogController,\r\n    bindings: {\r\n        params: \"<\"\r\n    }\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/order-dialog/order-dialog.component.js\n// module id = 49\n// module chunks = 0","export class OrderDialogController {\r\n    constructor($mdDialog, ToastService,\r\n            QuotesService, OrdersService, AccountsService) {\r\n        this.$mdDialog = $mdDialog;\r\n        this.ToastService = ToastService;\r\n        this.QuotesService = QuotesService;\r\n        this.OrdersService = OrdersService;\r\n        this.AccountsService = AccountsService;\r\n    }\r\n\r\n    $onInit() {\r\n        const account = this.AccountsService.getAccount();\r\n\r\n        this.pips = account.pips;\r\n\r\n        this.type = \"MARKET\";\r\n        this.side = this.params.side;\r\n        this.instruments = this.params.instruments;\r\n        this.selectedInstrument = this.params.selectedInstrument;\r\n        this.changeMarket(this.selectedInstrument);\r\n        this.expires = [\r\n            { label: \"1 Hour\", value: 60 * 60 * 1000 },\r\n            { label: \"2 Hours\", value: 2 * 60 * 60 * 1000 },\r\n            { label: \"3 Hours\", value: 3 * 60 * 60 * 1000 },\r\n            { label: \"4 Hours\", value: 4 * 60 * 60 * 1000 },\r\n            { label: \"5 Hours\", value: 5 * 60 * 60 * 1000 },\r\n            { label: \"6 Hours\", value: 6 * 60 * 60 * 1000 },\r\n            { label: \"8 Hours\", value: 8 * 60 * 60 * 1000 },\r\n            { label: \"12 Hours\", value: 12 * 60 * 60 * 1000 },\r\n            { label: \"18 Hours\", value: 18 * 60 * 60 * 1000 },\r\n            { label: \"1 Day\", value: 60 * 60 * 24 * 1000 },\r\n            { label: \"2 Days\", value: 2 * 60 * 60 * 24 * 1000 },\r\n            { label: \"1 Week\", value: 7 * 60 * 60 * 24 * 1000 },\r\n            { label: \"1 Month\", value: 30 * 60 * 60 * 24 * 1000 },\r\n            { label: \"2 Months\", value: 60 * 60 * 60 * 24 * 1000 },\r\n            { label: \"3 Months\", value: 90 * 60 * 60 * 24 * 1000 }\r\n        ];\r\n        this.selectedExpire = 604800000; // 1 week\r\n        this.measure = \"price\";\r\n        this.isLowerBound = false;\r\n        this.isUpperBound = false;\r\n        this.isTakeProfit = false;\r\n        this.isStopLoss = false;\r\n        this.isTrailingStop = false;\r\n    }\r\n\r\n    changeMarket(instrument) {\r\n        if (!this.pips) {\r\n            return;\r\n        }\r\n\r\n        const price = this.QuotesService.getQuotes()[instrument],\r\n            fixed = ((this.pips[this.selectedInstrument].toString())\r\n                .match(/0/g) || []).length;\r\n\r\n        this.measure = \"price\";\r\n        this.step = parseFloat(this.pips[this.selectedInstrument]);\r\n        if (this.side === \"buy\") {\r\n            this.quote = parseFloat(price && price.ask);\r\n            this.takeProfit = parseFloat((this.quote + this.step * 10)\r\n                .toFixed(fixed));\r\n            this.stopLoss = parseFloat((this.quote - this.step * 10)\r\n                .toFixed(fixed));\r\n        } else {\r\n            this.quote = parseFloat(price && price.bid);\r\n            this.takeProfit = parseFloat((this.quote - this.step * 10)\r\n                .toFixed(fixed));\r\n            this.stopLoss = parseFloat((this.quote + this.step * 10)\r\n                .toFixed(fixed));\r\n        }\r\n        this.lowerBound = parseFloat((this.quote - this.step).toFixed(fixed));\r\n        this.upperBound = parseFloat((this.quote + this.step).toFixed(fixed));\r\n        this.trailingStop = 25;\r\n    }\r\n\r\n    changeMeasure(measure) {\r\n        if (measure === \"price\") {\r\n            this.changeMarket(this.selectedInstrument);\r\n        } else {\r\n            this.lowerBound = 1;\r\n            this.upperBound = 1;\r\n            this.takeProfit = 10;\r\n            this.stopLoss = 10;\r\n            this.trailingStop = 25;\r\n            this.step = 1;\r\n        }\r\n    }\r\n\r\n    hide() {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    cancel() {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n    answer(action) {\r\n        const order = {},\r\n            isBuy = this.side === \"buy\",\r\n            isMeasurePips = this.measure === \"pips\";\r\n\r\n        this.$mdDialog.hide(action);\r\n\r\n        this.step = parseFloat(this.pips[this.selectedInstrument]);\r\n\r\n        order.instrument = this.selectedInstrument;\r\n        order.units = this.units;\r\n        if (this.units && !isBuy) {\r\n            order.units = `-${order.units}`;\r\n        }\r\n\r\n        order.side = this.side;\r\n        order.type = this.type;\r\n\r\n        if (order.type === \"LIMIT\") {\r\n            order.price = this.quote && this.quote.toString();\r\n            order.gtdTime = new Date(Date.now() + this.selectedExpire);\r\n        }\r\n\r\n        if (isMeasurePips) {\r\n            if (this.isLowerBound) {\r\n                order.priceBound =\r\n                    parseFloat(this.quote - this.step * this.lowerBound)\r\n                        .toString();\r\n            }\r\n            if (this.isUpperBound) {\r\n                order.priceBound =\r\n                    parseFloat(this.quote + this.step * this.upperBound)\r\n                        .toString();\r\n            }\r\n            if (isBuy) {\r\n                if (this.isTakeProfit) {\r\n                    order.takeProfitOnFill = {};\r\n                    order.takeProfitOnFill.price =\r\n                        parseFloat(this.quote + this.step * this.takeProfit)\r\n                            .toString();\r\n                }\r\n                if (this.isStopLoss) {\r\n                    order.stopLossOnFill = {};\r\n                    order.order.takeProfitOnFill.price =\r\n                        parseFloat(this.quote - this.step * this.stopLoss)\r\n                            .toString();\r\n                }\r\n            } else {\r\n                if (this.isTakeProfit) {\r\n                    order.takeProfitOnFill = {};\r\n                    order.takeProfitOnFill.price =\r\n                        parseFloat(this.quote - this.step * this.takeProfit)\r\n                            .toString();\r\n                }\r\n                if (this.isStopLoss) {\r\n                    order.stopLossOnFill = {};\r\n                    order.order.takeProfitOnFill.price =\r\n                        parseFloat(this.quote + this.step * this.stopLoss)\r\n                            .toString();\r\n                }\r\n            }\r\n        } else {\r\n            if (this.isLowerBound) {\r\n                order.priceBound = this.lowerBound.toString();\r\n            }\r\n            if (this.isUpperBound) {\r\n                order.priceBound = this.upperBound.toString();\r\n            }\r\n            if (this.isTakeProfit) {\r\n                order.takeProfitOnFill = {};\r\n                order.takeProfitOnFill.price = this.takeProfit.toString();\r\n            }\r\n            if (this.isStopLoss) {\r\n                order.stopLossOnFill = {};\r\n                order.stopLossOnFill.price = this.stopLoss.toString();\r\n            }\r\n        }\r\n        if (this.isTrailingStop) {\r\n            order.trailingStopLossOnFill = {};\r\n            order.trailingStopLossOnFill.distance =\r\n                (this.step * this.trailingStop).toString();\r\n        }\r\n\r\n        if (action === \"submit\") {\r\n            this.OrdersService.putOrder(order).then(transaction => {\r\n                let opened,\r\n                    canceled,\r\n                    side,\r\n                    message;\r\n\r\n                if (transaction.code && transaction.message) {\r\n                    message = \"ERROR \" +\r\n                        `${transaction.code} ${transaction.message}`;\r\n\r\n                    this.ToastService.show(message);\r\n                } else if (transaction.errorMessage) {\r\n                    message = `ERROR ${transaction.errorMessage}`;\r\n\r\n                    this.ToastService.show(message);\r\n                } else if (transaction.orderCancelTransaction) {\r\n                    canceled = transaction.orderCancelTransaction;\r\n\r\n                    message = `ERROR ${canceled.reason}`;\r\n\r\n                    this.ToastService.show(message);\r\n                } else {\r\n                    opened = transaction.orderFillTransaction ||\r\n                        transaction.orderFillTransaction ||\r\n                        transaction.orderCreateTransaction;\r\n\r\n                    side = opened.units > 0 ? \"buy\" : \"sell\";\r\n                    message = `${side} ` +\r\n                        `${opened.instrument} ` +\r\n                        `#${opened.id} ` +\r\n                        `@${opened.price} ` +\r\n                        `for ${opened.units}`;\r\n\r\n                    this.ToastService.show(message);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\nOrderDialogController.$inject = [\r\n    \"$mdDialog\", \"ToastService\",\r\n    \"QuotesService\", \"OrdersService\", \"AccountsService\"\r\n];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/order-dialog/order-dialog.controller.js\n// module id = 50\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { orderDialogComponent } from \"./order-dialog.component\";\r\n\r\nexport const orderDialog = angular\r\n    .module(\"components.order-dialog\", [])\r\n    .component(\"orderDialog\", orderDialogComponent)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/order-dialog/order-dialog.module.js\n// module id = 51\n// module chunks = 0","import { OrdersController } from \"./orders.controller\";\r\n\r\nexport const ordersComponent = {\r\n    templateUrl: \"app/components/orders/orders.html\",\r\n    controller: OrdersController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/orders/orders.component.js\n// module id = 52\n// module chunks = 0","export class OrdersController {\r\n    constructor($mdDialog, ToastService, OrdersService) {\r\n        this.$mdDialog = $mdDialog;\r\n        this.ToastService = ToastService;\r\n        this.OrdersService = OrdersService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.orders = this.OrdersService.getOrders();\r\n\r\n        this.OrdersService.refresh();\r\n    }\r\n\r\n    closeOrder(event, id) {\r\n        const confirm = this.$mdDialog.confirm()\r\n            .textContent(\"Are you sure to close the order?\")\r\n            .ariaLabel(\"Order closing confirmation\")\r\n            .ok(\"Ok\")\r\n            .cancel(\"Cancel\")\r\n            .targetEvent(event);\r\n\r\n        this.$mdDialog.show(confirm).then(() => {\r\n            this.OrdersService.closeOrder(id).then(order => {\r\n                const message = \"Closed \" +\r\n                    `#${order.orderCancelTransaction.orderID}`;\r\n\r\n                this.ToastService.show(message);\r\n            });\r\n        });\r\n    }\r\n}\r\nOrdersController.$inject = [\"$mdDialog\", \"ToastService\", \"OrdersService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/orders/orders.controller.js\n// module id = 53\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { ordersComponent } from \"./orders.component\";\r\nimport { OrdersService } from \"./orders.service\";\r\n\r\nexport const orders = angular\r\n    .module(\"components.orders\", [])\r\n    .component(\"orders\", ordersComponent)\r\n    .service(\"OrdersService\", OrdersService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/orders/orders.module.js\n// module id = 54\n// module chunks = 0","import angular from \"angular\";\r\n\r\nexport class OrdersService {\r\n    constructor($http, SessionService, AccountsService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.orders = [];\r\n    }\r\n\r\n    getOrders() {\r\n        return this.orders;\r\n    }\r\n\r\n    refresh() {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            this.$http.post(\"/api/orders\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            }).then(res => {\r\n                this.orders.length = 0;\r\n                angular.extend(this.orders, res.data);\r\n            });\r\n        });\r\n    }\r\n\r\n    putOrder(order) {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/order\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                instrument: order.instrument,\r\n                units: order.units,\r\n                side: order.side,\r\n                type: order.type,\r\n                expiry: order.expiry,\r\n                price: order.price,\r\n                priceBound: order.lowerBound || order.upperBound,\r\n                stopLossOnFill: order.stopLossOnFill,\r\n                takeProfitOnFill: order.takeProfitOnFill,\r\n                trailingStopLossOnFill: order.trailingStopLossOnFill\r\n            }).then(trade => trade.data)\r\n            .catch(err => err.data)\r\n        );\r\n    }\r\n\r\n    closeOrder(id) {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/closeorder\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                id\r\n            }).then(order => order.data)\r\n            .catch(err => err.data)\r\n        );\r\n    }\r\n\r\n    updateOrders(tick) {\r\n        const account = this.AccountsService.getAccount(),\r\n            pips = account.pips;\r\n\r\n        this.orders.forEach((order, index) => {\r\n            let current;\r\n\r\n            if (order.instrument === tick.instrument) {\r\n\r\n                if (order.units > 0) {\r\n                    current = tick.ask;\r\n                }\r\n                if (order.units < 0) {\r\n                    current = tick.bid;\r\n                }\r\n\r\n                this.orders[index].current = current;\r\n                this.orders[index].distance = (Math.abs(current - order.price) /\r\n                    pips[order.instrument]);\r\n            }\r\n        });\r\n    }\r\n}\r\nOrdersService.$inject = [\"$http\", \"SessionService\", \"AccountsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/orders/orders.service.js\n// module id = 55\n// module chunks = 0","import { PluginsController } from \"./plugins.controller\";\r\n\r\nexport const pluginsComponent = {\r\n    templateUrl: \"app/components/plugins/plugins.html\",\r\n    controller: PluginsController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/plugins/plugins.component.js\n// module id = 56\n// module chunks = 0","export class PluginsController {\r\n    constructor(PluginsService) {\r\n        this.PluginsService = PluginsService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.plugins = this.PluginsService.getPlugins();\r\n        this.pluginsInfo = this.PluginsService.getPluginsInfo();\r\n\r\n        this.PluginsService.refresh();\r\n    }\r\n\r\n    engage() {\r\n        this.PluginsService.engagePlugins(this.plugins);\r\n    }\r\n}\r\nPluginsController.$inject = [\"PluginsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/plugins/plugins.controller.js\n// module id = 57\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { pluginsComponent } from \"./plugins.component\";\r\nimport { PluginsService } from \"./plugins.service\";\r\n\r\nexport const plugins = angular\r\n    .module(\"components.plugins\", [])\r\n    .component(\"plugins\", pluginsComponent)\r\n    .service(\"PluginsService\", PluginsService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/plugins/plugins.module.js\n// module id = 58\n// module chunks = 0","import angular from \"angular\";\r\n\r\nexport class PluginsService {\r\n    constructor($http, SessionService, AccountsService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.plugins = {};\r\n        this.pluginsInfo = {\r\n            count: 0\r\n        };\r\n    }\r\n\r\n    getPlugins() {\r\n        return this.plugins;\r\n    }\r\n\r\n    getPluginsInfo() {\r\n        return this.pluginsInfo;\r\n    }\r\n\r\n    refresh() {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            this.$http.post(\"/api/plugins\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            }).then(res => {\r\n                let name;\r\n\r\n                for (name in this.plugins) {\r\n                    if (this.plugins.hasOwnProperty(name)) {\r\n                        delete this.plugins[name];\r\n                    }\r\n                }\r\n                angular.extend(this.plugins, res.data);\r\n                this.pluginsInfo.count = Object.keys(this.plugins).length;\r\n\r\n                Object.keys(this.plugins).forEach(key => {\r\n                    if (this.plugins[key] === \"enabled\") {\r\n                        this.plugins[key] = true;\r\n                    } else {\r\n                        this.plugins[key] = false;\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    engagePlugins(plugs) {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            const account = this.AccountsService.getAccount();\r\n\r\n            this.$http.post(\"/api/engageplugins\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                plugins: plugs,\r\n                config: {\r\n                    pips: account.pips\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\nPluginsService.$inject = [\"$http\", \"SessionService\", \"AccountsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/plugins/plugins.service.js\n// module id = 59\n// module chunks = 0","import { PositionsController } from \"./positions.controller\";\r\n\r\nexport const positionsComponent = {\r\n    templateUrl: \"app/components/positions/positions.html\",\r\n    controller: PositionsController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/positions/positions.component.js\n// module id = 60\n// module chunks = 0","export class PositionsController {\r\n    constructor(PositionsService) {\r\n        this.PositionsService = PositionsService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.PositionsService.getPositions().then(positions => {\r\n            this.positions = positions;\r\n        });\r\n    }\r\n}\r\nPositionsController.$inject = [\"PositionsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/positions/positions.controller.js\n// module id = 61\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { positionsComponent } from \"./positions.component\";\r\nimport { PositionsService } from \"./positions.service\";\r\n\r\nexport const positions = angular\r\n    .module(\"components.positions\", [])\r\n    .component(\"positions\", positionsComponent)\r\n    .service(\"PositionsService\", PositionsService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/positions/positions.module.js\n// module id = 62\n// module chunks = 0","export class PositionsService {\r\n    constructor($http, SessionService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n    }\r\n\r\n    getPositions() {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/positions\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            }).then(positions => {\r\n                const data = [];\r\n\r\n                positions.data.forEach(position => {\r\n                    const longUnits = position.long &&\r\n                        parseInt(position.long.units, 10);\r\n                    const shortUnits = position.short &&\r\n                        parseInt(position.short.units, 10);\r\n                    const units = longUnits || shortUnits;\r\n                    const side = units > 0 ? \"buy\" : \"sell\";\r\n                    const avgPrice = (longUnits && position.long.averagePrice)\r\n                         || (shortUnits && position.short.averagePrice);\r\n\r\n                    data.push({\r\n                        side,\r\n                        instrument: position.instrument,\r\n                        units,\r\n                        avgPrice\r\n                    });\r\n                });\r\n\r\n                return data;\r\n            }).catch(err => err.data)\r\n        );\r\n    }\r\n}\r\nPositionsService.$inject = [\"$http\", \"SessionService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/positions/positions.service.js\n// module id = 63\n// module chunks = 0","import { QuotesController } from \"./quotes.controller\";\r\n\r\nexport const quotesComponent = {\r\n    templateUrl: \"app/components/quotes/quotes.html\",\r\n    controller: QuotesController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/quotes/quotes.component.js\n// module id = 64\n// module chunks = 0","export class QuotesController {\r\n    constructor(QuotesService) {\r\n        this.QuotesService = QuotesService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.quotes = this.QuotesService.getQuotes();\r\n    }\r\n}\r\nQuotesController.$inject = [\"QuotesService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/quotes/quotes.controller.js\n// module id = 65\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { quotesComponent } from \"./quotes.component\";\r\nimport { QuotesService } from \"./quotes.service\";\r\n\r\nexport const quotes = angular\r\n    .module(\"components.quotes\", [])\r\n    .component(\"quotes\", quotesComponent)\r\n    .service(\"QuotesService\", QuotesService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/quotes/quotes.module.js\n// module id = 66\n// module chunks = 0","import angular from \"angular\";\r\n\r\nexport class QuotesService {\r\n    constructor(AccountsService) {\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.quotes = {};\r\n    }\r\n\r\n    getQuotes() {\r\n        return this.quotes;\r\n    }\r\n\r\n    updateTick(tick) {\r\n        const account = this.AccountsService.getAccount(),\r\n            streamingInstruments = account.streamingInstruments,\r\n            pips = account.pips,\r\n            instrument = tick.instrument;\r\n\r\n        this.quotes[instrument] = {\r\n            time: tick.time,\r\n            ask: tick.ask,\r\n            bid: tick.bid,\r\n            spread: ((tick.ask - tick.bid) / pips[instrument]).toFixed(1)\r\n        };\r\n\r\n\r\n        if (!angular.equals(streamingInstruments, Object.keys(this.quotes))) {\r\n            streamingInstruments.forEach(instr => {\r\n                let temp;\r\n\r\n                if (this.quotes.hasOwnProperty(instr)) {\r\n                    temp = this.quotes[instr];\r\n                    delete this.quotes[instr];\r\n                    this.quotes[instr] = temp;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        let key;\r\n\r\n        for (key in this.quotes) {\r\n            if (this.quotes.hasOwnProperty(key)) {\r\n                delete this.quotes[key];\r\n            }\r\n        }\r\n    }\r\n}\r\nQuotesService.$inject = [\"AccountsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/quotes/quotes.service.js\n// module id = 67\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { SessionService } from \"./session.service\";\r\n\r\nexport const session = angular\r\n    .module(\"components.session\", [])\r\n    .service(\"SessionService\", SessionService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/session/session.module.js\n// module id = 68\n// module chunks = 0","export class SessionService {\r\n    constructor($q) {\r\n        this.deferred = $q.defer();\r\n        this.credentials = {\r\n            environment: null,\r\n            token: null,\r\n            accountId: null\r\n        };\r\n    }\r\n\r\n    setCredentials(session) {\r\n        this.credentials.environment = session.environment;\r\n        this.credentials.token = session.token;\r\n        this.credentials.accountId = session.accountId;\r\n\r\n        this.deferred.resolve(this.credentials);\r\n    }\r\n\r\n    isLogged() {\r\n        return this.deferred.promise;\r\n    }\r\n}\r\nSessionService.$inject = [\"$q\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/session/session.service.js\n// module id = 69\n// module chunks = 0","import { SettingsDialogController } from \"./settings-dialog.controller\";\r\n\r\nexport const settingsDialogComponent = {\r\n    templateUrl: \"app/components/settings-dialog/settings-dialog.html\",\r\n    controller: SettingsDialogController,\r\n    bindings: {\r\n        instruments: \"<\"\r\n    }\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/settings-dialog/settings-dialog.component.js\n// module id = 70\n// module chunks = 0","export class SettingsDialogController {\r\n    constructor($mdDialog) {\r\n        this.$mdDialog = $mdDialog;\r\n    }\r\n\r\n    hide() {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    cancel() {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n    answer(settings) {\r\n        this.$mdDialog.hide(settings);\r\n    }\r\n}\r\nSettingsDialogController.$inject = [\"$mdDialog\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/settings-dialog/settings-dialog.controller.js\n// module id = 71\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { settingsDialogComponent } from \"./settings-dialog.component\";\r\n\r\nexport const settingsDialog = angular\r\n    .module(\"components.settings-dialog\", [])\r\n    .component(\"settingsDialog\", settingsDialogComponent)\r\n    .name;\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/settings-dialog/settings-dialog.module.js\n// module id = 72\n// module chunks = 0","// import * as d3 from \"d3\";\r\n\r\n// Inspired by http://bl.ocks.org/vicapow/9904319\r\nexport function slChartDirective() {\r\n    const data = {},\r\n        directive = {\r\n            restrict: \"E\",\r\n            link,\r\n            scope: {\r\n                instrument: \"=\",\r\n                data: \"=\",\r\n                length: \"=\"\r\n            },\r\n            replace: true,\r\n            template: \"<svg class='sl'></svg>\",\r\n            transclude: true\r\n        };\r\n\r\n    return directive;\r\n\r\n    function link(scope, element) {\r\n\r\n        scope.$watch(\"data\", quote => {\r\n            redraw(quote);\r\n        });\r\n\r\n        function redraw(quote) {\r\n            const svg = d3.select(element[0]),\r\n                node = svg.node(),\r\n                instrument = scope.instrument,\r\n                w = node.clientWidth,\r\n                h = getComputedStyle(node)[\"font-size\"].replace(\"px\", \"\");\r\n\r\n            svg.selectAll(\"*\").remove();\r\n\r\n            if (!data[instrument]) {\r\n                data[instrument] = [];\r\n            }\r\n\r\n            data[instrument].push(\r\n                (parseFloat(quote.bid) +\r\n                    parseFloat(quote.ask)) / 2);\r\n\r\n            data[instrument] = data[instrument].slice(-scope.length);\r\n\r\n            if (data[instrument][0] > data[instrument].slice(-1)) {\r\n                node.style.stroke = \"red\";\r\n            } else {\r\n                node.style.stroke = \"green\";\r\n            }\r\n            node.style.height = `${h}px`;\r\n\r\n            const min = d3.min(data[instrument]);\r\n            const max = d3.max(data[instrument]);\r\n\r\n            const x = d3.scaleLinear()\r\n                .domain([0, data[instrument].length - 1]).range([0, w]);\r\n            const y = d3.scaleLinear()\r\n                .domain([min, max]).range([h, 0]);\r\n\r\n            const paths = data[instrument]\r\n                .map((d, i) => [x(i), y(d)])\r\n                .join(\"L\");\r\n\r\n            svg.append(\"path\").attr(\"d\", `M${paths}`);\r\n        }\r\n    }\r\n}\r\nslChartDirective.$inject = [];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/sl-chart/sl-chart.directive.js\n// module id = 73\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { slChartDirective } from \"./sl-chart.directive\";\r\n\r\nexport const slChart = angular\r\n    .module(\"components.sl-chart\", [])\r\n    .directive(\"slChart\", slChartDirective)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/sl-chart/sl-chart.module.js\n// module id = 74\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { StreamingService } from \"./streaming.service\";\r\n\r\nexport const streaming = angular\r\n    .module(\"components.streaming\", [])\r\n    .service(\"StreamingService\", StreamingService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/streaming/streaming.module.js\n// module id = 75\n// module chunks = 0","import angular from \"angular\";\r\n\r\nexport class StreamingService {\r\n    constructor($timeout, $http, ToastService,\r\n            QuotesService, ActivityService, TradesService,\r\n            OrdersService, AccountsService, PluginsService) {\r\n        this.$timeout = $timeout;\r\n        this.$http = $http;\r\n        this.ToastService = ToastService;\r\n        this.QuotesService = QuotesService;\r\n        this.ActivityService = ActivityService;\r\n        this.TradesService = TradesService;\r\n        this.OrdersService = OrdersService;\r\n        this.AccountsService = AccountsService;\r\n        this.PluginsService = PluginsService;\r\n    }\r\n\r\n    startStream(data) {\r\n        this.$http.post(\"/api/startstream\", {\r\n            environment: data.environment,\r\n            accessToken: data.accessToken,\r\n            accountId: data.accountId,\r\n            instruments: data.instruments\r\n        }).then(() => {\r\n            this.getStream();\r\n        }).catch(err => {\r\n            this.ToastService.show(err);\r\n        });\r\n    }\r\n\r\n    getStream() {\r\n        const ws = new WebSocket(\"ws://localhost:8000/stream\");\r\n\r\n        ws.onmessage = event => {\r\n            let data,\r\n                isTick,\r\n                tick,\r\n                isTransaction,\r\n                transaction,\r\n                refreshPlugins;\r\n\r\n            this.$timeout(() => {\r\n                try {\r\n                    data = angular.fromJson(event.data);\r\n\r\n                    isTick = data.closeoutAsk && data.closeoutBid;\r\n                    isTransaction = data.accountID;\r\n                    refreshPlugins = data.refreshPlugins;\r\n\r\n                    if (isTick) {\r\n                        tick = {\r\n                            time: data.time,\r\n                            instrument: data.instrument,\r\n                            ask: data.closeoutAsk,\r\n                            bid: data.closeoutBid\r\n                        };\r\n\r\n                        this.QuotesService.updateTick(tick);\r\n                        this.TradesService.updateTrades(tick);\r\n                        this.OrdersService.updateOrders(tick);\r\n                    }\r\n\r\n                    if (isTransaction) {\r\n                        transaction = data;\r\n                        this.ActivityService.addActivity(transaction);\r\n\r\n                        this.TradesService.refresh();\r\n                        this.OrdersService.refresh();\r\n                        this.AccountsService.refresh();\r\n                    }\r\n\r\n                    if (refreshPlugins) {\r\n                        this.PluginsService.refresh();\r\n                    }\r\n                } catch (e) {\r\n\r\n                    // Discard \"incomplete\" json\r\n                    // console.log(e.name + \": \" + e.message);\r\n                }\r\n            });\r\n        };\r\n    }\r\n}\r\nStreamingService.$inject = [\r\n    \"$timeout\", \"$http\", \"ToastService\",\r\n    \"QuotesService\", \"ActivityService\", \"TradesService\",\r\n    \"OrdersService\", \"AccountsService\", \"PluginsService\"\r\n];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/streaming/streaming.service.js\n// module id = 76\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { ToastService } from \"./toast.service\";\r\n\r\nexport const toast = angular\r\n    .module(\"components.toast\", [])\r\n    .service(\"ToastService\", ToastService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/toast/toast.module.js\n// module id = 77\n// module chunks = 0","export class ToastService {\r\n    constructor($mdToast) {\r\n        this.$mdToast = $mdToast;\r\n    }\r\n\r\n    show(message) {\r\n        this.$mdToast.show(\r\n            this.$mdToast.simple()\r\n                .textContent(message)\r\n                .action(\"CLOSE\")\r\n                .position(\"right bottom\")\r\n                .hideDelay(10000)\r\n        );\r\n    }\r\n}\r\nToastService.$inject = [\"$mdToast\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/toast/toast.service.js\n// module id = 78\n// module chunks = 0","import { TokenDialogController } from \"./token-dialog.controller\";\r\n\r\nexport const tokenDialogComponent = {\r\n    templateUrl: \"app/components/token-dialog/token-dialog.html\",\r\n    controller: TokenDialogController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/token-dialog/token-dialog.component.js\n// module id = 79\n// module chunks = 0","export class TokenDialogController {\r\n    constructor($mdDialog) {\r\n        this.$mdDialog = $mdDialog;\r\n    }\r\n\r\n    $onInit() {\r\n        this.environment = \"practice\";\r\n    }\r\n\r\n    hide() {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    cancel() {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n    answer(token) {\r\n        this.$mdDialog.hide(token);\r\n    }\r\n}\r\nTokenDialogController.$inject = [\"$mdDialog\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/token-dialog/token-dialog.controller.js\n// module id = 80\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { tokenDialogComponent } from \"./token-dialog.component\";\r\n\r\nexport const tokenDialog = angular\r\n    .module(\"components.token-dialog\", [])\r\n    .component(\"tokenDialog\", tokenDialogComponent)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/token-dialog/token-dialog.module.js\n// module id = 81\n// module chunks = 0","import { TradesController } from \"./trades.controller\";\r\n\r\nexport const tradesComponent = {\r\n    templateUrl: \"app/components/trades/trades.html\",\r\n    controller: TradesController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/trades/trades.component.js\n// module id = 82\n// module chunks = 0","export class TradesController {\r\n    constructor($mdDialog, ToastService, TradesService) {\r\n        this.$mdDialog = $mdDialog;\r\n        this.ToastService = ToastService;\r\n        this.TradesService = TradesService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.trades = this.TradesService.getTrades();\r\n\r\n        this.TradesService.refresh();\r\n    }\r\n\r\n    closeTrade(event, id) {\r\n        const confirm = this.$mdDialog.confirm()\r\n            .textContent(\"Are you sure to close the trade?\")\r\n            .ariaLabel(\"Trade closing confirmation\")\r\n            .ok(\"Ok\")\r\n            .cancel(\"Cancel\")\r\n            .targetEvent(event);\r\n\r\n        this.$mdDialog.show(confirm).then(() => {\r\n            this.TradesService.closeTrade(id).then(trade => {\r\n                const message = \"Closed \" +\r\n                    `${(trade.units > 0 ? \"sell\" : \"buy\")} ` +\r\n                    `${trade.instrument} ` +\r\n                    `#${trade.id} ` +\r\n                    `@${trade.price} ` +\r\n                    `P&L ${trade.pl}`;\r\n\r\n                this.ToastService.show(message);\r\n            }).catch(err => {\r\n                const message = `ERROR ${err.code} ${err.message}`;\r\n\r\n                this.ToastService.show(message);\r\n            });\r\n\r\n        });\r\n    }\r\n}\r\nTradesController.$inject = [\"$mdDialog\", \"ToastService\", \"TradesService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/trades/trades.controller.js\n// module id = 83\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { tradesComponent } from \"./trades.component\";\r\nimport { TradesService } from \"./trades.service\";\r\n\r\nexport const trades = angular\r\n    .module(\"components.trades\", [])\r\n    .component(\"trades\", tradesComponent)\r\n    .service(\"TradesService\", TradesService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/trades/trades.module.js\n// module id = 84\n// module chunks = 0","import angular from \"angular\";\r\n\r\nexport class TradesService {\r\n    constructor($http, SessionService, AccountsService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.trades = [];\r\n    }\r\n\r\n    getTrades() {\r\n        return this.trades;\r\n    }\r\n\r\n    refresh() {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            this.$http.post(\"/api/trades\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            }).then(res => {\r\n                this.trades.length = 0;\r\n                angular.extend(this.trades, res.data);\r\n                this.trades.forEach(trade => {\r\n                    trade.side = trade.currentUnits > 0 ? \"buy\" : \"sell\";\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    closeTrade(id) {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/closetrade\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                id\r\n            }).then(order => order.data)\r\n            .catch(err => err.data)\r\n        );\r\n    }\r\n\r\n    updateTrades(tick) {\r\n        const account = this.AccountsService.getAccount(),\r\n            pips = account.pips;\r\n\r\n        this.trades.forEach((trade, index) => {\r\n            let current,\r\n                side;\r\n\r\n            if (trade.instrument === tick.instrument) {\r\n                side = trade.currentUnits > 0 ? \"buy\" : \"sell\";\r\n\r\n                if (side === \"buy\") {\r\n                    current = tick.bid;\r\n                    this.trades[index].profitPips =\r\n                        ((current - trade.price) / pips[trade.instrument]);\r\n                }\r\n                if (side === \"sell\") {\r\n                    current = tick.ask;\r\n                    this.trades[index].profitPips =\r\n                        ((trade.price - current) / pips[trade.instrument]);\r\n                }\r\n\r\n                this.trades[index].current = current;\r\n            }\r\n        });\r\n    }\r\n}\r\nTradesService.$inject = [\"$http\", \"SessionService\", \"AccountsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/trades/trades.service.js\n// module id = 85\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { rootComponent } from \"./root.component\";\r\nimport { common } from \"./common/common.module\";\r\nimport { components } from \"./components/components.module\";\r\n\r\nexport const root = angular\r\n    .module(\"root\", [\r\n        common,\r\n        components\r\n    ])\r\n    .component(\"root\", rootComponent)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/root.module.js\n// module id = 86\n// module chunks = 0"],"sourceRoot":""}