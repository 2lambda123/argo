{"version":3,"sources":["webpack:///app.bundle.js","webpack:///./src/client/app/common/common.module.js","webpack:///./src/client/app/components/components.module.js","webpack:///./src/client/app/root.component.js","webpack:///./src/client/app/common/app.component.js","webpack:///./src/client/app/common/app.config.js","webpack:///./src/client/app/common/app.controller.js","webpack:///./src/client/app/common/app.module.js","webpack:///./src/client/app/components/account/account.component.js","webpack:///./src/client/app/components/account/account.controller.js","webpack:///./src/client/app/components/account/account.module.js","webpack:///./src/client/app/components/account/accounts.service.js","webpack:///./src/client/app/components/accounts-bottomsheet/accounts-bottomsheet.component.js","webpack:///./src/client/app/components/accounts-bottomsheet/accounts-bottomsheet.controller.js","webpack:///./src/client/app/components/accounts-bottomsheet/accounts-bottomsheet.module.js","webpack:///./src/client/app/components/activity/activity.component.js","webpack:///./src/client/app/components/activity/activity.controller.js","webpack:///./src/client/app/components/activity/activity.module.js","webpack:///./src/client/app/components/activity/activity.service.js","webpack:///./src/client/app/components/charts/charts.component.js","webpack:///./src/client/app/components/charts/charts.controller.js","webpack:///./src/client/app/components/charts/charts.module.js","webpack:///./src/client/app/components/charts/charts.service.js","webpack:///./src/client/app/components/dual-color/dual-color.directive.js","webpack:///./src/client/app/components/dual-color/dual-color.module.js","webpack:///./src/client/app/components/exposure/exposure.component.js","webpack:///./src/client/app/components/exposure/exposure.controller.js","webpack:///./src/client/app/components/exposure/exposure.module.js","webpack:///./src/client/app/components/header/header.component.js","webpack:///./src/client/app/components/header/header.controller.js","webpack:///./src/client/app/components/header/header.module.js","webpack:///./src/client/app/components/highlighter/highlighter.directive.js","webpack:///./src/client/app/components/highlighter/highlighter.module.js","webpack:///./src/client/app/components/news/news.component.js","webpack:///./src/client/app/components/news/news.controller.js","webpack:///./src/client/app/components/news/news.module.js","webpack:///./src/client/app/components/news/news.service.js","webpack:///./src/client/app/components/ohlc-chart/ohlc-chart.directive.js","webpack:///./src/client/app/components/ohlc-chart/ohlc-chart.module.js","webpack:///./src/client/app/components/order-dialog/order-dialog.component.js","webpack:///./src/client/app/components/order-dialog/order-dialog.controller.js","webpack:///./src/client/app/components/order-dialog/order-dialog.module.js","webpack:///./src/client/app/components/orders/orders.component.js","webpack:///./src/client/app/components/orders/orders.controller.js","webpack:///./src/client/app/components/orders/orders.module.js","webpack:///./src/client/app/components/orders/orders.service.js","webpack:///./src/client/app/components/plugins/plugins.component.js","webpack:///./src/client/app/components/plugins/plugins.controller.js","webpack:///./src/client/app/components/plugins/plugins.module.js","webpack:///./src/client/app/components/plugins/plugins.service.js","webpack:///./src/client/app/components/positions/positions.component.js","webpack:///./src/client/app/components/positions/positions.controller.js","webpack:///./src/client/app/components/positions/positions.module.js","webpack:///./src/client/app/components/positions/positions.service.js","webpack:///./src/client/app/components/quotes/quotes.component.js","webpack:///./src/client/app/components/quotes/quotes.controller.js","webpack:///./src/client/app/components/quotes/quotes.module.js","webpack:///./src/client/app/components/quotes/quotes.service.js","webpack:///./src/client/app/components/session/session.module.js","webpack:///./src/client/app/components/session/session.service.js","webpack:///./src/client/app/components/settings-dialog/settings-dialog.component.js","webpack:///./src/client/app/components/settings-dialog/settings-dialog.controller.js","webpack:///./src/client/app/components/settings-dialog/settings-dialog.module.js","webpack:///./src/client/app/components/sl-chart/sl-chart.directive.js","webpack:///./src/client/app/components/sl-chart/sl-chart.module.js","webpack:///./src/client/app/components/streaming/streaming.module.js","webpack:///./src/client/app/components/streaming/streaming.service.js","webpack:///./src/client/app/components/toast/toast.module.js","webpack:///./src/client/app/components/toast/toast.service.js","webpack:///./src/client/app/components/token-dialog/token-dialog.component.js","webpack:///./src/client/app/components/token-dialog/token-dialog.controller.js","webpack:///./src/client/app/components/token-dialog/token-dialog.module.js","webpack:///./src/client/app/components/trades/trades.component.js","webpack:///./src/client/app/components/trades/trades.controller.js","webpack:///./src/client/app/components/trades/trades.module.js","webpack:///./src/client/app/components/trades/trades.service.js","webpack:///./src/client/app/root.module.js"],"names":["webpackJsonp","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_angular__","__WEBPACK_IMPORTED_MODULE_0_angular___default","n","__WEBPACK_IMPORTED_MODULE_1__app_module__","common","a","name","__WEBPACK_IMPORTED_MODULE_1__account_account_module__","__WEBPACK_IMPORTED_MODULE_2__accounts_bottomsheet_accounts_bottomsheet_module__","__WEBPACK_IMPORTED_MODULE_3__activity_activity_module__","__WEBPACK_IMPORTED_MODULE_4__charts_charts_module__","__WEBPACK_IMPORTED_MODULE_5__dual_color_dual_color_module__","__WEBPACK_IMPORTED_MODULE_6__exposure_exposure_module__","__WEBPACK_IMPORTED_MODULE_7__header_header_module__","__WEBPACK_IMPORTED_MODULE_8__highlighter_highlighter_module__","__WEBPACK_IMPORTED_MODULE_9__news_news_module__","__WEBPACK_IMPORTED_MODULE_10__ohlc_chart_ohlc_chart_module__","__WEBPACK_IMPORTED_MODULE_11__order_dialog_order_dialog_module__","__WEBPACK_IMPORTED_MODULE_12__orders_orders_module__","__WEBPACK_IMPORTED_MODULE_13__plugins_plugins_module__","__WEBPACK_IMPORTED_MODULE_14__positions_positions_module__","__WEBPACK_IMPORTED_MODULE_15__quotes_quotes_module__","__WEBPACK_IMPORTED_MODULE_16__session_session_module__","__WEBPACK_IMPORTED_MODULE_17__settings_dialog_settings_dialog_module__","__WEBPACK_IMPORTED_MODULE_18__sl_chart_sl_chart_module__","__WEBPACK_IMPORTED_MODULE_19__streaming_streaming_module__","__WEBPACK_IMPORTED_MODULE_20__toast_toast_module__","__WEBPACK_IMPORTED_MODULE_21__token_dialog_token_dialog_module__","__WEBPACK_IMPORTED_MODULE_22__trades_trades_module__","components","rootComponent","templateUrl","exports","__WEBPACK_IMPORTED_MODULE_0__app_controller__","appComponent","controller","appConfig","$httpProvider","$locationProvider","interceptors","push","$q","$rootScope","nLoadings","[object Object]","request","isLoadingView","response","reject","html5Mode","$inject","AppController","this","tabSelectedIndex","Math","min","max","__WEBPACK_IMPORTED_MODULE_0__app_css__","__WEBPACK_IMPORTED_MODULE_0__app_css___default","__WEBPACK_IMPORTED_MODULE_1_angular__","__WEBPACK_IMPORTED_MODULE_1_angular___default","__WEBPACK_IMPORTED_MODULE_2_angular_material__","__WEBPACK_IMPORTED_MODULE_2_angular_material___default","__WEBPACK_IMPORTED_MODULE_3__app_component__","__WEBPACK_IMPORTED_MODULE_4__app_config__","app","component","config","__WEBPACK_IMPORTED_MODULE_0__account_controller__","accountComponent","AccountController","AccountService","account","getAccount","__WEBPACK_IMPORTED_MODULE_1__account_component__","__WEBPACK_IMPORTED_MODULE_2__accounts_service__","service","AccountsService","$http","SessionService","isLogged","then","credentials","getAccounts","environment","token","accountId","data","api","post","accounts","message","length","merge","timestamp","Date","unrealizedPLPercent","unrealizedPL","balance","instruments","pips","forEach","i","pow","pipLocation","settings","streamingInstruments","Object","keys","filter","el","__WEBPACK_IMPORTED_MODULE_0__accounts_bottomsheet_controller__","accountsBottomsheetComponent","bindings","AccountsBottomsheetController","$mdBottomSheet","$index","hide","__WEBPACK_IMPORTED_MODULE_1__accounts_bottomsheet_component__","accountsBottomsheet","__WEBPACK_IMPORTED_MODULE_0__activity_controller__","activityComponent","ActivityController","ActivityService","getActivities","activities","__WEBPACK_IMPORTED_MODULE_1__activity_component__","__WEBPACK_IMPORTED_MODULE_2__activity_service__","activity","lastTransactionID","transactions","reverse","catch","err","splice","id","type","instrument","units","price","pl","accountBalance","time","__WEBPACK_IMPORTED_MODULE_0__charts_controller__","chartsComponent","ChartsController","$mdDialog","ChartsService","QuotesService","TradesService","selectedInstrument","granularities","selectedGranularity","feed","getQuotes","trades","getTrades","changeChart","granularity","getHistQuotes","candles","event","side","scope","extend","$new","params","show","template","preserveScope","targetEvent","__WEBPACK_IMPORTED_MODULE_0__charts_css__","__WEBPACK_IMPORTED_MODULE_0__charts_css___default","__WEBPACK_IMPORTED_MODULE_2__charts_component__","__WEBPACK_IMPORTED_MODULE_3__charts_service__","charts","opt","count","alignmentTimezone","dailyAlignment","dualColorDirective","directive","restrict","link","element","attrs","$watch","dualColor","newValue","oldValue","removeClass","addClass","__WEBPACK_IMPORTED_MODULE_1__dual_color_directive__","__WEBPACK_IMPORTED_MODULE_0__exposure_controller__","exposureComponent","ExposureController","exposures","exps","trade","legs","split","parseInt","currentUnits","exp","market","abs","__WEBPACK_IMPORTED_MODULE_1__exposure_component__","exposure","__WEBPACK_IMPORTED_MODULE_0__header_controller__","headerComponent","HeaderController","$window","ToastService","StreamingService","instrsStorage","localStorage","getItem","instrs","fromJson","EUR_USD","USD_JPY","GBP_USD","EUR_GBP","USD_CHF","EUR_JPY","EUR_CHF","USD_CAD","AUD_USD","GBP_JPY","isLoadingViewWatcher","tokenInfo","accountSelected","setCredentials","setStreamingInstruments","startStream","accessToken","allInstrs","hasOwnProperty","settingsInfo","setItem","toJson","reset","__WEBPACK_IMPORTED_MODULE_1__header_component__","header","highlighterDirective","$timeout","highlighter","newclass","__WEBPACK_IMPORTED_MODULE_1__highlighter_directive__","__WEBPACK_IMPORTED_MODULE_0__news_controller__","newsComponent","NewsController","NewsService","getNews","news","__WEBPACK_IMPORTED_MODULE_1__news_component__","__WEBPACK_IMPORTED_MODULE_2__news_service__","__WEBPACK_IMPORTED_MODULE_0_d3__","__WEBPACK_IMPORTED_MODULE_0_d3___default","__WEBPACK_IMPORTED_MODULE_1_techan__","__WEBPACK_IMPORTED_MODULE_1_techan___default","ohlcChartDirective","myInstrument","myGranularity","myTrades","refreshChart","lastHistUpdate","lastData","lastClose","feedVolume","csv","drawChart","close","volume","getLastHistUpdate","tick","nextHistUpdate","midPrice","shift","bid","parseFloat","ask","open","high","low","date","now","coeff","floor","margin","top","right","bottom","left","width","height","x","scale","financetime","range","y","yVolume","ohlc","plot","xScale","yScale","tradearrow","orient","d","startsWith","sma0","sma","sma0Calculator","indicator","period","sma1","sma1Calculator","accessor","xAxis","yAxis","volumeAxis","ticks","tickFormat","select","remove","svg","append","attr","defs","ohlcSelection","style","text","map","Open","High","Low","Close","Volume","datum","redraw","domain","zoomable","slice","call","openTime","__WEBPACK_IMPORTED_MODULE_1__ohlc_chart_directive__","ohlcChart","__WEBPACK_IMPORTED_MODULE_0__order_dialog_controller__","orderDialogComponent","OrderDialogController","OrdersService","changeMarket","expires","label","value","selectedExpire","measure","isLowerBound","isUpperBound","isTakeProfit","isStopLoss","isTrailingStop","fixed","toString","match","step","quote","takeProfit","toFixed","stopLoss","lowerBound","upperBound","trailingStop","cancel","action","order","isBuy","isMeasurePips","gtdTime","priceBound","takeProfitOnFill","stopLossOnFill","trailingStopLossOnFill","distance","putOrder","transaction","opened","canceled","code","errorMessage","orderCancelTransaction","reason","orderFillTransaction","orderCreateTransaction","__WEBPACK_IMPORTED_MODULE_1__order_dialog_component__","orderDialog","__WEBPACK_IMPORTED_MODULE_0__orders_controller__","ordersComponent","OrdersController","orders","getOrders","refresh","confirm","textContent","ariaLabel","ok","closeOrder","orderID","__WEBPACK_IMPORTED_MODULE_1__orders_component__","__WEBPACK_IMPORTED_MODULE_2__orders_service__","res","angular","expiry","index","current","__WEBPACK_IMPORTED_MODULE_0__plugins_controller__","pluginsComponent","PluginsController","PluginsService","plugins","getPlugins","pluginsInfo","getPluginsInfo","engagePlugins","__WEBPACK_IMPORTED_MODULE_1__plugins_component__","__WEBPACK_IMPORTED_MODULE_2__plugins_service__","key","plugs","__WEBPACK_IMPORTED_MODULE_0__positions_controller__","positionsComponent","PositionsController","PositionsService","getPositions","positions","__WEBPACK_IMPORTED_MODULE_1__positions_component__","__WEBPACK_IMPORTED_MODULE_2__positions_service__","position","longUnits","long","shortUnits","short","avgPrice","averagePrice","__WEBPACK_IMPORTED_MODULE_0__quotes_controller__","quotesComponent","QuotesController","quotes","__WEBPACK_IMPORTED_MODULE_1__quotes_component__","__WEBPACK_IMPORTED_MODULE_2__quotes_service__","spread","equals","instr","temp","__WEBPACK_IMPORTED_MODULE_1__session_service__","session","deferred","defer","resolve","promise","__WEBPACK_IMPORTED_MODULE_0__settings_dialog_controller__","settingsDialogComponent","SettingsDialogController","__WEBPACK_IMPORTED_MODULE_1__settings_dialog_component__","settingsDialog","slChartDirective","replace","transclude","node","w","clientWidth","h","getComputedStyle","selectAll","stroke","paths","join","__WEBPACK_IMPORTED_MODULE_1__sl_chart_directive__","slChart","__WEBPACK_IMPORTED_MODULE_1__streaming_service__","streaming","getStream","ws","WebSocket","onmessage","isTick","isTransaction","refreshPlugins","closeoutAsk","closeoutBid","accountID","updateTick","updateTrades","updateOrders","addActivity","e","__WEBPACK_IMPORTED_MODULE_1__toast_service__","toast","$mdToast","simple","hideDelay","__WEBPACK_IMPORTED_MODULE_0__token_dialog_controller__","tokenDialogComponent","TokenDialogController","__WEBPACK_IMPORTED_MODULE_1__token_dialog_component__","tokenDialog","__WEBPACK_IMPORTED_MODULE_0__trades_controller__","tradesComponent","TradesController","closeTrade","__WEBPACK_IMPORTED_MODULE_1__trades_component__","__WEBPACK_IMPORTED_MODULE_2__trades_service__","profitPips","defineProperty","__WEBPACK_IMPORTED_MODULE_1__root_component__","__WEBPACK_IMPORTED_MODULE_2__common_common_module__","__WEBPACK_IMPORTED_MODULE_3__components_components_module__","root"],"mappings":"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","file":"app.bundle.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */,\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__app_module__ = __webpack_require__(20);\n\r\n\r\n\r\n\r\nconst common = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"common\", [\r\n        __WEBPACK_IMPORTED_MODULE_1__app_module__[\"a\" /* app */]\r\n    ])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = common;\n\r\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__account_account_module__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__accounts_bottomsheet_accounts_bottomsheet_module__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__activity_activity_module__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__charts_charts_module__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__dual_color_dual_color_module__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__exposure_exposure_module__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__header_header_module__ = __webpack_require__(43);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__highlighter_highlighter_module__ = __webpack_require__(45);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__news_news_module__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ohlc_chart_ohlc_chart_module__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__order_dialog_order_dialog_module__ = __webpack_require__(54);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__orders_orders_module__ = __webpack_require__(57);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__plugins_plugins_module__ = __webpack_require__(61);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__positions_positions_module__ = __webpack_require__(65);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__quotes_quotes_module__ = __webpack_require__(69);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__session_session_module__ = __webpack_require__(71);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__settings_dialog_settings_dialog_module__ = __webpack_require__(75);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__sl_chart_sl_chart_module__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__streaming_streaming_module__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__toast_toast_module__ = __webpack_require__(80);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__token_dialog_token_dialog_module__ = __webpack_require__(84);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__trades_trades_module__ = __webpack_require__(87);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst components = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components\", [\r\n        __WEBPACK_IMPORTED_MODULE_1__account_account_module__[\"a\" /* account */],\r\n        __WEBPACK_IMPORTED_MODULE_2__accounts_bottomsheet_accounts_bottomsheet_module__[\"a\" /* accountsBottomsheet */],\r\n        __WEBPACK_IMPORTED_MODULE_3__activity_activity_module__[\"a\" /* activity */],\r\n        __WEBPACK_IMPORTED_MODULE_4__charts_charts_module__[\"a\" /* charts */],\r\n        __WEBPACK_IMPORTED_MODULE_5__dual_color_dual_color_module__[\"a\" /* dualColor */],\r\n        __WEBPACK_IMPORTED_MODULE_6__exposure_exposure_module__[\"a\" /* exposure */],\r\n        __WEBPACK_IMPORTED_MODULE_7__header_header_module__[\"a\" /* header */],\r\n        __WEBPACK_IMPORTED_MODULE_8__highlighter_highlighter_module__[\"a\" /* highlighter */],\r\n        __WEBPACK_IMPORTED_MODULE_9__news_news_module__[\"a\" /* news */],\r\n        __WEBPACK_IMPORTED_MODULE_10__ohlc_chart_ohlc_chart_module__[\"a\" /* ohlcChart */],\r\n        __WEBPACK_IMPORTED_MODULE_11__order_dialog_order_dialog_module__[\"a\" /* orderDialog */],\r\n        __WEBPACK_IMPORTED_MODULE_12__orders_orders_module__[\"a\" /* orders */],\r\n        __WEBPACK_IMPORTED_MODULE_13__plugins_plugins_module__[\"a\" /* plugins */],\r\n        __WEBPACK_IMPORTED_MODULE_14__positions_positions_module__[\"a\" /* positions */],\r\n        __WEBPACK_IMPORTED_MODULE_15__quotes_quotes_module__[\"a\" /* quotes */],\r\n        __WEBPACK_IMPORTED_MODULE_16__session_session_module__[\"a\" /* session */],\r\n        __WEBPACK_IMPORTED_MODULE_17__settings_dialog_settings_dialog_module__[\"a\" /* settingsDialog */],\r\n        __WEBPACK_IMPORTED_MODULE_18__sl_chart_sl_chart_module__[\"a\" /* slChart */],\r\n        __WEBPACK_IMPORTED_MODULE_19__streaming_streaming_module__[\"a\" /* streaming */],\r\n        __WEBPACK_IMPORTED_MODULE_20__toast_toast_module__[\"a\" /* toast */],\r\n        __WEBPACK_IMPORTED_MODULE_21__token_dialog_token_dialog_module__[\"a\" /* tokenDialog */],\r\n        __WEBPACK_IMPORTED_MODULE_22__trades_trades_module__[\"a\" /* trades */]\r\n    ])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = components;\n\r\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nconst rootComponent = {\r\n    templateUrl: \"app/root.html\"\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = rootComponent;\n\r\n\n\n/***/ }),\n/* 10 */,\n/* 11 */,\n/* 12 */,\n/* 13 */,\n/* 14 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 16 */,\n/* 17 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__app_controller__ = __webpack_require__(19);\n\r\n\r\nconst appComponent = {\r\n    templateUrl: \"app/common/app.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__app_controller__[\"a\" /* AppController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = appComponent;\n\r\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = appConfig;\nfunction appConfig($httpProvider, $locationProvider) {\r\n    const interceptors = $httpProvider.interceptors;\r\n\r\n    interceptors.push([\"$q\", \"$rootScope\", ($q, $rootScope) => {\r\n        let nLoadings = 0;\r\n\r\n        return {\r\n            request(request) {\r\n                nLoadings += 1;\r\n\r\n                $rootScope.isLoadingView = true;\r\n\r\n                return request;\r\n            },\r\n\r\n            response(response) {\r\n                nLoadings -= 1;\r\n                if (nLoadings === 0) {\r\n                    $rootScope.isLoadingView = false;\r\n                }\r\n\r\n                return response;\r\n            },\r\n\r\n            responseError(response) {\r\n                nLoadings -= 1;\r\n                if (!nLoadings) {\r\n                    $rootScope.isLoadingView = false;\r\n                }\r\n\r\n                return $q.reject(response);\r\n            }\r\n        };\r\n    }]);\r\n\r\n    $locationProvider.html5Mode(true);\r\n}\r\nappConfig.$inject = [\"$httpProvider\", \"$locationProvider\"];\r\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass AppController {\r\n    $onInit() {\r\n        this.tabSelectedIndex = 0;\r\n    }\r\n\r\n    next() {\r\n        this.tabSelectedIndex = Math.min(this.tabSelectedIndex + 1, 6);\r\n    }\r\n\r\n    previous() {\r\n        this.tabSelectedIndex = Math.max(this.tabSelectedIndex - 1, 0);\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = AppController;\n\r\nAppController.$inject = [];\r\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__app_css__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__app_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__app_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_angular_material__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_angular_material___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_angular_material__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__app_component__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__app_config__ = __webpack_require__(18);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst app = __WEBPACK_IMPORTED_MODULE_1_angular___default.a\r\n    .module(\"common.app\", [\r\n        __WEBPACK_IMPORTED_MODULE_2_angular_material___default.a\r\n    ])\r\n    .component(\"app\", __WEBPACK_IMPORTED_MODULE_3__app_component__[\"a\" /* appComponent */])\r\n    .config(__WEBPACK_IMPORTED_MODULE_4__app_config__[\"a\" /* appConfig */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = app;\n\r\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__account_controller__ = __webpack_require__(22);\n\r\n\r\nconst accountComponent = {\r\n    templateUrl: \"app/components/account/account.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__account_controller__[\"a\" /* AccountController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = accountComponent;\n\r\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass AccountController {\r\n    constructor(AccountService) {\r\n        this.AccountService = AccountService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.account = this.AccountService.getAccount();\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = AccountController;\n\r\nAccountController.$inject = [\"AccountsService\"];\r\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__account_component__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__accounts_service__ = __webpack_require__(24);\n\r\n\r\n\r\n\r\n\r\nconst account = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.account\", [])\r\n    .component(\"account\", __WEBPACK_IMPORTED_MODULE_1__account_component__[\"a\" /* accountComponent */])\r\n    .service(\"AccountsService\", __WEBPACK_IMPORTED_MODULE_2__accounts_service__[\"a\" /* AccountsService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = account;\n\r\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n\r\n\r\nclass AccountsService {\r\n    constructor($http, SessionService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n\r\n        this.account = {};\r\n    }\r\n\r\n    getAccount() {\r\n        return this.account;\r\n    }\r\n\r\n    refresh() {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            this.getAccounts({\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            });\r\n        });\r\n    }\r\n\r\n    getAccounts(data) {\r\n        const environment = data.environment || \"practice\",\r\n            token = data.token,\r\n            accountId = data.accountId,\r\n            api = accountId ? \"/api/account\" : \"/api/accounts\";\r\n\r\n        return this.$http.post(api, {\r\n            environment,\r\n            token,\r\n            accountId\r\n        }).then(response => {\r\n            const accounts = response.data.accounts || response.data;\r\n\r\n            if (response.data.message) {\r\n                throw response.data.message;\r\n            }\r\n\r\n            if (!accounts.length) {\r\n                __WEBPACK_IMPORTED_MODULE_0_angular___default.a.merge(this.account, response.data.account);\r\n\r\n                this.account.timestamp = new Date();\r\n\r\n                this.account.unrealizedPLPercent =\r\n                    this.account.unrealizedPL / this.account.balance * 100;\r\n\r\n                if (!this.account.instruments) {\r\n                    this.$http.post(\"/api/instruments\", {\r\n                        environment,\r\n                        token,\r\n                        accountId\r\n                    }).then(instruments => {\r\n                        this.account.instruments = instruments.data;\r\n                        this.account.pips = {};\r\n                        __WEBPACK_IMPORTED_MODULE_0_angular___default.a.forEach(this.account.instruments, i => {\r\n                            this.account.pips[i.name] =\r\n                                Math.pow(10, i.pipLocation);\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n\r\n            return accounts;\r\n        });\r\n    }\r\n\r\n    setStreamingInstruments(settings) {\r\n        this.account.streamingInstruments = Object.keys(settings)\r\n            .filter(el => !!settings[el]);\r\n\r\n        return this.account.streamingInstruments;\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = AccountsService;\n\r\nAccountsService.$inject = [\"$http\", \"SessionService\"];\r\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__accounts_bottomsheet_controller__ = __webpack_require__(26);\n\r\n\r\nconst accountsBottomsheetComponent = {\r\n    templateUrl: \"app/components/accounts-bottomsheet/accounts-bottomsheet.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__accounts_bottomsheet_controller__[\"a\" /* AccountsBottomsheetController */],\r\n    bindings: {\r\n        accounts: \"<\"\r\n    }\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = accountsBottomsheetComponent;\n\r\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass AccountsBottomsheetController {\r\n    constructor($mdBottomSheet) {\r\n        this.$mdBottomSheet = $mdBottomSheet;\r\n    }\r\n\r\n    onAccountClick($index) {\r\n        const account = this.accounts[$index];\r\n\r\n        this.$mdBottomSheet.hide(account);\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = AccountsBottomsheetController;\n\r\nAccountsBottomsheetController.$inject = [\"$mdBottomSheet\"];\r\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__accounts_bottomsheet_component__ = __webpack_require__(25);\n\r\n\r\n\r\n\r\nconst accountsBottomsheet = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.accounts-bottomsheet\", [])\r\n    .component(\"accountsBottomsheet\", __WEBPACK_IMPORTED_MODULE_1__accounts_bottomsheet_component__[\"a\" /* accountsBottomsheetComponent */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = accountsBottomsheet;\n\r\n\r\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__activity_controller__ = __webpack_require__(29);\n\r\n\r\nconst activityComponent = {\r\n    templateUrl: \"app/components/activity/activity.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__activity_controller__[\"a\" /* ActivityController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = activityComponent;\n\r\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass ActivityController {\r\n    constructor(ActivityService) {\r\n        this.ActivityService = ActivityService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.ActivityService.getActivities().then(activities => {\r\n            this.activities = activities;\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ActivityController;\n\r\nActivityController.$inject = [\"ActivityService\"];\r\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__activity_component__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__activity_service__ = __webpack_require__(31);\n\r\n\r\n\r\n\r\n\r\nconst activity = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.activity\", [])\r\n    .component(\"activity\", __WEBPACK_IMPORTED_MODULE_1__activity_component__[\"a\" /* activityComponent */])\r\n    .service(\"ActivityService\", __WEBPACK_IMPORTED_MODULE_2__activity_service__[\"a\" /* ActivityService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = activity;\n\r\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass ActivityService {\r\n    constructor($http, SessionService, AccountsService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n        this.AccountsService = AccountsService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.activities = [];\r\n    }\r\n\r\n    getActivities() {\r\n        const account = this.AccountsService.getAccount(),\r\n            lastTransactionID = account.lastTransactionID;\r\n\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/transactions\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                lastTransactionID\r\n            }).then(transactions => {\r\n                this.activities = transactions.data.reverse();\r\n\r\n                return this.activities;\r\n            }).catch(err => err.data)\r\n        );\r\n    }\r\n\r\n    addActivity(activity) {\r\n        this.activities.splice(0, 0, {\r\n            id: activity.id,\r\n            type: activity.type,\r\n            instrument: activity.instrument,\r\n            units: activity.units,\r\n            price: activity.price,\r\n            pl: activity.pl,\r\n            accountBalance: activity.accountBalance,\r\n            time: activity.time\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ActivityService;\n\r\nActivityService.$inject = [\"$http\", \"SessionService\", \"AccountsService\"];\r\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__charts_controller__ = __webpack_require__(33);\n\r\n\r\nconst chartsComponent = {\r\n    templateUrl: \"app/components/charts/charts.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__charts_controller__[\"a\" /* ChartsController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = chartsComponent;\n\r\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n\r\n\r\nclass ChartsController {\r\n    constructor($rootScope, $mdDialog, AccountsService,\r\n            ChartsService, QuotesService, TradesService) {\r\n        this.$rootScope = $rootScope;\r\n        this.$mdDialog = $mdDialog;\r\n        this.AccountsService = AccountsService;\r\n        this.ChartsService = ChartsService;\r\n        this.QuotesService = QuotesService;\r\n        this.TradesService = TradesService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.account = this.AccountsService.getAccount();\r\n\r\n        this.selectedInstrument = \"EUR_USD\";\r\n\r\n        this.granularities = [\r\n            \"S5\",\r\n            \"S10\",\r\n            \"S15\",\r\n            \"S30\",\r\n            \"M1\",\r\n            \"M2\",\r\n            \"M3\",\r\n            \"M4\",\r\n            \"M5\",\r\n            \"M10\",\r\n            \"M15\",\r\n            \"M30\",\r\n            \"H1\",\r\n            \"H2\",\r\n            \"H3\",\r\n            \"H4\",\r\n            \"H6\",\r\n            \"H8\",\r\n            \"H12\",\r\n            \"D\",\r\n            \"W\",\r\n            \"M\"\r\n        ];\r\n        this.selectedGranularity = \"M5\";\r\n\r\n        this.feed = this.QuotesService.getQuotes();\r\n\r\n        this.trades = this.TradesService.getTrades();\r\n\r\n        this.changeChart(this.selectedInstrument, this.selectedGranularity);\r\n    }\r\n\r\n    changeChart(instrument, granularity) {\r\n        this.ChartsService.getHistQuotes({\r\n            instrument,\r\n            granularity\r\n        }).then(candles => {\r\n            this.data = candles;\r\n        });\r\n    }\r\n\r\n\r\n    openOrderDialog(event, side) {\r\n        const scope = __WEBPACK_IMPORTED_MODULE_0_angular___default.a.extend(this.$rootScope.$new(true), {\r\n            params: {\r\n                side,\r\n                selectedInstrument: this.selectedInstrument,\r\n                instruments: this.account.streamingInstruments\r\n            }\r\n        });\r\n\r\n        this.$mdDialog.show({\r\n            template: \"<order-dialog aria-label='Order Dialog' params='params'></order-dialog>\",\r\n            scope,\r\n            preserveScope: true,\r\n            targetEvent: event\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ChartsController;\n\r\nChartsController.$inject = [\"$rootScope\", \"$mdDialog\", \"AccountsService\",\r\n    \"ChartsService\", \"QuotesService\", \"TradesService\"];\r\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__charts_css__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__charts_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__charts_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__charts_component__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__charts_service__ = __webpack_require__(35);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst charts = __WEBPACK_IMPORTED_MODULE_1_angular___default.a\r\n    .module(\"components.charts\", [])\r\n    .component(\"charts\", __WEBPACK_IMPORTED_MODULE_2__charts_component__[\"a\" /* chartsComponent */])\r\n    .service(\"ChartsService\", __WEBPACK_IMPORTED_MODULE_3__charts_service__[\"a\" /* ChartsService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = charts;\n\r\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass ChartsService {\r\n    constructor($http, SessionService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n    }\r\n\r\n    getHistQuotes(opt) {\r\n        return this.SessionService.isLogged().then(credentials => {\r\n            const instrument = opt && opt.instrument || \"EUR_USD\",\r\n                granularity = opt && opt.granularity || \"M5\",\r\n                count = opt && opt.count || 251,\r\n                alignmentTimezone = opt && opt.alignmentTimezone\r\n                    || \"America/New_York\",\r\n                dailyAlignment = opt && opt.dailyAlignment || \"0\";\r\n\r\n            return this.$http.post(\"/api/candles\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                instrument,\r\n                granularity,\r\n                count,\r\n                alignmentTimezone,\r\n                dailyAlignment\r\n            }).then(candles => candles.data)\r\n            .catch(err => err.data);\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ChartsService;\n\r\nChartsService.$inject = [\"$http\", \"SessionService\"];\r\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = dualColorDirective;\nfunction dualColorDirective() {\r\n    const directive = {\r\n        restrict: \"A\",\r\n        link\r\n    };\r\n\r\n    return directive;\r\n\r\n    function link(scope, element, attrs) {\r\n        scope.$watch(attrs.dualColor, (newValue, oldValue) => {\r\n            if (newValue !== oldValue) {\r\n                if (newValue > 0) {\r\n                    element.removeClass(\"highlight-red\");\r\n                    element.addClass(\"highlight-green\");\r\n                }\r\n                if (newValue < 0) {\r\n                    element.removeClass(\"highlight-green\");\r\n                    element.addClass(\"highlight-red\");\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\ndualColorDirective.$inject = [];\r\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__dual_color_directive__ = __webpack_require__(36);\n\r\n\r\n\r\n\r\nconst dualColor = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.dual-color\", [])\r\n    .directive(\"dualColor\", __WEBPACK_IMPORTED_MODULE_1__dual_color_directive__[\"a\" /* dualColorDirective */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = dualColor;\n\r\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__exposure_controller__ = __webpack_require__(39);\n\r\n\r\nconst exposureComponent = {\r\n    templateUrl: \"app/components/exposure/exposure.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__exposure_controller__[\"a\" /* ExposureController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = exposureComponent;\n\r\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass ExposureController {\r\n    constructor(TradesService) {\r\n        this.TradesService = TradesService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.exposures = [];\r\n\r\n        const trades = this.TradesService.getTrades(),\r\n            exps = {};\r\n\r\n        trades.forEach(trade => {\r\n            const legs = trade.instrument.split(\"_\");\r\n\r\n            exps[legs[0]] = exps[legs[0]] || 0;\r\n            exps[legs[1]] = exps[legs[1]] || 0;\r\n\r\n            exps[legs[0]] += parseInt(trade.currentUnits, 10);\r\n            exps[legs[1]] -= trade.currentUnits * trade.price;\r\n        });\r\n\r\n        Object.keys(exps).forEach(exp => {\r\n            const type = exps[exp] > 0;\r\n\r\n            this.exposures.push({\r\n                type: type ? \"Long\" : \"Short\",\r\n                market: exp,\r\n                units: Math.abs(exps[exp])\r\n            });\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ExposureController;\n\r\nExposureController.$inject = [\"TradesService\"];\r\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__exposure_component__ = __webpack_require__(38);\n\r\n\r\n\r\n\r\nconst exposure = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.exposure\", [])\r\n    .component(\"exposure\", __WEBPACK_IMPORTED_MODULE_1__exposure_component__[\"a\" /* exposureComponent */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = exposure;\n\r\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__header_controller__ = __webpack_require__(42);\n\r\n\r\nconst headerComponent = {\r\n    templateUrl: \"app/components/header/header.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__header_controller__[\"a\" /* HeaderController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = headerComponent;\n\r\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n\r\n\r\nclass HeaderController {\r\n    constructor($window, $rootScope, $mdDialog, $mdBottomSheet,\r\n            ToastService, AccountsService, SessionService,\r\n            QuotesService, StreamingService) {\r\n        this.$window = $window;\r\n        this.$rootScope = $rootScope;\r\n        this.$mdDialog = $mdDialog;\r\n        this.$mdBottomSheet = $mdBottomSheet;\r\n        this.ToastService = ToastService;\r\n        this.AccountsService = AccountsService;\r\n        this.SessionService = SessionService;\r\n        this.QuotesService = QuotesService;\r\n        this.StreamingService = StreamingService;\r\n    }\r\n\r\n    $onInit() {\r\n        const instrsStorage = this.$window.localStorage.getItem(\"argo.instruments\");\r\n\r\n        this.instrs = __WEBPACK_IMPORTED_MODULE_0_angular___default.a.fromJson(instrsStorage) || {\r\n            EUR_USD: true,\r\n            USD_JPY: true,\r\n            GBP_USD: true,\r\n            EUR_GBP: true,\r\n            USD_CHF: true,\r\n            EUR_JPY: true,\r\n            EUR_CHF: true,\r\n            USD_CAD: true,\r\n            AUD_USD: true,\r\n            GBP_JPY: true\r\n        };\r\n\r\n        this.isLoadingViewWatcher = this.$rootScope.$watch(\"isLoadingView\", () => {\r\n            this.isLoadingView = this.$rootScope.isLoadingView;\r\n        });\r\n    }\r\n\r\n    openTokenDialog(event) {\r\n        this.$mdDialog.show({\r\n            template: \"<token-dialog aria-label='Token Dialog'></token-dialog>\",\r\n            targetEvent: event\r\n        }).then(tokenInfo => {\r\n            if (tokenInfo) {\r\n                this.environment = tokenInfo.environment;\r\n                this.token = tokenInfo.token;\r\n            } else {\r\n                this.environment = \"\";\r\n                this.token = \"\";\r\n                this.accountId = \"\";\r\n            }\r\n\r\n            this.AccountsService.getAccounts({\r\n                environment: this.environment,\r\n                token: this.token\r\n            }).then(accounts => {\r\n                const scope = __WEBPACK_IMPORTED_MODULE_0_angular___default.a.extend(this.$rootScope.$new(true), {\r\n                    accounts\r\n                });\r\n\r\n                this.$mdBottomSheet.show({\r\n                    template: \"<accounts-bottomsheet accounts='accounts'></accounts-bottomsheet>\",\r\n                    scope,\r\n                    preserveScope: true,\r\n                    targetEvent: event\r\n                }).then(accountSelected => {\r\n                    this.accountId = accountSelected.id;\r\n\r\n                    this.SessionService.setCredentials({\r\n                        environment: this.environment,\r\n                        token: this.token,\r\n                        accountId: this.accountId\r\n                    });\r\n\r\n                    this.AccountsService.getAccounts({\r\n                        environment: this.environment,\r\n                        token: this.token,\r\n                        accountId: this.accountId\r\n                    }).then(() => {\r\n                        const instruments = this.AccountsService\r\n                            .setStreamingInstruments(this.instrs);\r\n\r\n                        this.StreamingService.startStream({\r\n                            environment: this.environment,\r\n                            accessToken: this.token,\r\n                            accountId: this.accountId,\r\n                            instruments\r\n                        });\r\n                    });\r\n                });\r\n            }, err => {\r\n                this.ToastService.show(err);\r\n            });\r\n        })\r\n        .catch(err => {\r\n            if (err) {\r\n                this.ToastService.show(err);\r\n            }\r\n        });\r\n    }\r\n\r\n    openSettingsDialog(event) {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            const allInstrs = this.AccountsService.getAccount().instruments;\r\n\r\n            __WEBPACK_IMPORTED_MODULE_0_angular___default.a.forEach(allInstrs, instrument => {\r\n                if (!this.instrs.hasOwnProperty(instrument.name)) {\r\n                    this.instrs[instrument.name] = false;\r\n                }\r\n            });\r\n\r\n            const scope = __WEBPACK_IMPORTED_MODULE_0_angular___default.a.extend(this.$rootScope.$new(true), {\r\n                instruments: this.instrs\r\n            });\r\n\r\n            this.$mdDialog.show({\r\n                template: \"<settings-dialog aria-label='Settings Dialog' instruments='instruments'></settings-dialog>\",\r\n                scope,\r\n                preserveScope: true,\r\n                targetEvent: event\r\n            }).then(settingsInfo => {\r\n                let instruments;\r\n\r\n                if (settingsInfo) {\r\n                    this.$window.localStorage.setItem(\"argo.instruments\",\r\n                        __WEBPACK_IMPORTED_MODULE_0_angular___default.a.toJson(settingsInfo));\r\n                    instruments = this.AccountsService\r\n                        .setStreamingInstruments(settingsInfo);\r\n\r\n                    this.QuotesService.reset();\r\n\r\n                    this.StreamingService.startStream({\r\n                        environment: credentials.environment,\r\n                        accessToken: credentials.token,\r\n                        accountId: credentials.accountId,\r\n                        instruments\r\n                    });\r\n                }\r\n            })\r\n            .catch(err => {\r\n                if (err) {\r\n                    this.ToastService.show(err);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = HeaderController;\n\r\nHeaderController.$inject = [\r\n    \"$window\", \"$rootScope\", \"$mdDialog\", \"$mdBottomSheet\",\r\n    \"ToastService\", \"AccountsService\", \"SessionService\",\r\n    \"QuotesService\", \"StreamingService\"\r\n];\r\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__header_component__ = __webpack_require__(41);\n\r\n\r\n\r\n\r\nconst header = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.header\", [])\r\n    .component(\"header\", __WEBPACK_IMPORTED_MODULE_1__header_component__[\"a\" /* headerComponent */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = header;\n\r\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = highlighterDirective;\nfunction highlighterDirective($timeout) {\r\n    const directive = {\r\n        restrict: \"A\",\r\n        link\r\n    };\r\n\r\n    return directive;\r\n\r\n    function link(scope, element, attrs) {\r\n        scope.$watch(attrs.highlighter, (newValue, oldValue) => {\r\n            let newclass;\r\n\r\n            if (newValue !== oldValue) {\r\n                newclass = newValue < oldValue ?\r\n                    \"highlight-red\" : \"highlight-green\";\r\n\r\n                element.addClass(newclass);\r\n\r\n                $timeout(() => {\r\n                    element.removeClass(newclass);\r\n                }, 500);\r\n            }\r\n        });\r\n    }\r\n}\r\nhighlighterDirective.$inject = [\"$timeout\"];\r\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__highlighter_directive__ = __webpack_require__(44);\n\r\n\r\n\r\n\r\nconst highlighter = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.highlighter\", [])\r\n    .directive(\"highlighter\", __WEBPACK_IMPORTED_MODULE_1__highlighter_directive__[\"a\" /* highlighterDirective */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = highlighter;\n\r\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__news_controller__ = __webpack_require__(47);\n\r\n\r\nconst newsComponent = {\r\n    templateUrl: \"app/components/news/news.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__news_controller__[\"a\" /* NewsController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = newsComponent;\n\r\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass NewsController {\r\n    constructor(NewsService) {\r\n        this.NewsService = NewsService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.NewsService.getNews().then(news => {\r\n            this.news = news;\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = NewsController;\n\r\nNewsController.$inject = [\"NewsService\"];\r\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__news_component__ = __webpack_require__(46);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__news_service__ = __webpack_require__(49);\n\r\n\r\n\r\n\r\n\r\nconst news = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.news\", [])\r\n    .component(\"news\", __WEBPACK_IMPORTED_MODULE_1__news_component__[\"a\" /* newsComponent */])\r\n    .service(\"NewsService\", __WEBPACK_IMPORTED_MODULE_2__news_service__[\"a\" /* NewsService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = news;\n\r\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass NewsService {\r\n    constructor($http, SessionService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n    }\r\n\r\n    getNews() {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/calendar\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token\r\n            }).then(news => news.data)\r\n            .catch(err => err.data)\r\n        );\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = NewsService;\n\r\nNewsService.$inject = [\"$http\", \"SessionService\"];\r\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_d3__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_techan__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_techan___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_techan__);\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ohlcChartDirective;\n\r\n\r\n\r\nfunction ohlcChartDirective() {\r\n    const directive = {\r\n        restrict: \"E\",\r\n        scope: {\r\n            instrument: \"=\",\r\n            granularity: \"=\",\r\n            data: \"=\",\r\n            feed: \"=\",\r\n            trades: \"=\"\r\n        },\r\n        link\r\n    };\r\n\r\n    return directive;\r\n\r\n    function link(scope, element) {\r\n        let myInstrument,\r\n            myGranularity,\r\n            myTrades,\r\n            data,\r\n            refreshChart,\r\n            lastHistUpdate,\r\n            lastData,\r\n            lastClose,\r\n            feedVolume = 0;\r\n\r\n        scope.$watch(\"data\", csv => {\r\n            if (csv && csv.length > 0) {\r\n                myInstrument = scope.instrument;\r\n                myGranularity = scope.granularity;\r\n\r\n                refreshChart = drawChart(element[0], csv);\r\n\r\n                lastData = data && data[data.length - 1];\r\n                lastClose = lastData.close;\r\n                feedVolume = lastData.volume;\r\n                lastHistUpdate = getLastHistUpdate(myGranularity);\r\n            }\r\n        });\r\n\r\n        scope.$watch(\"feed\", feed => {\r\n            const tick = feed[myInstrument],\r\n                nextHistUpdate = getLastHistUpdate(myGranularity, tick);\r\n\r\n            let midPrice;\r\n\r\n            if (tick && data && lastHistUpdate !== nextHistUpdate) {\r\n                data.shift();\r\n                tick.bid = parseFloat(tick.bid);\r\n                tick.ask = parseFloat(tick.ask);\r\n                midPrice = (tick.bid + tick.ask) / 2;\r\n                feedVolume = 0;\r\n                data.push({\r\n                    open: midPrice,\r\n                    close: midPrice,\r\n                    high: midPrice,\r\n                    low: midPrice,\r\n                    date: new Date(nextHistUpdate),\r\n                    volume: feedVolume\r\n                });\r\n\r\n                lastHistUpdate = nextHistUpdate;\r\n            }\r\n\r\n            if (tick && data) {\r\n\r\n                if (lastData.close !== lastClose) {\r\n                    feedVolume += 1;\r\n                }\r\n\r\n                tick.bid = parseFloat(tick.bid);\r\n                tick.ask = parseFloat(tick.ask);\r\n                midPrice = (tick.bid + tick.ask) / 2;\r\n\r\n                lastData = data && data[data.length - 1];\r\n                lastClose = lastData.close;\r\n                lastData.close = midPrice;\r\n                lastData.volume = feedVolume;\r\n\r\n                if (lastData.close > lastData.high) {\r\n                    lastData.high = lastData.close;\r\n                }\r\n\r\n                if (lastData.close < lastData.low) {\r\n                    lastData.low = lastData.close;\r\n                }\r\n\r\n                refreshChart();\r\n            }\r\n\r\n        }, true);\r\n\r\n        function getLastHistUpdate(granularity, tick) {\r\n            const time = tick && tick.time,\r\n                now = time ? new Date(time) : new Date();\r\n\r\n            let coeff;\r\n\r\n            if (granularity === \"S5\") {\r\n                coeff = 1000 * 5;\r\n            } else if (granularity === \"S10\") {\r\n                coeff = 1000 * 10;\r\n            } else if (granularity === \"S15\") {\r\n                coeff = 1000 * 15;\r\n            } else if (granularity === \"S30\") {\r\n                coeff = 1000 * 30;\r\n            } else if (granularity === \"M1\") {\r\n                coeff = 1000 * 60;\r\n            } else if (granularity === \"M2\") {\r\n                coeff = 1000 * 60 * 2;\r\n            } else if (granularity === \"M3\") {\r\n                coeff = 1000 * 60 * 3;\r\n            } else if (granularity === \"M4\") {\r\n                coeff = 1000 * 60 * 4;\r\n            } else if (granularity === \"M5\") {\r\n                coeff = 1000 * 60 * 5;\r\n            } else if (granularity === \"M10\") {\r\n                coeff = 1000 * 60 * 10;\r\n            } else if (granularity === \"M15\") {\r\n                coeff = 1000 * 60 * 15;\r\n            } else if (granularity === \"M30\") {\r\n                coeff = 1000 * 60 * 30;\r\n            } else if (granularity === \"H1\") {\r\n                coeff = 1000 * 60 * 60;\r\n            } else if (granularity === \"H2\") {\r\n                coeff = 1000 * 60 * 60 * 2;\r\n            } else if (granularity === \"H3\") {\r\n                coeff = 1000 * 60 * 60 * 3;\r\n            } else if (granularity === \"H4\") {\r\n                coeff = 1000 * 60 * 60 * 4;\r\n            } else if (granularity === \"H6\") {\r\n                coeff = 1000 * 60 * 60 * 6;\r\n            } else if (granularity === \"H8\") {\r\n                coeff = 1000 * 60 * 60 * 8;\r\n            } else if (granularity === \"H12\") {\r\n                coeff = 1000 * 60 * 60 * 12;\r\n            } else {\r\n\r\n                // for D / W / M\r\n                coeff = 1000 * 60 * 60 * 12;\r\n            }\r\n\r\n            return Math.floor(now / (coeff)) * coeff;\r\n        }\r\n\r\n        function drawChart(el, csv) {\r\n            const margin = {\r\n                    top: 0,\r\n                    right: 20,\r\n                    bottom: 30,\r\n                    left: 75\r\n                },\r\n                width = 960 - margin.left - margin.right,\r\n                height = 400 - margin.top - margin.bottom;\r\n\r\n            const x = __WEBPACK_IMPORTED_MODULE_1_techan___default.a.scale.financetime()\r\n                .range([0, width]);\r\n\r\n            const y = __WEBPACK_IMPORTED_MODULE_0_d3__[\"scaleLinear\"]()\r\n                .range([height, 0]);\r\n\r\n            const yVolume = __WEBPACK_IMPORTED_MODULE_0_d3__[\"scaleLinear\"]()\r\n                .range([y(0), y(0.2)]);\r\n\r\n            const ohlc = __WEBPACK_IMPORTED_MODULE_1_techan___default.a.plot.ohlc()\r\n                .xScale(x)\r\n                .yScale(y);\r\n\r\n            const tradearrow = __WEBPACK_IMPORTED_MODULE_1_techan___default.a.plot.tradearrow()\r\n                .xScale(x)\r\n                .yScale(y)\r\n                .orient(d => {\r\n                    const side = d.type.startsWith(\"buy\") ? \"up\" : \"down\";\r\n\r\n                    return side;\r\n                });\r\n\r\n            const sma0 = __WEBPACK_IMPORTED_MODULE_1_techan___default.a.plot.sma()\r\n                .xScale(x)\r\n                .yScale(y);\r\n\r\n            const sma0Calculator = __WEBPACK_IMPORTED_MODULE_1_techan___default.a.indicator.sma()\r\n                .period(10);\r\n\r\n            const sma1 = __WEBPACK_IMPORTED_MODULE_1_techan___default.a.plot.sma()\r\n                .xScale(x)\r\n                .yScale(y);\r\n\r\n            const sma1Calculator = __WEBPACK_IMPORTED_MODULE_1_techan___default.a.indicator.sma()\r\n                .period(20);\r\n\r\n            const volume = __WEBPACK_IMPORTED_MODULE_1_techan___default.a.plot.volume()\r\n                .accessor(ohlc.accessor())\r\n                .xScale(x)\r\n                .yScale(yVolume);\r\n\r\n            const xAxis = __WEBPACK_IMPORTED_MODULE_0_d3__[\"axisBottom\"](x);\r\n\r\n            const yAxis = __WEBPACK_IMPORTED_MODULE_0_d3__[\"axisLeft\"](y);\r\n\r\n            const volumeAxis = __WEBPACK_IMPORTED_MODULE_0_d3__[\"axisRight\"](yVolume)\r\n                .ticks(3)\r\n                .tickFormat(__WEBPACK_IMPORTED_MODULE_0_d3__[\"format\"](\",.3s\"));\r\n\r\n            // const timeAnnotation = techan.plot.axisannotation()\r\n            //     .axis(xAxis)\r\n            //     .orient(\"bottom\")\r\n            //     .format(d3.timeFormat(\"%Y-%m-%d %H:%M\"))\r\n            //     .width(80)\r\n            //     .translate([0, height]);\r\n\r\n            // const ohlcAnnotation = techan.plot.axisannotation()\r\n            //     .axis(yAxis)\r\n            //     .orient(\"left\")\r\n            //     .format(d3.format(\",.4f\"));\r\n\r\n            // const volumeAnnotation = techan.plot.axisannotation()\r\n            //     .axis(volumeAxis)\r\n            //     .orient(\"right\")\r\n            //     .width(35);\r\n\r\n            // const crosshair = techan.plot.crosshair()\r\n            //     .xScale(x)\r\n            //     .yScale(y)\r\n            //     .xAnnotation(timeAnnotation)\r\n            //     .yAnnotation([ohlcAnnotation, volumeAnnotation]);\r\n\r\n            __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](el).select(\"svg\").remove();\r\n\r\n            const svg = __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](el).append(\"svg\")\r\n                .attr(\"width\", width + margin.left + margin.right)\r\n                .attr(\"height\", height + margin.top + margin.bottom)\r\n                .append(\"g\")\r\n                .attr(\"transform\",\r\n                    `translate(${margin.left}, ${margin.top})`);\r\n\r\n            const defs = svg.append(\"defs\")\r\n                .append(\"clipPath\")\r\n                    .attr(\"id\", \"ohlcClip\");\r\n\r\n            defs.append(\"rect\")\r\n                .attr(\"x\", 0)\r\n                .attr(\"y\", 0)\r\n                .attr(\"width\", width)\r\n                .attr(\"height\", height);\r\n\r\n            const ohlcSelection = svg.append(\"g\")\r\n                .attr(\"class\", \"ohlc\")\r\n                .attr(\"transform\", \"translate(0,0)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"volume\")\r\n                .attr(\"clip-path\", \"url(#ohlcClip)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"candlestick\")\r\n                .attr(\"clip-path\", \"url(#ohlcClip)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"indicator sma ma-0\")\r\n                .attr(\"clip-path\", \"url(#ohlcClip)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"indicator sma ma-1\")\r\n                .attr(\"clip-path\", \"url(#ohlcClip)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"tradearrow\");\r\n\r\n            svg.append(\"g\")\r\n                .attr(\"class\", \"x axis\")\r\n                .attr(\"transform\", `translate(0, ${height})`);\r\n\r\n            svg\r\n                .append(\"g\")\r\n                    .attr(\"class\", \"y axis\")\r\n                .append(\"text\")\r\n                    .attr(\"transform\", \"rotate(-90)\")\r\n                    .attr(\"y\", 6)\r\n                    .attr(\"dy\", \".71em\")\r\n                    .style(\"font-weight\", \"bold\")\r\n                    .style(\"text-anchor\", \"end\")\r\n                    .text(`Price (${myInstrument} / ${myGranularity})`);\r\n\r\n            svg.append(\"g\")\r\n                .attr(\"class\", \"volume axis\");\r\n\r\n            // svg.append(\"g\")\r\n            //     .attr(\"class\", \"crosshair ohlc\");\r\n\r\n            data = __WEBPACK_IMPORTED_MODULE_0_d3__[\"csvParse\"](csv).map(\r\n                d => ({\r\n                    date: new Date(d.Date),\r\n                    open: +d.Open,\r\n                    high: +d.High,\r\n                    low: +d.Low,\r\n                    close: +d.Close,\r\n                    volume: +d.Volume\r\n                })\r\n            );\r\n\r\n            svg.select(\"g.candlestick\").datum(data);\r\n            svg.select(\"g.sma.ma-0\").datum(sma0Calculator(data));\r\n            svg.select(\"g.sma.ma-1\").datum(sma1Calculator(data));\r\n            svg.select(\"g.volume\").datum(data);\r\n\r\n            redraw();\r\n\r\n            function redraw() {\r\n                const accessor = ohlc.accessor();\r\n\r\n                x.domain(data.map(accessor.d));\r\n                x.zoomable().domain([data.length - 130, data.length]);\r\n\r\n                y.domain(__WEBPACK_IMPORTED_MODULE_1_techan___default.a.scale.plot.ohlc(\r\n                    data.slice(data.length - 130, data.length)).domain());\r\n                yVolume.domain(__WEBPACK_IMPORTED_MODULE_1_techan___default.a.scale.plot.volume(\r\n                    data.slice(data.length - 130, data.length)).domain());\r\n\r\n                svg.select(\"g.x.axis\").call(xAxis);\r\n                svg.select(\"g.y.axis\").call(yAxis);\r\n                svg.select(\"g.volume.axis\").call(volumeAxis);\r\n\r\n                svg.select(\"g.candlestick\").datum(data).call(ohlc);\r\n                svg.select(\"g.tradearrow\").remove();\r\n                svg.append(\"g\").attr(\"class\", \"tradearrow\");\r\n                myTrades = scope.trades.filter(\r\n                    trade => trade.instrument === myInstrument)\r\n                    .map(\r\n                        trade => ({\r\n                            date: new Date(trade.openTime),\r\n                            type: trade.currentUnits > 0 ? \"buy\" : \"sell\",\r\n                            price: trade.price\r\n                        })\r\n                    );\r\n                svg.select(\"g.tradearrow\").datum(myTrades).call(tradearrow);\r\n\r\n                svg.select(\"g.sma.ma-0\")\r\n                    .datum(sma0Calculator(data)).call(sma0);\r\n                svg.select(\"g.sma.ma-1\")\r\n                    .datum(sma1Calculator(data)).call(sma1);\r\n\r\n                svg.select(\"g.volume\").datum(data).call(volume);\r\n\r\n                // svg.select(\"g.crosshair.ohlc\").call(crosshair);\r\n            }\r\n\r\n            return redraw;\r\n        }\r\n\r\n    }\r\n}\r\nohlcChartDirective.$inject = [];\r\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ohlc_chart_directive__ = __webpack_require__(50);\n\r\n\r\n\r\n\r\nconst ohlcChart = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.ohlc-chart\", [])\r\n    .directive(\"ohlcChart\", __WEBPACK_IMPORTED_MODULE_1__ohlc_chart_directive__[\"a\" /* ohlcChartDirective */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ohlcChart;\n\r\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__order_dialog_controller__ = __webpack_require__(53);\n\r\n\r\nconst orderDialogComponent = {\r\n    templateUrl: \"app/components/order-dialog/order-dialog.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__order_dialog_controller__[\"a\" /* OrderDialogController */],\r\n    bindings: {\r\n        params: \"<\"\r\n    }\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = orderDialogComponent;\n\r\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass OrderDialogController {\r\n    constructor($mdDialog, ToastService,\r\n            QuotesService, OrdersService, AccountsService) {\r\n        this.$mdDialog = $mdDialog;\r\n        this.ToastService = ToastService;\r\n        this.QuotesService = QuotesService;\r\n        this.OrdersService = OrdersService;\r\n        this.AccountsService = AccountsService;\r\n    }\r\n\r\n    $onInit() {\r\n        const account = this.AccountsService.getAccount();\r\n\r\n        this.pips = account.pips;\r\n\r\n        this.type = \"MARKET\";\r\n        this.side = this.params.side;\r\n        this.instruments = this.params.instruments;\r\n        this.selectedInstrument = this.params.selectedInstrument;\r\n        this.changeMarket(this.selectedInstrument);\r\n        this.expires = [\r\n            { label: \"1 Hour\", value: 60 * 60 * 1000 },\r\n            { label: \"2 Hours\", value: 2 * 60 * 60 * 1000 },\r\n            { label: \"3 Hours\", value: 3 * 60 * 60 * 1000 },\r\n            { label: \"4 Hours\", value: 4 * 60 * 60 * 1000 },\r\n            { label: \"5 Hours\", value: 5 * 60 * 60 * 1000 },\r\n            { label: \"6 Hours\", value: 6 * 60 * 60 * 1000 },\r\n            { label: \"8 Hours\", value: 8 * 60 * 60 * 1000 },\r\n            { label: \"12 Hours\", value: 12 * 60 * 60 * 1000 },\r\n            { label: \"18 Hours\", value: 18 * 60 * 60 * 1000 },\r\n            { label: \"1 Day\", value: 60 * 60 * 24 * 1000 },\r\n            { label: \"2 Days\", value: 2 * 60 * 60 * 24 * 1000 },\r\n            { label: \"1 Week\", value: 7 * 60 * 60 * 24 * 1000 },\r\n            { label: \"1 Month\", value: 30 * 60 * 60 * 24 * 1000 },\r\n            { label: \"2 Months\", value: 60 * 60 * 60 * 24 * 1000 },\r\n            { label: \"3 Months\", value: 90 * 60 * 60 * 24 * 1000 }\r\n        ];\r\n        this.selectedExpire = 604800000; // 1 week\r\n        this.measure = \"price\";\r\n        this.isLowerBound = false;\r\n        this.isUpperBound = false;\r\n        this.isTakeProfit = false;\r\n        this.isStopLoss = false;\r\n        this.isTrailingStop = false;\r\n    }\r\n\r\n    changeMarket(instrument) {\r\n        if (!this.pips) {\r\n            return;\r\n        }\r\n\r\n        const price = this.QuotesService.getQuotes()[instrument],\r\n            fixed = ((this.pips[this.selectedInstrument].toString())\r\n                .match(/0/g) || []).length;\r\n\r\n        this.measure = \"price\";\r\n        this.step = parseFloat(this.pips[this.selectedInstrument]);\r\n        if (this.side === \"buy\") {\r\n            this.quote = parseFloat(price && price.ask);\r\n            this.takeProfit = parseFloat((this.quote + this.step * 10)\r\n                .toFixed(fixed));\r\n            this.stopLoss = parseFloat((this.quote - this.step * 10)\r\n                .toFixed(fixed));\r\n        } else {\r\n            this.quote = parseFloat(price && price.bid);\r\n            this.takeProfit = parseFloat((this.quote - this.step * 10)\r\n                .toFixed(fixed));\r\n            this.stopLoss = parseFloat((this.quote + this.step * 10)\r\n                .toFixed(fixed));\r\n        }\r\n        this.lowerBound = parseFloat((this.quote - this.step).toFixed(fixed));\r\n        this.upperBound = parseFloat((this.quote + this.step).toFixed(fixed));\r\n        this.trailingStop = 25;\r\n    }\r\n\r\n    changeMeasure(measure) {\r\n        if (measure === \"price\") {\r\n            this.changeMarket(this.selectedInstrument);\r\n        } else {\r\n            this.lowerBound = 1;\r\n            this.upperBound = 1;\r\n            this.takeProfit = 10;\r\n            this.stopLoss = 10;\r\n            this.trailingStop = 25;\r\n            this.step = 1;\r\n        }\r\n    }\r\n\r\n    hide() {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    cancel() {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n    answer(action) {\r\n        const order = {},\r\n            isBuy = this.side === \"buy\",\r\n            isMeasurePips = this.measure === \"pips\";\r\n\r\n        this.$mdDialog.hide(action);\r\n\r\n        this.step = parseFloat(this.pips[this.selectedInstrument]);\r\n\r\n        order.instrument = this.selectedInstrument;\r\n        order.units = this.units;\r\n        if (this.units && !isBuy) {\r\n            order.units = `-${order.units}`;\r\n        }\r\n\r\n        order.side = this.side;\r\n        order.type = this.type;\r\n\r\n        if (order.type === \"LIMIT\") {\r\n            order.price = this.quote && this.quote.toString();\r\n            order.gtdTime = new Date(Date.now() + this.selectedExpire);\r\n        }\r\n\r\n        if (isMeasurePips) {\r\n            if (this.isLowerBound) {\r\n                order.priceBound =\r\n                    parseFloat(this.quote - this.step * this.lowerBound)\r\n                        .toString();\r\n            }\r\n            if (this.isUpperBound) {\r\n                order.priceBound =\r\n                    parseFloat(this.quote + this.step * this.upperBound)\r\n                        .toString();\r\n            }\r\n            if (isBuy) {\r\n                if (this.isTakeProfit) {\r\n                    order.takeProfitOnFill = {};\r\n                    order.takeProfitOnFill.price =\r\n                        parseFloat(this.quote + this.step * this.takeProfit)\r\n                            .toString();\r\n                }\r\n                if (this.isStopLoss) {\r\n                    order.stopLossOnFill = {};\r\n                    order.order.takeProfitOnFill.price =\r\n                        parseFloat(this.quote - this.step * this.stopLoss)\r\n                            .toString();\r\n                }\r\n            } else {\r\n                if (this.isTakeProfit) {\r\n                    order.takeProfitOnFill = {};\r\n                    order.takeProfitOnFill.price =\r\n                        parseFloat(this.quote - this.step * this.takeProfit)\r\n                            .toString();\r\n                }\r\n                if (this.isStopLoss) {\r\n                    order.stopLossOnFill = {};\r\n                    order.order.takeProfitOnFill.price =\r\n                        parseFloat(this.quote + this.step * this.stopLoss)\r\n                            .toString();\r\n                }\r\n            }\r\n        } else {\r\n            if (this.isLowerBound) {\r\n                order.priceBound = this.lowerBound.toString();\r\n            }\r\n            if (this.isUpperBound) {\r\n                order.priceBound = this.upperBound.toString();\r\n            }\r\n            if (this.isTakeProfit) {\r\n                order.takeProfitOnFill = {};\r\n                order.takeProfitOnFill.price = this.takeProfit.toString();\r\n            }\r\n            if (this.isStopLoss) {\r\n                order.stopLossOnFill = {};\r\n                order.stopLossOnFill.price = this.stopLoss.toString();\r\n            }\r\n        }\r\n        if (this.isTrailingStop) {\r\n            order.trailingStopLossOnFill = {};\r\n            order.trailingStopLossOnFill.distance =\r\n                (this.step * this.trailingStop).toString();\r\n        }\r\n\r\n        if (action === \"submit\") {\r\n            this.OrdersService.putOrder(order).then(transaction => {\r\n                let opened,\r\n                    canceled,\r\n                    side,\r\n                    message;\r\n\r\n                if (transaction.code && transaction.message) {\r\n                    message = \"ERROR \" +\r\n                        `${transaction.code} ${transaction.message}`;\r\n\r\n                    this.ToastService.show(message);\r\n                } else if (transaction.errorMessage) {\r\n                    message = `ERROR ${transaction.errorMessage}`;\r\n\r\n                    this.ToastService.show(message);\r\n                } else if (transaction.orderCancelTransaction) {\r\n                    canceled = transaction.orderCancelTransaction;\r\n\r\n                    message = `ERROR ${canceled.reason}`;\r\n\r\n                    this.ToastService.show(message);\r\n                } else {\r\n                    opened = transaction.orderFillTransaction ||\r\n                        transaction.orderFillTransaction ||\r\n                        transaction.orderCreateTransaction;\r\n\r\n                    side = opened.units > 0 ? \"buy\" : \"sell\";\r\n                    message = `${side} ` +\r\n                        `${opened.instrument} ` +\r\n                        `#${opened.id} ` +\r\n                        `@${opened.price} ` +\r\n                        `for ${opened.units}`;\r\n\r\n                    this.ToastService.show(message);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = OrderDialogController;\n\r\nOrderDialogController.$inject = [\r\n    \"$mdDialog\", \"ToastService\",\r\n    \"QuotesService\", \"OrdersService\", \"AccountsService\"\r\n];\r\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__order_dialog_component__ = __webpack_require__(52);\n\r\n\r\n\r\n\r\nconst orderDialog = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.order-dialog\", [])\r\n    .component(\"orderDialog\", __WEBPACK_IMPORTED_MODULE_1__order_dialog_component__[\"a\" /* orderDialogComponent */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = orderDialog;\n\r\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__orders_controller__ = __webpack_require__(56);\n\r\n\r\nconst ordersComponent = {\r\n    templateUrl: \"app/components/orders/orders.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__orders_controller__[\"a\" /* OrdersController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ordersComponent;\n\r\n\n\n/***/ }),\n/* 56 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass OrdersController {\r\n    constructor($mdDialog, ToastService, OrdersService) {\r\n        this.$mdDialog = $mdDialog;\r\n        this.ToastService = ToastService;\r\n        this.OrdersService = OrdersService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.orders = this.OrdersService.getOrders();\r\n\r\n        this.OrdersService.refresh();\r\n    }\r\n\r\n    closeOrder(event, id) {\r\n        const confirm = this.$mdDialog.confirm()\r\n            .textContent(\"Are you sure to close the order?\")\r\n            .ariaLabel(\"Order closing confirmation\")\r\n            .ok(\"Ok\")\r\n            .cancel(\"Cancel\")\r\n            .targetEvent(event);\r\n\r\n        this.$mdDialog.show(confirm).then(() => {\r\n            this.OrdersService.closeOrder(id).then(order => {\r\n                const message = \"Closed \" +\r\n                    `#${order.orderCancelTransaction.orderID}`;\r\n\r\n                this.ToastService.show(message);\r\n            });\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = OrdersController;\n\r\nOrdersController.$inject = [\"$mdDialog\", \"ToastService\", \"OrdersService\"];\r\n\n\n/***/ }),\n/* 57 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__orders_component__ = __webpack_require__(55);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__orders_service__ = __webpack_require__(58);\n\r\n\r\n\r\n\r\n\r\nconst orders = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.orders\", [])\r\n    .component(\"orders\", __WEBPACK_IMPORTED_MODULE_1__orders_component__[\"a\" /* ordersComponent */])\r\n    .service(\"OrdersService\", __WEBPACK_IMPORTED_MODULE_2__orders_service__[\"a\" /* OrdersService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = orders;\n\r\n\n\n/***/ }),\n/* 58 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass OrdersService {\r\n    constructor($http, SessionService, AccountsService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.orders = [];\r\n    }\r\n\r\n    getOrders() {\r\n        return this.orders;\r\n    }\r\n\r\n    refresh() {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            this.$http.post(\"/api/orders\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            }).then(res => {\r\n                this.orders.length = 0;\r\n                angular.extend(this.orders, res.data);\r\n            });\r\n        });\r\n    }\r\n\r\n    putOrder(order) {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/order\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                instrument: order.instrument,\r\n                units: order.units,\r\n                side: order.side,\r\n                type: order.type,\r\n                expiry: order.expiry,\r\n                price: order.price,\r\n                priceBound: order.lowerBound || order.upperBound,\r\n                stopLossOnFill: order.stopLossOnFill,\r\n                takeProfitOnFill: order.takeProfitOnFill,\r\n                trailingStopLossOnFill: order.trailingStopLossOnFill\r\n            }).then(trade => trade.data)\r\n            .catch(err => err.data)\r\n        );\r\n    }\r\n\r\n    closeOrder(id) {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/closeorder\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                id\r\n            }).then(order => order.data)\r\n            .catch(err => err.data)\r\n        );\r\n    }\r\n\r\n    updateOrders(tick) {\r\n        const account = this.AccountsService.getAccount(),\r\n            pips = account.pips;\r\n\r\n        this.orders.forEach((order, index) => {\r\n            let current;\r\n\r\n            if (order.instrument === tick.instrument) {\r\n\r\n                if (order.units > 0) {\r\n                    current = tick.ask;\r\n                }\r\n                if (order.units < 0) {\r\n                    current = tick.bid;\r\n                }\r\n\r\n                this.orders[index].current = current;\r\n                this.orders[index].distance = (Math.abs(current - order.price) /\r\n                    pips[order.instrument]);\r\n            }\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = OrdersService;\n\r\nOrdersService.$inject = [\"$http\", \"SessionService\", \"AccountsService\"];\r\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__plugins_controller__ = __webpack_require__(60);\n\r\n\r\nconst pluginsComponent = {\r\n    templateUrl: \"app/components/plugins/plugins.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__plugins_controller__[\"a\" /* PluginsController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = pluginsComponent;\n\r\n\n\n/***/ }),\n/* 60 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass PluginsController {\r\n    constructor(PluginsService) {\r\n        this.PluginsService = PluginsService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.plugins = this.PluginsService.getPlugins();\r\n        this.pluginsInfo = this.PluginsService.getPluginsInfo();\r\n\r\n        this.PluginsService.refresh();\r\n    }\r\n\r\n    engage() {\r\n        this.PluginsService.engagePlugins(this.plugins);\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = PluginsController;\n\r\nPluginsController.$inject = [\"PluginsService\"];\r\n\n\n/***/ }),\n/* 61 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__plugins_component__ = __webpack_require__(59);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__plugins_service__ = __webpack_require__(62);\n\r\n\r\n\r\n\r\n\r\nconst plugins = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.plugins\", [])\r\n    .component(\"plugins\", __WEBPACK_IMPORTED_MODULE_1__plugins_component__[\"a\" /* pluginsComponent */])\r\n    .service(\"PluginsService\", __WEBPACK_IMPORTED_MODULE_2__plugins_service__[\"a\" /* PluginsService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = plugins;\n\r\n\n\n/***/ }),\n/* 62 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass PluginsService {\r\n    constructor($http, SessionService, AccountsService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.plugins = {};\r\n        this.pluginsInfo = {\r\n            count: 0\r\n        };\r\n    }\r\n\r\n    getPlugins() {\r\n        return this.plugins;\r\n    }\r\n\r\n    getPluginsInfo() {\r\n        return this.pluginsInfo;\r\n    }\r\n\r\n    refresh() {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            this.$http.post(\"/api/plugins\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            }).then(res => {\r\n                let name;\r\n\r\n                for (name in this.plugins) {\r\n                    if (this.plugins.hasOwnProperty(name)) {\r\n                        delete this.plugins[name];\r\n                    }\r\n                }\r\n                angular.extend(this.plugins, res.data);\r\n                this.pluginsInfo.count = Object.keys(this.plugins).length;\r\n\r\n                Object.keys(this.plugins).forEach(key => {\r\n                    if (this.plugins[key] === \"enabled\") {\r\n                        this.plugins[key] = true;\r\n                    } else {\r\n                        this.plugins[key] = false;\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    engagePlugins(plugs) {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            const account = this.AccountsService.getAccount();\r\n\r\n            this.$http.post(\"/api/engageplugins\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                plugins: plugs,\r\n                config: {\r\n                    pips: account.pips\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = PluginsService;\n\r\nPluginsService.$inject = [\"$http\", \"SessionService\", \"AccountsService\"];\r\n\n\n/***/ }),\n/* 63 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__positions_controller__ = __webpack_require__(64);\n\r\n\r\nconst positionsComponent = {\r\n    templateUrl: \"app/components/positions/positions.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__positions_controller__[\"a\" /* PositionsController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = positionsComponent;\n\r\n\n\n/***/ }),\n/* 64 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass PositionsController {\r\n    constructor(PositionsService) {\r\n        this.PositionsService = PositionsService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.PositionsService.getPositions().then(positions => {\r\n            this.positions = positions;\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = PositionsController;\n\r\nPositionsController.$inject = [\"PositionsService\"];\r\n\n\n/***/ }),\n/* 65 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__positions_component__ = __webpack_require__(63);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__positions_service__ = __webpack_require__(66);\n\r\n\r\n\r\n\r\n\r\nconst positions = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.positions\", [])\r\n    .component(\"positions\", __WEBPACK_IMPORTED_MODULE_1__positions_component__[\"a\" /* positionsComponent */])\r\n    .service(\"PositionsService\", __WEBPACK_IMPORTED_MODULE_2__positions_service__[\"a\" /* PositionsService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = positions;\n\r\n\n\n/***/ }),\n/* 66 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass PositionsService {\r\n    constructor($http, SessionService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n    }\r\n\r\n    getPositions() {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/positions\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            }).then(positions => {\r\n                const data = [];\r\n\r\n                positions.data.forEach(position => {\r\n                    const longUnits = position.long &&\r\n                        parseInt(position.long.units, 10);\r\n                    const shortUnits = position.short &&\r\n                        parseInt(position.short.units, 10);\r\n                    const units = longUnits || shortUnits;\r\n                    const side = units > 0 ? \"buy\" : \"sell\";\r\n                    const avgPrice = (longUnits && position.long.averagePrice)\r\n                         || (shortUnits && position.short.averagePrice);\r\n\r\n                    data.push({\r\n                        side,\r\n                        instrument: position.instrument,\r\n                        units,\r\n                        avgPrice\r\n                    });\r\n                });\r\n\r\n                return data;\r\n            }).catch(err => err.data)\r\n        );\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = PositionsService;\n\r\nPositionsService.$inject = [\"$http\", \"SessionService\"];\r\n\n\n/***/ }),\n/* 67 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__quotes_controller__ = __webpack_require__(68);\n\r\n\r\nconst quotesComponent = {\r\n    templateUrl: \"app/components/quotes/quotes.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__quotes_controller__[\"a\" /* QuotesController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = quotesComponent;\n\r\n\n\n/***/ }),\n/* 68 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass QuotesController {\r\n    constructor(QuotesService) {\r\n        this.QuotesService = QuotesService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.quotes = this.QuotesService.getQuotes();\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = QuotesController;\n\r\nQuotesController.$inject = [\"QuotesService\"];\r\n\n\n/***/ }),\n/* 69 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__quotes_component__ = __webpack_require__(67);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__quotes_service__ = __webpack_require__(70);\n\r\n\r\n\r\n\r\n\r\nconst quotes = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.quotes\", [])\r\n    .component(\"quotes\", __WEBPACK_IMPORTED_MODULE_1__quotes_component__[\"a\" /* quotesComponent */])\r\n    .service(\"QuotesService\", __WEBPACK_IMPORTED_MODULE_2__quotes_service__[\"a\" /* QuotesService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = quotes;\n\r\n\n\n/***/ }),\n/* 70 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n\r\n\r\nclass QuotesService {\r\n    constructor(AccountsService) {\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.quotes = {};\r\n    }\r\n\r\n    getQuotes() {\r\n        return this.quotes;\r\n    }\r\n\r\n    updateTick(tick) {\r\n        const account = this.AccountsService.getAccount(),\r\n            streamingInstruments = account.streamingInstruments,\r\n            pips = account.pips,\r\n            instrument = tick.instrument;\r\n\r\n        this.quotes[instrument] = {\r\n            time: tick.time,\r\n            ask: tick.ask,\r\n            bid: tick.bid,\r\n            spread: ((tick.ask - tick.bid) / pips[instrument]).toFixed(1)\r\n        };\r\n\r\n\r\n        if (!__WEBPACK_IMPORTED_MODULE_0_angular___default.a.equals(streamingInstruments, Object.keys(this.quotes))) {\r\n            streamingInstruments.forEach(instr => {\r\n                let temp;\r\n\r\n                if (this.quotes.hasOwnProperty(instr)) {\r\n                    temp = this.quotes[instr];\r\n                    delete this.quotes[instr];\r\n                    this.quotes[instr] = temp;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        let key;\r\n\r\n        for (key in this.quotes) {\r\n            if (this.quotes.hasOwnProperty(key)) {\r\n                delete this.quotes[key];\r\n            }\r\n        }\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = QuotesService;\n\r\nQuotesService.$inject = [\"AccountsService\"];\r\n\n\n/***/ }),\n/* 71 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__session_service__ = __webpack_require__(72);\n\r\n\r\n\r\n\r\nconst session = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.session\", [])\r\n    .service(\"SessionService\", __WEBPACK_IMPORTED_MODULE_1__session_service__[\"a\" /* SessionService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = session;\n\r\n\n\n/***/ }),\n/* 72 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass SessionService {\r\n    constructor($q) {\r\n        this.deferred = $q.defer();\r\n        this.credentials = {\r\n            environment: null,\r\n            token: null,\r\n            accountId: null\r\n        };\r\n    }\r\n\r\n    setCredentials(session) {\r\n        this.credentials.environment = session.environment;\r\n        this.credentials.token = session.token;\r\n        this.credentials.accountId = session.accountId;\r\n\r\n        this.deferred.resolve(this.credentials);\r\n    }\r\n\r\n    isLogged() {\r\n        return this.deferred.promise;\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = SessionService;\n\r\nSessionService.$inject = [\"$q\"];\r\n\n\n/***/ }),\n/* 73 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__settings_dialog_controller__ = __webpack_require__(74);\n\r\n\r\nconst settingsDialogComponent = {\r\n    templateUrl: \"app/components/settings-dialog/settings-dialog.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__settings_dialog_controller__[\"a\" /* SettingsDialogController */],\r\n    bindings: {\r\n        instruments: \"<\"\r\n    }\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = settingsDialogComponent;\n\r\n\n\n/***/ }),\n/* 74 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass SettingsDialogController {\r\n    constructor($mdDialog) {\r\n        this.$mdDialog = $mdDialog;\r\n    }\r\n\r\n    hide() {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    cancel() {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n    answer(settings) {\r\n        this.$mdDialog.hide(settings);\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = SettingsDialogController;\n\r\nSettingsDialogController.$inject = [\"$mdDialog\"];\r\n\n\n/***/ }),\n/* 75 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__settings_dialog_component__ = __webpack_require__(73);\n\r\n\r\n\r\n\r\nconst settingsDialog = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.settings-dialog\", [])\r\n    .component(\"settingsDialog\", __WEBPACK_IMPORTED_MODULE_1__settings_dialog_component__[\"a\" /* settingsDialogComponent */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = settingsDialog;\n\r\n\r\n\n\n/***/ }),\n/* 76 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_d3__);\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = slChartDirective;\n\r\n\r\n// Inspired by http://bl.ocks.org/vicapow/9904319\r\nfunction slChartDirective() {\r\n    const data = {},\r\n        directive = {\r\n            restrict: \"E\",\r\n            link,\r\n            scope: {\r\n                instrument: \"=\",\r\n                data: \"=\",\r\n                length: \"=\"\r\n            },\r\n            replace: true,\r\n            template: \"<svg class='sl'></svg>\",\r\n            transclude: true\r\n        };\r\n\r\n    return directive;\r\n\r\n    function link(scope, element) {\r\n\r\n        scope.$watch(\"data\", quote => {\r\n            redraw(quote);\r\n        });\r\n\r\n        function redraw(quote) {\r\n            const svg = __WEBPACK_IMPORTED_MODULE_0_d3__[\"select\"](element[0]),\r\n                node = svg.node(),\r\n                instrument = scope.instrument,\r\n                w = node.clientWidth,\r\n                h = getComputedStyle(node)[\"font-size\"].replace(\"px\", \"\");\r\n\r\n            svg.selectAll(\"*\").remove();\r\n\r\n            if (!data[instrument]) {\r\n                data[instrument] = [];\r\n            }\r\n\r\n            data[instrument].push(\r\n                (parseFloat(quote.bid) +\r\n                    parseFloat(quote.ask)) / 2);\r\n\r\n            data[instrument] = data[instrument].slice(-scope.length);\r\n\r\n            if (data[instrument][0] > data[instrument].slice(-1)) {\r\n                node.style.stroke = \"red\";\r\n            } else {\r\n                node.style.stroke = \"green\";\r\n            }\r\n            node.style.height = `${h}px`;\r\n\r\n            const min = __WEBPACK_IMPORTED_MODULE_0_d3__[\"min\"](data[instrument]);\r\n            const max = __WEBPACK_IMPORTED_MODULE_0_d3__[\"max\"](data[instrument]);\r\n\r\n            const x = __WEBPACK_IMPORTED_MODULE_0_d3__[\"scaleLinear\"]()\r\n                .domain([0, data[instrument].length - 1]).range([0, w]);\r\n            const y = __WEBPACK_IMPORTED_MODULE_0_d3__[\"scaleLinear\"]()\r\n                .domain([min, max]).range([h, 0]);\r\n\r\n            const paths = data[instrument]\r\n                .map((d, i) => [x(i), y(d)])\r\n                .join(\"L\");\r\n\r\n            svg.append(\"path\").attr(\"d\", `M${paths}`);\r\n        }\r\n    }\r\n}\r\nslChartDirective.$inject = [];\r\n\n\n/***/ }),\n/* 77 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__sl_chart_directive__ = __webpack_require__(76);\n\r\n\r\n\r\n\r\nconst slChart = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.sl-chart\", [])\r\n    .directive(\"slChart\", __WEBPACK_IMPORTED_MODULE_1__sl_chart_directive__[\"a\" /* slChartDirective */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = slChart;\n\r\n\n\n/***/ }),\n/* 78 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__streaming_service__ = __webpack_require__(79);\n\r\n\r\n\r\n\r\nconst streaming = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.streaming\", [])\r\n    .service(\"StreamingService\", __WEBPACK_IMPORTED_MODULE_1__streaming_service__[\"a\" /* StreamingService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = streaming;\n\r\n\n\n/***/ }),\n/* 79 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n\r\n\r\nclass StreamingService {\r\n    constructor($timeout, $http, ToastService,\r\n            QuotesService, ActivityService, TradesService,\r\n            OrdersService, AccountsService, PluginsService) {\r\n        this.$timeout = $timeout;\r\n        this.$http = $http;\r\n        this.ToastService = ToastService;\r\n        this.QuotesService = QuotesService;\r\n        this.ActivityService = ActivityService;\r\n        this.TradesService = TradesService;\r\n        this.OrdersService = OrdersService;\r\n        this.AccountsService = AccountsService;\r\n        this.PluginsService = PluginsService;\r\n    }\r\n\r\n    startStream(data) {\r\n        this.$http.post(\"/api/startstream\", {\r\n            environment: data.environment,\r\n            accessToken: data.accessToken,\r\n            accountId: data.accountId,\r\n            instruments: data.instruments\r\n        }).then(() => {\r\n            this.getStream();\r\n        }).catch(err => {\r\n            this.ToastService.show(err);\r\n        });\r\n    }\r\n\r\n    getStream() {\r\n        const ws = new WebSocket(\"ws://localhost:8000/stream\");\r\n\r\n        ws.onmessage = event => {\r\n            let data,\r\n                isTick,\r\n                tick,\r\n                isTransaction,\r\n                transaction,\r\n                refreshPlugins;\r\n\r\n            this.$timeout(() => {\r\n                try {\r\n                    data = __WEBPACK_IMPORTED_MODULE_0_angular___default.a.fromJson(event.data);\r\n\r\n                    isTick = data.closeoutAsk && data.closeoutBid;\r\n                    isTransaction = data.accountID;\r\n                    refreshPlugins = data.refreshPlugins;\r\n\r\n                    if (isTick) {\r\n                        tick = {\r\n                            time: data.time,\r\n                            instrument: data.instrument,\r\n                            ask: data.closeoutAsk,\r\n                            bid: data.closeoutBid\r\n                        };\r\n\r\n                        this.QuotesService.updateTick(tick);\r\n                        this.TradesService.updateTrades(tick);\r\n                        this.OrdersService.updateOrders(tick);\r\n                    }\r\n\r\n                    if (isTransaction) {\r\n                        transaction = data;\r\n                        this.ActivityService.addActivity(transaction);\r\n\r\n                        this.TradesService.refresh();\r\n                        this.OrdersService.refresh();\r\n                        this.AccountsService.refresh();\r\n                    }\r\n\r\n                    if (refreshPlugins) {\r\n                        this.PluginsService.refresh();\r\n                    }\r\n                } catch (e) {\r\n\r\n                    // Discard \"incomplete\" json\r\n                    // console.log(e.name + \": \" + e.message);\r\n                }\r\n            });\r\n        };\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = StreamingService;\n\r\nStreamingService.$inject = [\r\n    \"$timeout\", \"$http\", \"ToastService\",\r\n    \"QuotesService\", \"ActivityService\", \"TradesService\",\r\n    \"OrdersService\", \"AccountsService\", \"PluginsService\"\r\n];\r\n\n\n/***/ }),\n/* 80 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__toast_service__ = __webpack_require__(81);\n\r\n\r\n\r\n\r\nconst toast = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.toast\", [])\r\n    .service(\"ToastService\", __WEBPACK_IMPORTED_MODULE_1__toast_service__[\"a\" /* ToastService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = toast;\n\r\n\n\n/***/ }),\n/* 81 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass ToastService {\r\n    constructor($mdToast) {\r\n        this.$mdToast = $mdToast;\r\n    }\r\n\r\n    show(message) {\r\n        this.$mdToast.show(\r\n            this.$mdToast.simple()\r\n                .textContent(message)\r\n                .action(\"CLOSE\")\r\n                .position(\"right bottom\")\r\n                .hideDelay(10000)\r\n        );\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ToastService;\n\r\nToastService.$inject = [\"$mdToast\"];\r\n\n\n/***/ }),\n/* 82 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__token_dialog_controller__ = __webpack_require__(83);\n\r\n\r\nconst tokenDialogComponent = {\r\n    templateUrl: \"app/components/token-dialog/token-dialog.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__token_dialog_controller__[\"a\" /* TokenDialogController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = tokenDialogComponent;\n\r\n\n\n/***/ }),\n/* 83 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass TokenDialogController {\r\n    constructor($mdDialog) {\r\n        this.$mdDialog = $mdDialog;\r\n    }\r\n\r\n    $onInit() {\r\n        this.environment = \"practice\";\r\n    }\r\n\r\n    hide() {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    cancel() {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n    answer(token) {\r\n        this.$mdDialog.hide(token);\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = TokenDialogController;\n\r\nTokenDialogController.$inject = [\"$mdDialog\"];\r\n\n\n/***/ }),\n/* 84 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__token_dialog_component__ = __webpack_require__(82);\n\r\n\r\n\r\n\r\nconst tokenDialog = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.token-dialog\", [])\r\n    .component(\"tokenDialog\", __WEBPACK_IMPORTED_MODULE_1__token_dialog_component__[\"a\" /* tokenDialogComponent */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = tokenDialog;\n\r\n\n\n/***/ }),\n/* 85 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__trades_controller__ = __webpack_require__(86);\n\r\n\r\nconst tradesComponent = {\r\n    templateUrl: \"app/components/trades/trades.html\",\r\n    controller: __WEBPACK_IMPORTED_MODULE_0__trades_controller__[\"a\" /* TradesController */]\r\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = tradesComponent;\n\r\n\n\n/***/ }),\n/* 86 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass TradesController {\r\n    constructor($mdDialog, ToastService, TradesService) {\r\n        this.$mdDialog = $mdDialog;\r\n        this.ToastService = ToastService;\r\n        this.TradesService = TradesService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.trades = this.TradesService.getTrades();\r\n\r\n        this.TradesService.refresh();\r\n    }\r\n\r\n    closeTrade(event, id) {\r\n        const confirm = this.$mdDialog.confirm()\r\n            .textContent(\"Are you sure to close the trade?\")\r\n            .ariaLabel(\"Trade closing confirmation\")\r\n            .ok(\"Ok\")\r\n            .cancel(\"Cancel\")\r\n            .targetEvent(event);\r\n\r\n        this.$mdDialog.show(confirm).then(() => {\r\n            this.TradesService.closeTrade(id).then(trade => {\r\n                const message = \"Closed \" +\r\n                    `${(trade.units > 0 ? \"sell\" : \"buy\")} ` +\r\n                    `${trade.instrument} ` +\r\n                    `#${trade.id} ` +\r\n                    `@${trade.price} ` +\r\n                    `P&L ${trade.pl}`;\r\n\r\n                this.ToastService.show(message);\r\n            }).catch(err => {\r\n                const message = `ERROR ${err.code} ${err.message}`;\r\n\r\n                this.ToastService.show(message);\r\n            });\r\n\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = TradesController;\n\r\nTradesController.$inject = [\"$mdDialog\", \"ToastService\", \"TradesService\"];\r\n\n\n/***/ }),\n/* 87 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__trades_component__ = __webpack_require__(85);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__trades_service__ = __webpack_require__(88);\n\r\n\r\n\r\n\r\n\r\nconst trades = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"components.trades\", [])\r\n    .component(\"trades\", __WEBPACK_IMPORTED_MODULE_1__trades_component__[\"a\" /* tradesComponent */])\r\n    .service(\"TradesService\", __WEBPACK_IMPORTED_MODULE_2__trades_service__[\"a\" /* TradesService */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = trades;\n\r\n\n\n/***/ }),\n/* 88 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nclass TradesService {\r\n    constructor($http, SessionService, AccountsService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.trades = [];\r\n    }\r\n\r\n    getTrades() {\r\n        return this.trades;\r\n    }\r\n\r\n    refresh() {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            this.$http.post(\"/api/trades\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            }).then(res => {\r\n                this.trades.length = 0;\r\n                angular.extend(this.trades, res.data);\r\n                this.trades.forEach(trade => {\r\n                    trade.side = trade.currentUnits > 0 ? \"buy\" : \"sell\";\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    closeTrade(id) {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/closetrade\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                id\r\n            }).then(order => order.data)\r\n            .catch(err => err.data)\r\n        );\r\n    }\r\n\r\n    updateTrades(tick) {\r\n        const account = this.AccountsService.getAccount(),\r\n            pips = account.pips;\r\n\r\n        this.trades.forEach((trade, index) => {\r\n            let current,\r\n                side;\r\n\r\n            if (trade.instrument === tick.instrument) {\r\n                side = trade.currentUnits > 0 ? \"buy\" : \"sell\";\r\n\r\n                if (side === \"buy\") {\r\n                    current = tick.bid;\r\n                    this.trades[index].profitPips =\r\n                        ((current - trade.price) / pips[trade.instrument]);\r\n                }\r\n                if (side === \"sell\") {\r\n                    current = tick.ask;\r\n                    this.trades[index].profitPips =\r\n                        ((trade.price - current) / pips[trade.instrument]);\r\n                }\r\n\r\n                this.trades[index].current = current;\r\n            }\r\n        });\r\n    }\r\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = TradesService;\n\r\nTradesService.$inject = [\"$http\", \"SessionService\", \"AccountsService\"];\r\n\n\n/***/ }),\n/* 89 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__root_component__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__common_common_module__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_components_module__ = __webpack_require__(8);\n\r\n\r\n\r\n\r\n\r\n\r\nconst root = __WEBPACK_IMPORTED_MODULE_0_angular___default.a\r\n    .module(\"root\", [\r\n        __WEBPACK_IMPORTED_MODULE_2__common_common_module__[\"a\" /* common */],\r\n        __WEBPACK_IMPORTED_MODULE_3__components_components_module__[\"a\" /* components */]\r\n    ])\r\n    .component(\"root\", __WEBPACK_IMPORTED_MODULE_1__root_component__[\"a\" /* rootComponent */])\r\n    .name;\n/* harmony export (immutable) */ __webpack_exports__[\"root\"] = root;\n\r\n\n\n/***/ })\n],[89]);\n\n\n// WEBPACK FOOTER //\n// app.bundle.js","import angular from \"angular\";\r\n\r\nimport { app } from \"./app.module\";\r\n\r\nexport const common = angular\r\n    .module(\"common\", [\r\n        app\r\n    ])\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/common/common.module.js\n// module id = 7\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { account } from \"./account/account.module\";\r\nimport { accountsBottomsheet } from \"./accounts-bottomsheet/accounts-bottomsheet.module\";\r\nimport { activity } from \"./activity/activity.module\";\r\nimport { charts } from \"./charts/charts.module\";\r\nimport { dualColor } from \"./dual-color/dual-color.module\";\r\nimport { exposure } from \"./exposure/exposure.module\";\r\nimport { header } from \"./header/header.module\";\r\nimport { highlighter } from \"./highlighter/highlighter.module\";\r\nimport { news } from \"./news/news.module\";\r\nimport { ohlcChart } from \"./ohlc-chart/ohlc-chart.module\";\r\nimport { orderDialog } from \"./order-dialog/order-dialog.module\";\r\nimport { orders } from \"./orders/orders.module\";\r\nimport { plugins } from \"./plugins/plugins.module\";\r\nimport { positions } from \"./positions/positions.module\";\r\nimport { quotes } from \"./quotes/quotes.module\";\r\nimport { session } from \"./session/session.module\";\r\nimport { settingsDialog } from \"./settings-dialog/settings-dialog.module\";\r\nimport { slChart } from \"./sl-chart/sl-chart.module\";\r\nimport { streaming } from \"./streaming/streaming.module\";\r\nimport { toast } from \"./toast/toast.module\";\r\nimport { tokenDialog } from \"./token-dialog/token-dialog.module\";\r\nimport { trades } from \"./trades/trades.module\";\r\n\r\nexport const components = angular\r\n    .module(\"components\", [\r\n        account,\r\n        accountsBottomsheet,\r\n        activity,\r\n        charts,\r\n        dualColor,\r\n        exposure,\r\n        header,\r\n        highlighter,\r\n        news,\r\n        ohlcChart,\r\n        orderDialog,\r\n        orders,\r\n        plugins,\r\n        positions,\r\n        quotes,\r\n        session,\r\n        settingsDialog,\r\n        slChart,\r\n        streaming,\r\n        toast,\r\n        tokenDialog,\r\n        trades\r\n    ])\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/components.module.js\n// module id = 8\n// module chunks = 0","export const rootComponent = {\r\n    templateUrl: \"app/root.html\"\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/root.component.js\n// module id = 9\n// module chunks = 0","import { AppController } from \"./app.controller\";\r\n\r\nexport const appComponent = {\r\n    templateUrl: \"app/common/app.html\",\r\n    controller: AppController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/common/app.component.js\n// module id = 17\n// module chunks = 0","export function appConfig($httpProvider, $locationProvider) {\r\n    const interceptors = $httpProvider.interceptors;\r\n\r\n    interceptors.push([\"$q\", \"$rootScope\", ($q, $rootScope) => {\r\n        let nLoadings = 0;\r\n\r\n        return {\r\n            request(request) {\r\n                nLoadings += 1;\r\n\r\n                $rootScope.isLoadingView = true;\r\n\r\n                return request;\r\n            },\r\n\r\n            response(response) {\r\n                nLoadings -= 1;\r\n                if (nLoadings === 0) {\r\n                    $rootScope.isLoadingView = false;\r\n                }\r\n\r\n                return response;\r\n            },\r\n\r\n            responseError(response) {\r\n                nLoadings -= 1;\r\n                if (!nLoadings) {\r\n                    $rootScope.isLoadingView = false;\r\n                }\r\n\r\n                return $q.reject(response);\r\n            }\r\n        };\r\n    }]);\r\n\r\n    $locationProvider.html5Mode(true);\r\n}\r\nappConfig.$inject = [\"$httpProvider\", \"$locationProvider\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/common/app.config.js\n// module id = 18\n// module chunks = 0","export class AppController {\r\n    $onInit() {\r\n        this.tabSelectedIndex = 0;\r\n    }\r\n\r\n    next() {\r\n        this.tabSelectedIndex = Math.min(this.tabSelectedIndex + 1, 6);\r\n    }\r\n\r\n    previous() {\r\n        this.tabSelectedIndex = Math.max(this.tabSelectedIndex - 1, 0);\r\n    }\r\n}\r\nAppController.$inject = [];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/common/app.controller.js\n// module id = 19\n// module chunks = 0","import \"./app.css\";\r\n\r\nimport angular from \"angular\";\r\nimport material from \"angular-material\";\r\n\r\nimport { appComponent } from \"./app.component\";\r\nimport { appConfig } from \"./app.config\";\r\n\r\nexport const app = angular\r\n    .module(\"common.app\", [\r\n        material\r\n    ])\r\n    .component(\"app\", appComponent)\r\n    .config(appConfig)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/common/app.module.js\n// module id = 20\n// module chunks = 0","import { AccountController } from \"./account.controller\";\r\n\r\nexport const accountComponent = {\r\n    templateUrl: \"app/components/account/account.html\",\r\n    controller: AccountController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/account/account.component.js\n// module id = 21\n// module chunks = 0","export class AccountController {\r\n    constructor(AccountService) {\r\n        this.AccountService = AccountService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.account = this.AccountService.getAccount();\r\n    }\r\n}\r\nAccountController.$inject = [\"AccountsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/account/account.controller.js\n// module id = 22\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { accountComponent } from \"./account.component\";\r\nimport { AccountsService } from \"./accounts.service\";\r\n\r\nexport const account = angular\r\n    .module(\"components.account\", [])\r\n    .component(\"account\", accountComponent)\r\n    .service(\"AccountsService\", AccountsService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/account/account.module.js\n// module id = 23\n// module chunks = 0","import angular from \"angular\";\r\n\r\nexport class AccountsService {\r\n    constructor($http, SessionService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n\r\n        this.account = {};\r\n    }\r\n\r\n    getAccount() {\r\n        return this.account;\r\n    }\r\n\r\n    refresh() {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            this.getAccounts({\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            });\r\n        });\r\n    }\r\n\r\n    getAccounts(data) {\r\n        const environment = data.environment || \"practice\",\r\n            token = data.token,\r\n            accountId = data.accountId,\r\n            api = accountId ? \"/api/account\" : \"/api/accounts\";\r\n\r\n        return this.$http.post(api, {\r\n            environment,\r\n            token,\r\n            accountId\r\n        }).then(response => {\r\n            const accounts = response.data.accounts || response.data;\r\n\r\n            if (response.data.message) {\r\n                throw response.data.message;\r\n            }\r\n\r\n            if (!accounts.length) {\r\n                angular.merge(this.account, response.data.account);\r\n\r\n                this.account.timestamp = new Date();\r\n\r\n                this.account.unrealizedPLPercent =\r\n                    this.account.unrealizedPL / this.account.balance * 100;\r\n\r\n                if (!this.account.instruments) {\r\n                    this.$http.post(\"/api/instruments\", {\r\n                        environment,\r\n                        token,\r\n                        accountId\r\n                    }).then(instruments => {\r\n                        this.account.instruments = instruments.data;\r\n                        this.account.pips = {};\r\n                        angular.forEach(this.account.instruments, i => {\r\n                            this.account.pips[i.name] =\r\n                                Math.pow(10, i.pipLocation);\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n\r\n            return accounts;\r\n        });\r\n    }\r\n\r\n    setStreamingInstruments(settings) {\r\n        this.account.streamingInstruments = Object.keys(settings)\r\n            .filter(el => !!settings[el]);\r\n\r\n        return this.account.streamingInstruments;\r\n    }\r\n}\r\nAccountsService.$inject = [\"$http\", \"SessionService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/account/accounts.service.js\n// module id = 24\n// module chunks = 0","import { AccountsBottomsheetController } from \"./accounts-bottomsheet.controller\";\r\n\r\nexport const accountsBottomsheetComponent = {\r\n    templateUrl: \"app/components/accounts-bottomsheet/accounts-bottomsheet.html\",\r\n    controller: AccountsBottomsheetController,\r\n    bindings: {\r\n        accounts: \"<\"\r\n    }\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/accounts-bottomsheet/accounts-bottomsheet.component.js\n// module id = 25\n// module chunks = 0","export class AccountsBottomsheetController {\r\n    constructor($mdBottomSheet) {\r\n        this.$mdBottomSheet = $mdBottomSheet;\r\n    }\r\n\r\n    onAccountClick($index) {\r\n        const account = this.accounts[$index];\r\n\r\n        this.$mdBottomSheet.hide(account);\r\n    }\r\n}\r\nAccountsBottomsheetController.$inject = [\"$mdBottomSheet\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/accounts-bottomsheet/accounts-bottomsheet.controller.js\n// module id = 26\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { accountsBottomsheetComponent } from \"./accounts-bottomsheet.component\";\r\n\r\nexport const accountsBottomsheet = angular\r\n    .module(\"components.accounts-bottomsheet\", [])\r\n    .component(\"accountsBottomsheet\", accountsBottomsheetComponent)\r\n    .name;\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/accounts-bottomsheet/accounts-bottomsheet.module.js\n// module id = 27\n// module chunks = 0","import { ActivityController } from \"./activity.controller\";\r\n\r\nexport const activityComponent = {\r\n    templateUrl: \"app/components/activity/activity.html\",\r\n    controller: ActivityController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/activity/activity.component.js\n// module id = 28\n// module chunks = 0","export class ActivityController {\r\n    constructor(ActivityService) {\r\n        this.ActivityService = ActivityService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.ActivityService.getActivities().then(activities => {\r\n            this.activities = activities;\r\n        });\r\n    }\r\n}\r\nActivityController.$inject = [\"ActivityService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/activity/activity.controller.js\n// module id = 29\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { activityComponent } from \"./activity.component\";\r\nimport { ActivityService } from \"./activity.service\";\r\n\r\nexport const activity = angular\r\n    .module(\"components.activity\", [])\r\n    .component(\"activity\", activityComponent)\r\n    .service(\"ActivityService\", ActivityService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/activity/activity.module.js\n// module id = 30\n// module chunks = 0","export class ActivityService {\r\n    constructor($http, SessionService, AccountsService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n        this.AccountsService = AccountsService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.activities = [];\r\n    }\r\n\r\n    getActivities() {\r\n        const account = this.AccountsService.getAccount(),\r\n            lastTransactionID = account.lastTransactionID;\r\n\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/transactions\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                lastTransactionID\r\n            }).then(transactions => {\r\n                this.activities = transactions.data.reverse();\r\n\r\n                return this.activities;\r\n            }).catch(err => err.data)\r\n        );\r\n    }\r\n\r\n    addActivity(activity) {\r\n        this.activities.splice(0, 0, {\r\n            id: activity.id,\r\n            type: activity.type,\r\n            instrument: activity.instrument,\r\n            units: activity.units,\r\n            price: activity.price,\r\n            pl: activity.pl,\r\n            accountBalance: activity.accountBalance,\r\n            time: activity.time\r\n        });\r\n    }\r\n}\r\nActivityService.$inject = [\"$http\", \"SessionService\", \"AccountsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/activity/activity.service.js\n// module id = 31\n// module chunks = 0","import { ChartsController } from \"./charts.controller\";\r\n\r\nexport const chartsComponent = {\r\n    templateUrl: \"app/components/charts/charts.html\",\r\n    controller: ChartsController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/charts/charts.component.js\n// module id = 32\n// module chunks = 0","import angular from \"angular\";\r\n\r\nexport class ChartsController {\r\n    constructor($rootScope, $mdDialog, AccountsService,\r\n            ChartsService, QuotesService, TradesService) {\r\n        this.$rootScope = $rootScope;\r\n        this.$mdDialog = $mdDialog;\r\n        this.AccountsService = AccountsService;\r\n        this.ChartsService = ChartsService;\r\n        this.QuotesService = QuotesService;\r\n        this.TradesService = TradesService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.account = this.AccountsService.getAccount();\r\n\r\n        this.selectedInstrument = \"EUR_USD\";\r\n\r\n        this.granularities = [\r\n            \"S5\",\r\n            \"S10\",\r\n            \"S15\",\r\n            \"S30\",\r\n            \"M1\",\r\n            \"M2\",\r\n            \"M3\",\r\n            \"M4\",\r\n            \"M5\",\r\n            \"M10\",\r\n            \"M15\",\r\n            \"M30\",\r\n            \"H1\",\r\n            \"H2\",\r\n            \"H3\",\r\n            \"H4\",\r\n            \"H6\",\r\n            \"H8\",\r\n            \"H12\",\r\n            \"D\",\r\n            \"W\",\r\n            \"M\"\r\n        ];\r\n        this.selectedGranularity = \"M5\";\r\n\r\n        this.feed = this.QuotesService.getQuotes();\r\n\r\n        this.trades = this.TradesService.getTrades();\r\n\r\n        this.changeChart(this.selectedInstrument, this.selectedGranularity);\r\n    }\r\n\r\n    changeChart(instrument, granularity) {\r\n        this.ChartsService.getHistQuotes({\r\n            instrument,\r\n            granularity\r\n        }).then(candles => {\r\n            this.data = candles;\r\n        });\r\n    }\r\n\r\n\r\n    openOrderDialog(event, side) {\r\n        const scope = angular.extend(this.$rootScope.$new(true), {\r\n            params: {\r\n                side,\r\n                selectedInstrument: this.selectedInstrument,\r\n                instruments: this.account.streamingInstruments\r\n            }\r\n        });\r\n\r\n        this.$mdDialog.show({\r\n            template: \"<order-dialog aria-label='Order Dialog' params='params'></order-dialog>\",\r\n            scope,\r\n            preserveScope: true,\r\n            targetEvent: event\r\n        });\r\n    }\r\n}\r\nChartsController.$inject = [\"$rootScope\", \"$mdDialog\", \"AccountsService\",\r\n    \"ChartsService\", \"QuotesService\", \"TradesService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/charts/charts.controller.js\n// module id = 33\n// module chunks = 0","import \"./charts.css\";\r\n\r\nimport angular from \"angular\";\r\n\r\nimport { chartsComponent } from \"./charts.component\";\r\nimport { ChartsService } from \"./charts.service\";\r\n\r\nexport const charts = angular\r\n    .module(\"components.charts\", [])\r\n    .component(\"charts\", chartsComponent)\r\n    .service(\"ChartsService\", ChartsService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/charts/charts.module.js\n// module id = 34\n// module chunks = 0","export class ChartsService {\r\n    constructor($http, SessionService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n    }\r\n\r\n    getHistQuotes(opt) {\r\n        return this.SessionService.isLogged().then(credentials => {\r\n            const instrument = opt && opt.instrument || \"EUR_USD\",\r\n                granularity = opt && opt.granularity || \"M5\",\r\n                count = opt && opt.count || 251,\r\n                alignmentTimezone = opt && opt.alignmentTimezone\r\n                    || \"America/New_York\",\r\n                dailyAlignment = opt && opt.dailyAlignment || \"0\";\r\n\r\n            return this.$http.post(\"/api/candles\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                instrument,\r\n                granularity,\r\n                count,\r\n                alignmentTimezone,\r\n                dailyAlignment\r\n            }).then(candles => candles.data)\r\n            .catch(err => err.data);\r\n        });\r\n    }\r\n}\r\nChartsService.$inject = [\"$http\", \"SessionService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/charts/charts.service.js\n// module id = 35\n// module chunks = 0","export function dualColorDirective() {\r\n    const directive = {\r\n        restrict: \"A\",\r\n        link\r\n    };\r\n\r\n    return directive;\r\n\r\n    function link(scope, element, attrs) {\r\n        scope.$watch(attrs.dualColor, (newValue, oldValue) => {\r\n            if (newValue !== oldValue) {\r\n                if (newValue > 0) {\r\n                    element.removeClass(\"highlight-red\");\r\n                    element.addClass(\"highlight-green\");\r\n                }\r\n                if (newValue < 0) {\r\n                    element.removeClass(\"highlight-green\");\r\n                    element.addClass(\"highlight-red\");\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\ndualColorDirective.$inject = [];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/dual-color/dual-color.directive.js\n// module id = 36\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { dualColorDirective } from \"./dual-color.directive\";\r\n\r\nexport const dualColor = angular\r\n    .module(\"components.dual-color\", [])\r\n    .directive(\"dualColor\", dualColorDirective)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/dual-color/dual-color.module.js\n// module id = 37\n// module chunks = 0","import { ExposureController } from \"./exposure.controller\";\r\n\r\nexport const exposureComponent = {\r\n    templateUrl: \"app/components/exposure/exposure.html\",\r\n    controller: ExposureController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/exposure/exposure.component.js\n// module id = 38\n// module chunks = 0","export class ExposureController {\r\n    constructor(TradesService) {\r\n        this.TradesService = TradesService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.exposures = [];\r\n\r\n        const trades = this.TradesService.getTrades(),\r\n            exps = {};\r\n\r\n        trades.forEach(trade => {\r\n            const legs = trade.instrument.split(\"_\");\r\n\r\n            exps[legs[0]] = exps[legs[0]] || 0;\r\n            exps[legs[1]] = exps[legs[1]] || 0;\r\n\r\n            exps[legs[0]] += parseInt(trade.currentUnits, 10);\r\n            exps[legs[1]] -= trade.currentUnits * trade.price;\r\n        });\r\n\r\n        Object.keys(exps).forEach(exp => {\r\n            const type = exps[exp] > 0;\r\n\r\n            this.exposures.push({\r\n                type: type ? \"Long\" : \"Short\",\r\n                market: exp,\r\n                units: Math.abs(exps[exp])\r\n            });\r\n        });\r\n    }\r\n}\r\nExposureController.$inject = [\"TradesService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/exposure/exposure.controller.js\n// module id = 39\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { exposureComponent } from \"./exposure.component\";\r\n\r\nexport const exposure = angular\r\n    .module(\"components.exposure\", [])\r\n    .component(\"exposure\", exposureComponent)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/exposure/exposure.module.js\n// module id = 40\n// module chunks = 0","import { HeaderController } from \"./header.controller\";\r\n\r\nexport const headerComponent = {\r\n    templateUrl: \"app/components/header/header.html\",\r\n    controller: HeaderController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/header/header.component.js\n// module id = 41\n// module chunks = 0","import angular from \"angular\";\r\n\r\nexport class HeaderController {\r\n    constructor($window, $rootScope, $mdDialog, $mdBottomSheet,\r\n            ToastService, AccountsService, SessionService,\r\n            QuotesService, StreamingService) {\r\n        this.$window = $window;\r\n        this.$rootScope = $rootScope;\r\n        this.$mdDialog = $mdDialog;\r\n        this.$mdBottomSheet = $mdBottomSheet;\r\n        this.ToastService = ToastService;\r\n        this.AccountsService = AccountsService;\r\n        this.SessionService = SessionService;\r\n        this.QuotesService = QuotesService;\r\n        this.StreamingService = StreamingService;\r\n    }\r\n\r\n    $onInit() {\r\n        const instrsStorage = this.$window.localStorage.getItem(\"argo.instruments\");\r\n\r\n        this.instrs = angular.fromJson(instrsStorage) || {\r\n            EUR_USD: true,\r\n            USD_JPY: true,\r\n            GBP_USD: true,\r\n            EUR_GBP: true,\r\n            USD_CHF: true,\r\n            EUR_JPY: true,\r\n            EUR_CHF: true,\r\n            USD_CAD: true,\r\n            AUD_USD: true,\r\n            GBP_JPY: true\r\n        };\r\n\r\n        this.isLoadingViewWatcher = this.$rootScope.$watch(\"isLoadingView\", () => {\r\n            this.isLoadingView = this.$rootScope.isLoadingView;\r\n        });\r\n    }\r\n\r\n    openTokenDialog(event) {\r\n        this.$mdDialog.show({\r\n            template: \"<token-dialog aria-label='Token Dialog'></token-dialog>\",\r\n            targetEvent: event\r\n        }).then(tokenInfo => {\r\n            if (tokenInfo) {\r\n                this.environment = tokenInfo.environment;\r\n                this.token = tokenInfo.token;\r\n            } else {\r\n                this.environment = \"\";\r\n                this.token = \"\";\r\n                this.accountId = \"\";\r\n            }\r\n\r\n            this.AccountsService.getAccounts({\r\n                environment: this.environment,\r\n                token: this.token\r\n            }).then(accounts => {\r\n                const scope = angular.extend(this.$rootScope.$new(true), {\r\n                    accounts\r\n                });\r\n\r\n                this.$mdBottomSheet.show({\r\n                    template: \"<accounts-bottomsheet accounts='accounts'></accounts-bottomsheet>\",\r\n                    scope,\r\n                    preserveScope: true,\r\n                    targetEvent: event\r\n                }).then(accountSelected => {\r\n                    this.accountId = accountSelected.id;\r\n\r\n                    this.SessionService.setCredentials({\r\n                        environment: this.environment,\r\n                        token: this.token,\r\n                        accountId: this.accountId\r\n                    });\r\n\r\n                    this.AccountsService.getAccounts({\r\n                        environment: this.environment,\r\n                        token: this.token,\r\n                        accountId: this.accountId\r\n                    }).then(() => {\r\n                        const instruments = this.AccountsService\r\n                            .setStreamingInstruments(this.instrs);\r\n\r\n                        this.StreamingService.startStream({\r\n                            environment: this.environment,\r\n                            accessToken: this.token,\r\n                            accountId: this.accountId,\r\n                            instruments\r\n                        });\r\n                    });\r\n                });\r\n            }, err => {\r\n                this.ToastService.show(err);\r\n            });\r\n        })\r\n        .catch(err => {\r\n            if (err) {\r\n                this.ToastService.show(err);\r\n            }\r\n        });\r\n    }\r\n\r\n    openSettingsDialog(event) {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            const allInstrs = this.AccountsService.getAccount().instruments;\r\n\r\n            angular.forEach(allInstrs, instrument => {\r\n                if (!this.instrs.hasOwnProperty(instrument.name)) {\r\n                    this.instrs[instrument.name] = false;\r\n                }\r\n            });\r\n\r\n            const scope = angular.extend(this.$rootScope.$new(true), {\r\n                instruments: this.instrs\r\n            });\r\n\r\n            this.$mdDialog.show({\r\n                template: \"<settings-dialog aria-label='Settings Dialog' instruments='instruments'></settings-dialog>\",\r\n                scope,\r\n                preserveScope: true,\r\n                targetEvent: event\r\n            }).then(settingsInfo => {\r\n                let instruments;\r\n\r\n                if (settingsInfo) {\r\n                    this.$window.localStorage.setItem(\"argo.instruments\",\r\n                        angular.toJson(settingsInfo));\r\n                    instruments = this.AccountsService\r\n                        .setStreamingInstruments(settingsInfo);\r\n\r\n                    this.QuotesService.reset();\r\n\r\n                    this.StreamingService.startStream({\r\n                        environment: credentials.environment,\r\n                        accessToken: credentials.token,\r\n                        accountId: credentials.accountId,\r\n                        instruments\r\n                    });\r\n                }\r\n            })\r\n            .catch(err => {\r\n                if (err) {\r\n                    this.ToastService.show(err);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\nHeaderController.$inject = [\r\n    \"$window\", \"$rootScope\", \"$mdDialog\", \"$mdBottomSheet\",\r\n    \"ToastService\", \"AccountsService\", \"SessionService\",\r\n    \"QuotesService\", \"StreamingService\"\r\n];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/header/header.controller.js\n// module id = 42\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { headerComponent } from \"./header.component\";\r\n\r\nexport const header = angular\r\n    .module(\"components.header\", [])\r\n    .component(\"header\", headerComponent)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/header/header.module.js\n// module id = 43\n// module chunks = 0","export function highlighterDirective($timeout) {\r\n    const directive = {\r\n        restrict: \"A\",\r\n        link\r\n    };\r\n\r\n    return directive;\r\n\r\n    function link(scope, element, attrs) {\r\n        scope.$watch(attrs.highlighter, (newValue, oldValue) => {\r\n            let newclass;\r\n\r\n            if (newValue !== oldValue) {\r\n                newclass = newValue < oldValue ?\r\n                    \"highlight-red\" : \"highlight-green\";\r\n\r\n                element.addClass(newclass);\r\n\r\n                $timeout(() => {\r\n                    element.removeClass(newclass);\r\n                }, 500);\r\n            }\r\n        });\r\n    }\r\n}\r\nhighlighterDirective.$inject = [\"$timeout\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/highlighter/highlighter.directive.js\n// module id = 44\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { highlighterDirective } from \"./highlighter.directive\";\r\n\r\nexport const highlighter = angular\r\n    .module(\"components.highlighter\", [])\r\n    .directive(\"highlighter\", highlighterDirective)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/highlighter/highlighter.module.js\n// module id = 45\n// module chunks = 0","import { NewsController } from \"./news.controller\";\r\n\r\nexport const newsComponent = {\r\n    templateUrl: \"app/components/news/news.html\",\r\n    controller: NewsController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/news/news.component.js\n// module id = 46\n// module chunks = 0","export class NewsController {\r\n    constructor(NewsService) {\r\n        this.NewsService = NewsService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.NewsService.getNews().then(news => {\r\n            this.news = news;\r\n        });\r\n    }\r\n}\r\nNewsController.$inject = [\"NewsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/news/news.controller.js\n// module id = 47\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { newsComponent } from \"./news.component\";\r\nimport { NewsService } from \"./news.service\";\r\n\r\nexport const news = angular\r\n    .module(\"components.news\", [])\r\n    .component(\"news\", newsComponent)\r\n    .service(\"NewsService\", NewsService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/news/news.module.js\n// module id = 48\n// module chunks = 0","export class NewsService {\r\n    constructor($http, SessionService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n    }\r\n\r\n    getNews() {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/calendar\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token\r\n            }).then(news => news.data)\r\n            .catch(err => err.data)\r\n        );\r\n    }\r\n}\r\nNewsService.$inject = [\"$http\", \"SessionService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/news/news.service.js\n// module id = 49\n// module chunks = 0","import * as d3 from \"d3\";\r\nimport techan from \"techan\";\r\n\r\nexport function ohlcChartDirective() {\r\n    const directive = {\r\n        restrict: \"E\",\r\n        scope: {\r\n            instrument: \"=\",\r\n            granularity: \"=\",\r\n            data: \"=\",\r\n            feed: \"=\",\r\n            trades: \"=\"\r\n        },\r\n        link\r\n    };\r\n\r\n    return directive;\r\n\r\n    function link(scope, element) {\r\n        let myInstrument,\r\n            myGranularity,\r\n            myTrades,\r\n            data,\r\n            refreshChart,\r\n            lastHistUpdate,\r\n            lastData,\r\n            lastClose,\r\n            feedVolume = 0;\r\n\r\n        scope.$watch(\"data\", csv => {\r\n            if (csv && csv.length > 0) {\r\n                myInstrument = scope.instrument;\r\n                myGranularity = scope.granularity;\r\n\r\n                refreshChart = drawChart(element[0], csv);\r\n\r\n                lastData = data && data[data.length - 1];\r\n                lastClose = lastData.close;\r\n                feedVolume = lastData.volume;\r\n                lastHistUpdate = getLastHistUpdate(myGranularity);\r\n            }\r\n        });\r\n\r\n        scope.$watch(\"feed\", feed => {\r\n            const tick = feed[myInstrument],\r\n                nextHistUpdate = getLastHistUpdate(myGranularity, tick);\r\n\r\n            let midPrice;\r\n\r\n            if (tick && data && lastHistUpdate !== nextHistUpdate) {\r\n                data.shift();\r\n                tick.bid = parseFloat(tick.bid);\r\n                tick.ask = parseFloat(tick.ask);\r\n                midPrice = (tick.bid + tick.ask) / 2;\r\n                feedVolume = 0;\r\n                data.push({\r\n                    open: midPrice,\r\n                    close: midPrice,\r\n                    high: midPrice,\r\n                    low: midPrice,\r\n                    date: new Date(nextHistUpdate),\r\n                    volume: feedVolume\r\n                });\r\n\r\n                lastHistUpdate = nextHistUpdate;\r\n            }\r\n\r\n            if (tick && data) {\r\n\r\n                if (lastData.close !== lastClose) {\r\n                    feedVolume += 1;\r\n                }\r\n\r\n                tick.bid = parseFloat(tick.bid);\r\n                tick.ask = parseFloat(tick.ask);\r\n                midPrice = (tick.bid + tick.ask) / 2;\r\n\r\n                lastData = data && data[data.length - 1];\r\n                lastClose = lastData.close;\r\n                lastData.close = midPrice;\r\n                lastData.volume = feedVolume;\r\n\r\n                if (lastData.close > lastData.high) {\r\n                    lastData.high = lastData.close;\r\n                }\r\n\r\n                if (lastData.close < lastData.low) {\r\n                    lastData.low = lastData.close;\r\n                }\r\n\r\n                refreshChart();\r\n            }\r\n\r\n        }, true);\r\n\r\n        function getLastHistUpdate(granularity, tick) {\r\n            const time = tick && tick.time,\r\n                now = time ? new Date(time) : new Date();\r\n\r\n            let coeff;\r\n\r\n            if (granularity === \"S5\") {\r\n                coeff = 1000 * 5;\r\n            } else if (granularity === \"S10\") {\r\n                coeff = 1000 * 10;\r\n            } else if (granularity === \"S15\") {\r\n                coeff = 1000 * 15;\r\n            } else if (granularity === \"S30\") {\r\n                coeff = 1000 * 30;\r\n            } else if (granularity === \"M1\") {\r\n                coeff = 1000 * 60;\r\n            } else if (granularity === \"M2\") {\r\n                coeff = 1000 * 60 * 2;\r\n            } else if (granularity === \"M3\") {\r\n                coeff = 1000 * 60 * 3;\r\n            } else if (granularity === \"M4\") {\r\n                coeff = 1000 * 60 * 4;\r\n            } else if (granularity === \"M5\") {\r\n                coeff = 1000 * 60 * 5;\r\n            } else if (granularity === \"M10\") {\r\n                coeff = 1000 * 60 * 10;\r\n            } else if (granularity === \"M15\") {\r\n                coeff = 1000 * 60 * 15;\r\n            } else if (granularity === \"M30\") {\r\n                coeff = 1000 * 60 * 30;\r\n            } else if (granularity === \"H1\") {\r\n                coeff = 1000 * 60 * 60;\r\n            } else if (granularity === \"H2\") {\r\n                coeff = 1000 * 60 * 60 * 2;\r\n            } else if (granularity === \"H3\") {\r\n                coeff = 1000 * 60 * 60 * 3;\r\n            } else if (granularity === \"H4\") {\r\n                coeff = 1000 * 60 * 60 * 4;\r\n            } else if (granularity === \"H6\") {\r\n                coeff = 1000 * 60 * 60 * 6;\r\n            } else if (granularity === \"H8\") {\r\n                coeff = 1000 * 60 * 60 * 8;\r\n            } else if (granularity === \"H12\") {\r\n                coeff = 1000 * 60 * 60 * 12;\r\n            } else {\r\n\r\n                // for D / W / M\r\n                coeff = 1000 * 60 * 60 * 12;\r\n            }\r\n\r\n            return Math.floor(now / (coeff)) * coeff;\r\n        }\r\n\r\n        function drawChart(el, csv) {\r\n            const margin = {\r\n                    top: 0,\r\n                    right: 20,\r\n                    bottom: 30,\r\n                    left: 75\r\n                },\r\n                width = 960 - margin.left - margin.right,\r\n                height = 400 - margin.top - margin.bottom;\r\n\r\n            const x = techan.scale.financetime()\r\n                .range([0, width]);\r\n\r\n            const y = d3.scaleLinear()\r\n                .range([height, 0]);\r\n\r\n            const yVolume = d3.scaleLinear()\r\n                .range([y(0), y(0.2)]);\r\n\r\n            const ohlc = techan.plot.ohlc()\r\n                .xScale(x)\r\n                .yScale(y);\r\n\r\n            const tradearrow = techan.plot.tradearrow()\r\n                .xScale(x)\r\n                .yScale(y)\r\n                .orient(d => {\r\n                    const side = d.type.startsWith(\"buy\") ? \"up\" : \"down\";\r\n\r\n                    return side;\r\n                });\r\n\r\n            const sma0 = techan.plot.sma()\r\n                .xScale(x)\r\n                .yScale(y);\r\n\r\n            const sma0Calculator = techan.indicator.sma()\r\n                .period(10);\r\n\r\n            const sma1 = techan.plot.sma()\r\n                .xScale(x)\r\n                .yScale(y);\r\n\r\n            const sma1Calculator = techan.indicator.sma()\r\n                .period(20);\r\n\r\n            const volume = techan.plot.volume()\r\n                .accessor(ohlc.accessor())\r\n                .xScale(x)\r\n                .yScale(yVolume);\r\n\r\n            const xAxis = d3.axisBottom(x);\r\n\r\n            const yAxis = d3.axisLeft(y);\r\n\r\n            const volumeAxis = d3.axisRight(yVolume)\r\n                .ticks(3)\r\n                .tickFormat(d3.format(\",.3s\"));\r\n\r\n            // const timeAnnotation = techan.plot.axisannotation()\r\n            //     .axis(xAxis)\r\n            //     .orient(\"bottom\")\r\n            //     .format(d3.timeFormat(\"%Y-%m-%d %H:%M\"))\r\n            //     .width(80)\r\n            //     .translate([0, height]);\r\n\r\n            // const ohlcAnnotation = techan.plot.axisannotation()\r\n            //     .axis(yAxis)\r\n            //     .orient(\"left\")\r\n            //     .format(d3.format(\",.4f\"));\r\n\r\n            // const volumeAnnotation = techan.plot.axisannotation()\r\n            //     .axis(volumeAxis)\r\n            //     .orient(\"right\")\r\n            //     .width(35);\r\n\r\n            // const crosshair = techan.plot.crosshair()\r\n            //     .xScale(x)\r\n            //     .yScale(y)\r\n            //     .xAnnotation(timeAnnotation)\r\n            //     .yAnnotation([ohlcAnnotation, volumeAnnotation]);\r\n\r\n            d3.select(el).select(\"svg\").remove();\r\n\r\n            const svg = d3.select(el).append(\"svg\")\r\n                .attr(\"width\", width + margin.left + margin.right)\r\n                .attr(\"height\", height + margin.top + margin.bottom)\r\n                .append(\"g\")\r\n                .attr(\"transform\",\r\n                    `translate(${margin.left}, ${margin.top})`);\r\n\r\n            const defs = svg.append(\"defs\")\r\n                .append(\"clipPath\")\r\n                    .attr(\"id\", \"ohlcClip\");\r\n\r\n            defs.append(\"rect\")\r\n                .attr(\"x\", 0)\r\n                .attr(\"y\", 0)\r\n                .attr(\"width\", width)\r\n                .attr(\"height\", height);\r\n\r\n            const ohlcSelection = svg.append(\"g\")\r\n                .attr(\"class\", \"ohlc\")\r\n                .attr(\"transform\", \"translate(0,0)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"volume\")\r\n                .attr(\"clip-path\", \"url(#ohlcClip)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"candlestick\")\r\n                .attr(\"clip-path\", \"url(#ohlcClip)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"indicator sma ma-0\")\r\n                .attr(\"clip-path\", \"url(#ohlcClip)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"indicator sma ma-1\")\r\n                .attr(\"clip-path\", \"url(#ohlcClip)\");\r\n\r\n            ohlcSelection.append(\"g\")\r\n                .attr(\"class\", \"tradearrow\");\r\n\r\n            svg.append(\"g\")\r\n                .attr(\"class\", \"x axis\")\r\n                .attr(\"transform\", `translate(0, ${height})`);\r\n\r\n            svg\r\n                .append(\"g\")\r\n                    .attr(\"class\", \"y axis\")\r\n                .append(\"text\")\r\n                    .attr(\"transform\", \"rotate(-90)\")\r\n                    .attr(\"y\", 6)\r\n                    .attr(\"dy\", \".71em\")\r\n                    .style(\"font-weight\", \"bold\")\r\n                    .style(\"text-anchor\", \"end\")\r\n                    .text(`Price (${myInstrument} / ${myGranularity})`);\r\n\r\n            svg.append(\"g\")\r\n                .attr(\"class\", \"volume axis\");\r\n\r\n            // svg.append(\"g\")\r\n            //     .attr(\"class\", \"crosshair ohlc\");\r\n\r\n            data = d3.csvParse(csv).map(\r\n                d => ({\r\n                    date: new Date(d.Date),\r\n                    open: +d.Open,\r\n                    high: +d.High,\r\n                    low: +d.Low,\r\n                    close: +d.Close,\r\n                    volume: +d.Volume\r\n                })\r\n            );\r\n\r\n            svg.select(\"g.candlestick\").datum(data);\r\n            svg.select(\"g.sma.ma-0\").datum(sma0Calculator(data));\r\n            svg.select(\"g.sma.ma-1\").datum(sma1Calculator(data));\r\n            svg.select(\"g.volume\").datum(data);\r\n\r\n            redraw();\r\n\r\n            function redraw() {\r\n                const accessor = ohlc.accessor();\r\n\r\n                x.domain(data.map(accessor.d));\r\n                x.zoomable().domain([data.length - 130, data.length]);\r\n\r\n                y.domain(techan.scale.plot.ohlc(\r\n                    data.slice(data.length - 130, data.length)).domain());\r\n                yVolume.domain(techan.scale.plot.volume(\r\n                    data.slice(data.length - 130, data.length)).domain());\r\n\r\n                svg.select(\"g.x.axis\").call(xAxis);\r\n                svg.select(\"g.y.axis\").call(yAxis);\r\n                svg.select(\"g.volume.axis\").call(volumeAxis);\r\n\r\n                svg.select(\"g.candlestick\").datum(data).call(ohlc);\r\n                svg.select(\"g.tradearrow\").remove();\r\n                svg.append(\"g\").attr(\"class\", \"tradearrow\");\r\n                myTrades = scope.trades.filter(\r\n                    trade => trade.instrument === myInstrument)\r\n                    .map(\r\n                        trade => ({\r\n                            date: new Date(trade.openTime),\r\n                            type: trade.currentUnits > 0 ? \"buy\" : \"sell\",\r\n                            price: trade.price\r\n                        })\r\n                    );\r\n                svg.select(\"g.tradearrow\").datum(myTrades).call(tradearrow);\r\n\r\n                svg.select(\"g.sma.ma-0\")\r\n                    .datum(sma0Calculator(data)).call(sma0);\r\n                svg.select(\"g.sma.ma-1\")\r\n                    .datum(sma1Calculator(data)).call(sma1);\r\n\r\n                svg.select(\"g.volume\").datum(data).call(volume);\r\n\r\n                // svg.select(\"g.crosshair.ohlc\").call(crosshair);\r\n            }\r\n\r\n            return redraw;\r\n        }\r\n\r\n    }\r\n}\r\nohlcChartDirective.$inject = [];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/ohlc-chart/ohlc-chart.directive.js\n// module id = 50\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { ohlcChartDirective } from \"./ohlc-chart.directive\";\r\n\r\nexport const ohlcChart = angular\r\n    .module(\"components.ohlc-chart\", [])\r\n    .directive(\"ohlcChart\", ohlcChartDirective)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/ohlc-chart/ohlc-chart.module.js\n// module id = 51\n// module chunks = 0","import { OrderDialogController } from \"./order-dialog.controller\";\r\n\r\nexport const orderDialogComponent = {\r\n    templateUrl: \"app/components/order-dialog/order-dialog.html\",\r\n    controller: OrderDialogController,\r\n    bindings: {\r\n        params: \"<\"\r\n    }\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/order-dialog/order-dialog.component.js\n// module id = 52\n// module chunks = 0","export class OrderDialogController {\r\n    constructor($mdDialog, ToastService,\r\n            QuotesService, OrdersService, AccountsService) {\r\n        this.$mdDialog = $mdDialog;\r\n        this.ToastService = ToastService;\r\n        this.QuotesService = QuotesService;\r\n        this.OrdersService = OrdersService;\r\n        this.AccountsService = AccountsService;\r\n    }\r\n\r\n    $onInit() {\r\n        const account = this.AccountsService.getAccount();\r\n\r\n        this.pips = account.pips;\r\n\r\n        this.type = \"MARKET\";\r\n        this.side = this.params.side;\r\n        this.instruments = this.params.instruments;\r\n        this.selectedInstrument = this.params.selectedInstrument;\r\n        this.changeMarket(this.selectedInstrument);\r\n        this.expires = [\r\n            { label: \"1 Hour\", value: 60 * 60 * 1000 },\r\n            { label: \"2 Hours\", value: 2 * 60 * 60 * 1000 },\r\n            { label: \"3 Hours\", value: 3 * 60 * 60 * 1000 },\r\n            { label: \"4 Hours\", value: 4 * 60 * 60 * 1000 },\r\n            { label: \"5 Hours\", value: 5 * 60 * 60 * 1000 },\r\n            { label: \"6 Hours\", value: 6 * 60 * 60 * 1000 },\r\n            { label: \"8 Hours\", value: 8 * 60 * 60 * 1000 },\r\n            { label: \"12 Hours\", value: 12 * 60 * 60 * 1000 },\r\n            { label: \"18 Hours\", value: 18 * 60 * 60 * 1000 },\r\n            { label: \"1 Day\", value: 60 * 60 * 24 * 1000 },\r\n            { label: \"2 Days\", value: 2 * 60 * 60 * 24 * 1000 },\r\n            { label: \"1 Week\", value: 7 * 60 * 60 * 24 * 1000 },\r\n            { label: \"1 Month\", value: 30 * 60 * 60 * 24 * 1000 },\r\n            { label: \"2 Months\", value: 60 * 60 * 60 * 24 * 1000 },\r\n            { label: \"3 Months\", value: 90 * 60 * 60 * 24 * 1000 }\r\n        ];\r\n        this.selectedExpire = 604800000; // 1 week\r\n        this.measure = \"price\";\r\n        this.isLowerBound = false;\r\n        this.isUpperBound = false;\r\n        this.isTakeProfit = false;\r\n        this.isStopLoss = false;\r\n        this.isTrailingStop = false;\r\n    }\r\n\r\n    changeMarket(instrument) {\r\n        if (!this.pips) {\r\n            return;\r\n        }\r\n\r\n        const price = this.QuotesService.getQuotes()[instrument],\r\n            fixed = ((this.pips[this.selectedInstrument].toString())\r\n                .match(/0/g) || []).length;\r\n\r\n        this.measure = \"price\";\r\n        this.step = parseFloat(this.pips[this.selectedInstrument]);\r\n        if (this.side === \"buy\") {\r\n            this.quote = parseFloat(price && price.ask);\r\n            this.takeProfit = parseFloat((this.quote + this.step * 10)\r\n                .toFixed(fixed));\r\n            this.stopLoss = parseFloat((this.quote - this.step * 10)\r\n                .toFixed(fixed));\r\n        } else {\r\n            this.quote = parseFloat(price && price.bid);\r\n            this.takeProfit = parseFloat((this.quote - this.step * 10)\r\n                .toFixed(fixed));\r\n            this.stopLoss = parseFloat((this.quote + this.step * 10)\r\n                .toFixed(fixed));\r\n        }\r\n        this.lowerBound = parseFloat((this.quote - this.step).toFixed(fixed));\r\n        this.upperBound = parseFloat((this.quote + this.step).toFixed(fixed));\r\n        this.trailingStop = 25;\r\n    }\r\n\r\n    changeMeasure(measure) {\r\n        if (measure === \"price\") {\r\n            this.changeMarket(this.selectedInstrument);\r\n        } else {\r\n            this.lowerBound = 1;\r\n            this.upperBound = 1;\r\n            this.takeProfit = 10;\r\n            this.stopLoss = 10;\r\n            this.trailingStop = 25;\r\n            this.step = 1;\r\n        }\r\n    }\r\n\r\n    hide() {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    cancel() {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n    answer(action) {\r\n        const order = {},\r\n            isBuy = this.side === \"buy\",\r\n            isMeasurePips = this.measure === \"pips\";\r\n\r\n        this.$mdDialog.hide(action);\r\n\r\n        this.step = parseFloat(this.pips[this.selectedInstrument]);\r\n\r\n        order.instrument = this.selectedInstrument;\r\n        order.units = this.units;\r\n        if (this.units && !isBuy) {\r\n            order.units = `-${order.units}`;\r\n        }\r\n\r\n        order.side = this.side;\r\n        order.type = this.type;\r\n\r\n        if (order.type === \"LIMIT\") {\r\n            order.price = this.quote && this.quote.toString();\r\n            order.gtdTime = new Date(Date.now() + this.selectedExpire);\r\n        }\r\n\r\n        if (isMeasurePips) {\r\n            if (this.isLowerBound) {\r\n                order.priceBound =\r\n                    parseFloat(this.quote - this.step * this.lowerBound)\r\n                        .toString();\r\n            }\r\n            if (this.isUpperBound) {\r\n                order.priceBound =\r\n                    parseFloat(this.quote + this.step * this.upperBound)\r\n                        .toString();\r\n            }\r\n            if (isBuy) {\r\n                if (this.isTakeProfit) {\r\n                    order.takeProfitOnFill = {};\r\n                    order.takeProfitOnFill.price =\r\n                        parseFloat(this.quote + this.step * this.takeProfit)\r\n                            .toString();\r\n                }\r\n                if (this.isStopLoss) {\r\n                    order.stopLossOnFill = {};\r\n                    order.order.takeProfitOnFill.price =\r\n                        parseFloat(this.quote - this.step * this.stopLoss)\r\n                            .toString();\r\n                }\r\n            } else {\r\n                if (this.isTakeProfit) {\r\n                    order.takeProfitOnFill = {};\r\n                    order.takeProfitOnFill.price =\r\n                        parseFloat(this.quote - this.step * this.takeProfit)\r\n                            .toString();\r\n                }\r\n                if (this.isStopLoss) {\r\n                    order.stopLossOnFill = {};\r\n                    order.order.takeProfitOnFill.price =\r\n                        parseFloat(this.quote + this.step * this.stopLoss)\r\n                            .toString();\r\n                }\r\n            }\r\n        } else {\r\n            if (this.isLowerBound) {\r\n                order.priceBound = this.lowerBound.toString();\r\n            }\r\n            if (this.isUpperBound) {\r\n                order.priceBound = this.upperBound.toString();\r\n            }\r\n            if (this.isTakeProfit) {\r\n                order.takeProfitOnFill = {};\r\n                order.takeProfitOnFill.price = this.takeProfit.toString();\r\n            }\r\n            if (this.isStopLoss) {\r\n                order.stopLossOnFill = {};\r\n                order.stopLossOnFill.price = this.stopLoss.toString();\r\n            }\r\n        }\r\n        if (this.isTrailingStop) {\r\n            order.trailingStopLossOnFill = {};\r\n            order.trailingStopLossOnFill.distance =\r\n                (this.step * this.trailingStop).toString();\r\n        }\r\n\r\n        if (action === \"submit\") {\r\n            this.OrdersService.putOrder(order).then(transaction => {\r\n                let opened,\r\n                    canceled,\r\n                    side,\r\n                    message;\r\n\r\n                if (transaction.code && transaction.message) {\r\n                    message = \"ERROR \" +\r\n                        `${transaction.code} ${transaction.message}`;\r\n\r\n                    this.ToastService.show(message);\r\n                } else if (transaction.errorMessage) {\r\n                    message = `ERROR ${transaction.errorMessage}`;\r\n\r\n                    this.ToastService.show(message);\r\n                } else if (transaction.orderCancelTransaction) {\r\n                    canceled = transaction.orderCancelTransaction;\r\n\r\n                    message = `ERROR ${canceled.reason}`;\r\n\r\n                    this.ToastService.show(message);\r\n                } else {\r\n                    opened = transaction.orderFillTransaction ||\r\n                        transaction.orderFillTransaction ||\r\n                        transaction.orderCreateTransaction;\r\n\r\n                    side = opened.units > 0 ? \"buy\" : \"sell\";\r\n                    message = `${side} ` +\r\n                        `${opened.instrument} ` +\r\n                        `#${opened.id} ` +\r\n                        `@${opened.price} ` +\r\n                        `for ${opened.units}`;\r\n\r\n                    this.ToastService.show(message);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\nOrderDialogController.$inject = [\r\n    \"$mdDialog\", \"ToastService\",\r\n    \"QuotesService\", \"OrdersService\", \"AccountsService\"\r\n];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/order-dialog/order-dialog.controller.js\n// module id = 53\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { orderDialogComponent } from \"./order-dialog.component\";\r\n\r\nexport const orderDialog = angular\r\n    .module(\"components.order-dialog\", [])\r\n    .component(\"orderDialog\", orderDialogComponent)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/order-dialog/order-dialog.module.js\n// module id = 54\n// module chunks = 0","import { OrdersController } from \"./orders.controller\";\r\n\r\nexport const ordersComponent = {\r\n    templateUrl: \"app/components/orders/orders.html\",\r\n    controller: OrdersController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/orders/orders.component.js\n// module id = 55\n// module chunks = 0","export class OrdersController {\r\n    constructor($mdDialog, ToastService, OrdersService) {\r\n        this.$mdDialog = $mdDialog;\r\n        this.ToastService = ToastService;\r\n        this.OrdersService = OrdersService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.orders = this.OrdersService.getOrders();\r\n\r\n        this.OrdersService.refresh();\r\n    }\r\n\r\n    closeOrder(event, id) {\r\n        const confirm = this.$mdDialog.confirm()\r\n            .textContent(\"Are you sure to close the order?\")\r\n            .ariaLabel(\"Order closing confirmation\")\r\n            .ok(\"Ok\")\r\n            .cancel(\"Cancel\")\r\n            .targetEvent(event);\r\n\r\n        this.$mdDialog.show(confirm).then(() => {\r\n            this.OrdersService.closeOrder(id).then(order => {\r\n                const message = \"Closed \" +\r\n                    `#${order.orderCancelTransaction.orderID}`;\r\n\r\n                this.ToastService.show(message);\r\n            });\r\n        });\r\n    }\r\n}\r\nOrdersController.$inject = [\"$mdDialog\", \"ToastService\", \"OrdersService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/orders/orders.controller.js\n// module id = 56\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { ordersComponent } from \"./orders.component\";\r\nimport { OrdersService } from \"./orders.service\";\r\n\r\nexport const orders = angular\r\n    .module(\"components.orders\", [])\r\n    .component(\"orders\", ordersComponent)\r\n    .service(\"OrdersService\", OrdersService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/orders/orders.module.js\n// module id = 57\n// module chunks = 0","export class OrdersService {\r\n    constructor($http, SessionService, AccountsService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.orders = [];\r\n    }\r\n\r\n    getOrders() {\r\n        return this.orders;\r\n    }\r\n\r\n    refresh() {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            this.$http.post(\"/api/orders\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            }).then(res => {\r\n                this.orders.length = 0;\r\n                angular.extend(this.orders, res.data);\r\n            });\r\n        });\r\n    }\r\n\r\n    putOrder(order) {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/order\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                instrument: order.instrument,\r\n                units: order.units,\r\n                side: order.side,\r\n                type: order.type,\r\n                expiry: order.expiry,\r\n                price: order.price,\r\n                priceBound: order.lowerBound || order.upperBound,\r\n                stopLossOnFill: order.stopLossOnFill,\r\n                takeProfitOnFill: order.takeProfitOnFill,\r\n                trailingStopLossOnFill: order.trailingStopLossOnFill\r\n            }).then(trade => trade.data)\r\n            .catch(err => err.data)\r\n        );\r\n    }\r\n\r\n    closeOrder(id) {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/closeorder\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                id\r\n            }).then(order => order.data)\r\n            .catch(err => err.data)\r\n        );\r\n    }\r\n\r\n    updateOrders(tick) {\r\n        const account = this.AccountsService.getAccount(),\r\n            pips = account.pips;\r\n\r\n        this.orders.forEach((order, index) => {\r\n            let current;\r\n\r\n            if (order.instrument === tick.instrument) {\r\n\r\n                if (order.units > 0) {\r\n                    current = tick.ask;\r\n                }\r\n                if (order.units < 0) {\r\n                    current = tick.bid;\r\n                }\r\n\r\n                this.orders[index].current = current;\r\n                this.orders[index].distance = (Math.abs(current - order.price) /\r\n                    pips[order.instrument]);\r\n            }\r\n        });\r\n    }\r\n}\r\nOrdersService.$inject = [\"$http\", \"SessionService\", \"AccountsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/orders/orders.service.js\n// module id = 58\n// module chunks = 0","import { PluginsController } from \"./plugins.controller\";\r\n\r\nexport const pluginsComponent = {\r\n    templateUrl: \"app/components/plugins/plugins.html\",\r\n    controller: PluginsController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/plugins/plugins.component.js\n// module id = 59\n// module chunks = 0","export class PluginsController {\r\n    constructor(PluginsService) {\r\n        this.PluginsService = PluginsService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.plugins = this.PluginsService.getPlugins();\r\n        this.pluginsInfo = this.PluginsService.getPluginsInfo();\r\n\r\n        this.PluginsService.refresh();\r\n    }\r\n\r\n    engage() {\r\n        this.PluginsService.engagePlugins(this.plugins);\r\n    }\r\n}\r\nPluginsController.$inject = [\"PluginsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/plugins/plugins.controller.js\n// module id = 60\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { pluginsComponent } from \"./plugins.component\";\r\nimport { PluginsService } from \"./plugins.service\";\r\n\r\nexport const plugins = angular\r\n    .module(\"components.plugins\", [])\r\n    .component(\"plugins\", pluginsComponent)\r\n    .service(\"PluginsService\", PluginsService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/plugins/plugins.module.js\n// module id = 61\n// module chunks = 0","export class PluginsService {\r\n    constructor($http, SessionService, AccountsService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.plugins = {};\r\n        this.pluginsInfo = {\r\n            count: 0\r\n        };\r\n    }\r\n\r\n    getPlugins() {\r\n        return this.plugins;\r\n    }\r\n\r\n    getPluginsInfo() {\r\n        return this.pluginsInfo;\r\n    }\r\n\r\n    refresh() {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            this.$http.post(\"/api/plugins\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            }).then(res => {\r\n                let name;\r\n\r\n                for (name in this.plugins) {\r\n                    if (this.plugins.hasOwnProperty(name)) {\r\n                        delete this.plugins[name];\r\n                    }\r\n                }\r\n                angular.extend(this.plugins, res.data);\r\n                this.pluginsInfo.count = Object.keys(this.plugins).length;\r\n\r\n                Object.keys(this.plugins).forEach(key => {\r\n                    if (this.plugins[key] === \"enabled\") {\r\n                        this.plugins[key] = true;\r\n                    } else {\r\n                        this.plugins[key] = false;\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    engagePlugins(plugs) {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            const account = this.AccountsService.getAccount();\r\n\r\n            this.$http.post(\"/api/engageplugins\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                plugins: plugs,\r\n                config: {\r\n                    pips: account.pips\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\nPluginsService.$inject = [\"$http\", \"SessionService\", \"AccountsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/plugins/plugins.service.js\n// module id = 62\n// module chunks = 0","import { PositionsController } from \"./positions.controller\";\r\n\r\nexport const positionsComponent = {\r\n    templateUrl: \"app/components/positions/positions.html\",\r\n    controller: PositionsController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/positions/positions.component.js\n// module id = 63\n// module chunks = 0","export class PositionsController {\r\n    constructor(PositionsService) {\r\n        this.PositionsService = PositionsService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.PositionsService.getPositions().then(positions => {\r\n            this.positions = positions;\r\n        });\r\n    }\r\n}\r\nPositionsController.$inject = [\"PositionsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/positions/positions.controller.js\n// module id = 64\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { positionsComponent } from \"./positions.component\";\r\nimport { PositionsService } from \"./positions.service\";\r\n\r\nexport const positions = angular\r\n    .module(\"components.positions\", [])\r\n    .component(\"positions\", positionsComponent)\r\n    .service(\"PositionsService\", PositionsService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/positions/positions.module.js\n// module id = 65\n// module chunks = 0","export class PositionsService {\r\n    constructor($http, SessionService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n    }\r\n\r\n    getPositions() {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/positions\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            }).then(positions => {\r\n                const data = [];\r\n\r\n                positions.data.forEach(position => {\r\n                    const longUnits = position.long &&\r\n                        parseInt(position.long.units, 10);\r\n                    const shortUnits = position.short &&\r\n                        parseInt(position.short.units, 10);\r\n                    const units = longUnits || shortUnits;\r\n                    const side = units > 0 ? \"buy\" : \"sell\";\r\n                    const avgPrice = (longUnits && position.long.averagePrice)\r\n                         || (shortUnits && position.short.averagePrice);\r\n\r\n                    data.push({\r\n                        side,\r\n                        instrument: position.instrument,\r\n                        units,\r\n                        avgPrice\r\n                    });\r\n                });\r\n\r\n                return data;\r\n            }).catch(err => err.data)\r\n        );\r\n    }\r\n}\r\nPositionsService.$inject = [\"$http\", \"SessionService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/positions/positions.service.js\n// module id = 66\n// module chunks = 0","import { QuotesController } from \"./quotes.controller\";\r\n\r\nexport const quotesComponent = {\r\n    templateUrl: \"app/components/quotes/quotes.html\",\r\n    controller: QuotesController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/quotes/quotes.component.js\n// module id = 67\n// module chunks = 0","export class QuotesController {\r\n    constructor(QuotesService) {\r\n        this.QuotesService = QuotesService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.quotes = this.QuotesService.getQuotes();\r\n    }\r\n}\r\nQuotesController.$inject = [\"QuotesService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/quotes/quotes.controller.js\n// module id = 68\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { quotesComponent } from \"./quotes.component\";\r\nimport { QuotesService } from \"./quotes.service\";\r\n\r\nexport const quotes = angular\r\n    .module(\"components.quotes\", [])\r\n    .component(\"quotes\", quotesComponent)\r\n    .service(\"QuotesService\", QuotesService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/quotes/quotes.module.js\n// module id = 69\n// module chunks = 0","import angular from \"angular\";\r\n\r\nexport class QuotesService {\r\n    constructor(AccountsService) {\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.quotes = {};\r\n    }\r\n\r\n    getQuotes() {\r\n        return this.quotes;\r\n    }\r\n\r\n    updateTick(tick) {\r\n        const account = this.AccountsService.getAccount(),\r\n            streamingInstruments = account.streamingInstruments,\r\n            pips = account.pips,\r\n            instrument = tick.instrument;\r\n\r\n        this.quotes[instrument] = {\r\n            time: tick.time,\r\n            ask: tick.ask,\r\n            bid: tick.bid,\r\n            spread: ((tick.ask - tick.bid) / pips[instrument]).toFixed(1)\r\n        };\r\n\r\n\r\n        if (!angular.equals(streamingInstruments, Object.keys(this.quotes))) {\r\n            streamingInstruments.forEach(instr => {\r\n                let temp;\r\n\r\n                if (this.quotes.hasOwnProperty(instr)) {\r\n                    temp = this.quotes[instr];\r\n                    delete this.quotes[instr];\r\n                    this.quotes[instr] = temp;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        let key;\r\n\r\n        for (key in this.quotes) {\r\n            if (this.quotes.hasOwnProperty(key)) {\r\n                delete this.quotes[key];\r\n            }\r\n        }\r\n    }\r\n}\r\nQuotesService.$inject = [\"AccountsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/quotes/quotes.service.js\n// module id = 70\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { SessionService } from \"./session.service\";\r\n\r\nexport const session = angular\r\n    .module(\"components.session\", [])\r\n    .service(\"SessionService\", SessionService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/session/session.module.js\n// module id = 71\n// module chunks = 0","export class SessionService {\r\n    constructor($q) {\r\n        this.deferred = $q.defer();\r\n        this.credentials = {\r\n            environment: null,\r\n            token: null,\r\n            accountId: null\r\n        };\r\n    }\r\n\r\n    setCredentials(session) {\r\n        this.credentials.environment = session.environment;\r\n        this.credentials.token = session.token;\r\n        this.credentials.accountId = session.accountId;\r\n\r\n        this.deferred.resolve(this.credentials);\r\n    }\r\n\r\n    isLogged() {\r\n        return this.deferred.promise;\r\n    }\r\n}\r\nSessionService.$inject = [\"$q\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/session/session.service.js\n// module id = 72\n// module chunks = 0","import { SettingsDialogController } from \"./settings-dialog.controller\";\r\n\r\nexport const settingsDialogComponent = {\r\n    templateUrl: \"app/components/settings-dialog/settings-dialog.html\",\r\n    controller: SettingsDialogController,\r\n    bindings: {\r\n        instruments: \"<\"\r\n    }\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/settings-dialog/settings-dialog.component.js\n// module id = 73\n// module chunks = 0","export class SettingsDialogController {\r\n    constructor($mdDialog) {\r\n        this.$mdDialog = $mdDialog;\r\n    }\r\n\r\n    hide() {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    cancel() {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n    answer(settings) {\r\n        this.$mdDialog.hide(settings);\r\n    }\r\n}\r\nSettingsDialogController.$inject = [\"$mdDialog\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/settings-dialog/settings-dialog.controller.js\n// module id = 74\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { settingsDialogComponent } from \"./settings-dialog.component\";\r\n\r\nexport const settingsDialog = angular\r\n    .module(\"components.settings-dialog\", [])\r\n    .component(\"settingsDialog\", settingsDialogComponent)\r\n    .name;\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/settings-dialog/settings-dialog.module.js\n// module id = 75\n// module chunks = 0","import * as d3 from \"d3\";\r\n\r\n// Inspired by http://bl.ocks.org/vicapow/9904319\r\nexport function slChartDirective() {\r\n    const data = {},\r\n        directive = {\r\n            restrict: \"E\",\r\n            link,\r\n            scope: {\r\n                instrument: \"=\",\r\n                data: \"=\",\r\n                length: \"=\"\r\n            },\r\n            replace: true,\r\n            template: \"<svg class='sl'></svg>\",\r\n            transclude: true\r\n        };\r\n\r\n    return directive;\r\n\r\n    function link(scope, element) {\r\n\r\n        scope.$watch(\"data\", quote => {\r\n            redraw(quote);\r\n        });\r\n\r\n        function redraw(quote) {\r\n            const svg = d3.select(element[0]),\r\n                node = svg.node(),\r\n                instrument = scope.instrument,\r\n                w = node.clientWidth,\r\n                h = getComputedStyle(node)[\"font-size\"].replace(\"px\", \"\");\r\n\r\n            svg.selectAll(\"*\").remove();\r\n\r\n            if (!data[instrument]) {\r\n                data[instrument] = [];\r\n            }\r\n\r\n            data[instrument].push(\r\n                (parseFloat(quote.bid) +\r\n                    parseFloat(quote.ask)) / 2);\r\n\r\n            data[instrument] = data[instrument].slice(-scope.length);\r\n\r\n            if (data[instrument][0] > data[instrument].slice(-1)) {\r\n                node.style.stroke = \"red\";\r\n            } else {\r\n                node.style.stroke = \"green\";\r\n            }\r\n            node.style.height = `${h}px`;\r\n\r\n            const min = d3.min(data[instrument]);\r\n            const max = d3.max(data[instrument]);\r\n\r\n            const x = d3.scaleLinear()\r\n                .domain([0, data[instrument].length - 1]).range([0, w]);\r\n            const y = d3.scaleLinear()\r\n                .domain([min, max]).range([h, 0]);\r\n\r\n            const paths = data[instrument]\r\n                .map((d, i) => [x(i), y(d)])\r\n                .join(\"L\");\r\n\r\n            svg.append(\"path\").attr(\"d\", `M${paths}`);\r\n        }\r\n    }\r\n}\r\nslChartDirective.$inject = [];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/sl-chart/sl-chart.directive.js\n// module id = 76\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { slChartDirective } from \"./sl-chart.directive\";\r\n\r\nexport const slChart = angular\r\n    .module(\"components.sl-chart\", [])\r\n    .directive(\"slChart\", slChartDirective)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/sl-chart/sl-chart.module.js\n// module id = 77\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { StreamingService } from \"./streaming.service\";\r\n\r\nexport const streaming = angular\r\n    .module(\"components.streaming\", [])\r\n    .service(\"StreamingService\", StreamingService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/streaming/streaming.module.js\n// module id = 78\n// module chunks = 0","import angular from \"angular\";\r\n\r\nexport class StreamingService {\r\n    constructor($timeout, $http, ToastService,\r\n            QuotesService, ActivityService, TradesService,\r\n            OrdersService, AccountsService, PluginsService) {\r\n        this.$timeout = $timeout;\r\n        this.$http = $http;\r\n        this.ToastService = ToastService;\r\n        this.QuotesService = QuotesService;\r\n        this.ActivityService = ActivityService;\r\n        this.TradesService = TradesService;\r\n        this.OrdersService = OrdersService;\r\n        this.AccountsService = AccountsService;\r\n        this.PluginsService = PluginsService;\r\n    }\r\n\r\n    startStream(data) {\r\n        this.$http.post(\"/api/startstream\", {\r\n            environment: data.environment,\r\n            accessToken: data.accessToken,\r\n            accountId: data.accountId,\r\n            instruments: data.instruments\r\n        }).then(() => {\r\n            this.getStream();\r\n        }).catch(err => {\r\n            this.ToastService.show(err);\r\n        });\r\n    }\r\n\r\n    getStream() {\r\n        const ws = new WebSocket(\"ws://localhost:8000/stream\");\r\n\r\n        ws.onmessage = event => {\r\n            let data,\r\n                isTick,\r\n                tick,\r\n                isTransaction,\r\n                transaction,\r\n                refreshPlugins;\r\n\r\n            this.$timeout(() => {\r\n                try {\r\n                    data = angular.fromJson(event.data);\r\n\r\n                    isTick = data.closeoutAsk && data.closeoutBid;\r\n                    isTransaction = data.accountID;\r\n                    refreshPlugins = data.refreshPlugins;\r\n\r\n                    if (isTick) {\r\n                        tick = {\r\n                            time: data.time,\r\n                            instrument: data.instrument,\r\n                            ask: data.closeoutAsk,\r\n                            bid: data.closeoutBid\r\n                        };\r\n\r\n                        this.QuotesService.updateTick(tick);\r\n                        this.TradesService.updateTrades(tick);\r\n                        this.OrdersService.updateOrders(tick);\r\n                    }\r\n\r\n                    if (isTransaction) {\r\n                        transaction = data;\r\n                        this.ActivityService.addActivity(transaction);\r\n\r\n                        this.TradesService.refresh();\r\n                        this.OrdersService.refresh();\r\n                        this.AccountsService.refresh();\r\n                    }\r\n\r\n                    if (refreshPlugins) {\r\n                        this.PluginsService.refresh();\r\n                    }\r\n                } catch (e) {\r\n\r\n                    // Discard \"incomplete\" json\r\n                    // console.log(e.name + \": \" + e.message);\r\n                }\r\n            });\r\n        };\r\n    }\r\n}\r\nStreamingService.$inject = [\r\n    \"$timeout\", \"$http\", \"ToastService\",\r\n    \"QuotesService\", \"ActivityService\", \"TradesService\",\r\n    \"OrdersService\", \"AccountsService\", \"PluginsService\"\r\n];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/streaming/streaming.service.js\n// module id = 79\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { ToastService } from \"./toast.service\";\r\n\r\nexport const toast = angular\r\n    .module(\"components.toast\", [])\r\n    .service(\"ToastService\", ToastService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/toast/toast.module.js\n// module id = 80\n// module chunks = 0","export class ToastService {\r\n    constructor($mdToast) {\r\n        this.$mdToast = $mdToast;\r\n    }\r\n\r\n    show(message) {\r\n        this.$mdToast.show(\r\n            this.$mdToast.simple()\r\n                .textContent(message)\r\n                .action(\"CLOSE\")\r\n                .position(\"right bottom\")\r\n                .hideDelay(10000)\r\n        );\r\n    }\r\n}\r\nToastService.$inject = [\"$mdToast\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/toast/toast.service.js\n// module id = 81\n// module chunks = 0","import { TokenDialogController } from \"./token-dialog.controller\";\r\n\r\nexport const tokenDialogComponent = {\r\n    templateUrl: \"app/components/token-dialog/token-dialog.html\",\r\n    controller: TokenDialogController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/token-dialog/token-dialog.component.js\n// module id = 82\n// module chunks = 0","export class TokenDialogController {\r\n    constructor($mdDialog) {\r\n        this.$mdDialog = $mdDialog;\r\n    }\r\n\r\n    $onInit() {\r\n        this.environment = \"practice\";\r\n    }\r\n\r\n    hide() {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    cancel() {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n    answer(token) {\r\n        this.$mdDialog.hide(token);\r\n    }\r\n}\r\nTokenDialogController.$inject = [\"$mdDialog\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/token-dialog/token-dialog.controller.js\n// module id = 83\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { tokenDialogComponent } from \"./token-dialog.component\";\r\n\r\nexport const tokenDialog = angular\r\n    .module(\"components.token-dialog\", [])\r\n    .component(\"tokenDialog\", tokenDialogComponent)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/token-dialog/token-dialog.module.js\n// module id = 84\n// module chunks = 0","import { TradesController } from \"./trades.controller\";\r\n\r\nexport const tradesComponent = {\r\n    templateUrl: \"app/components/trades/trades.html\",\r\n    controller: TradesController\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/trades/trades.component.js\n// module id = 85\n// module chunks = 0","export class TradesController {\r\n    constructor($mdDialog, ToastService, TradesService) {\r\n        this.$mdDialog = $mdDialog;\r\n        this.ToastService = ToastService;\r\n        this.TradesService = TradesService;\r\n    }\r\n\r\n    $onInit() {\r\n        this.trades = this.TradesService.getTrades();\r\n\r\n        this.TradesService.refresh();\r\n    }\r\n\r\n    closeTrade(event, id) {\r\n        const confirm = this.$mdDialog.confirm()\r\n            .textContent(\"Are you sure to close the trade?\")\r\n            .ariaLabel(\"Trade closing confirmation\")\r\n            .ok(\"Ok\")\r\n            .cancel(\"Cancel\")\r\n            .targetEvent(event);\r\n\r\n        this.$mdDialog.show(confirm).then(() => {\r\n            this.TradesService.closeTrade(id).then(trade => {\r\n                const message = \"Closed \" +\r\n                    `${(trade.units > 0 ? \"sell\" : \"buy\")} ` +\r\n                    `${trade.instrument} ` +\r\n                    `#${trade.id} ` +\r\n                    `@${trade.price} ` +\r\n                    `P&L ${trade.pl}`;\r\n\r\n                this.ToastService.show(message);\r\n            }).catch(err => {\r\n                const message = `ERROR ${err.code} ${err.message}`;\r\n\r\n                this.ToastService.show(message);\r\n            });\r\n\r\n        });\r\n    }\r\n}\r\nTradesController.$inject = [\"$mdDialog\", \"ToastService\", \"TradesService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/trades/trades.controller.js\n// module id = 86\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { tradesComponent } from \"./trades.component\";\r\nimport { TradesService } from \"./trades.service\";\r\n\r\nexport const trades = angular\r\n    .module(\"components.trades\", [])\r\n    .component(\"trades\", tradesComponent)\r\n    .service(\"TradesService\", TradesService)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/trades/trades.module.js\n// module id = 87\n// module chunks = 0","export class TradesService {\r\n    constructor($http, SessionService, AccountsService) {\r\n        this.$http = $http;\r\n        this.SessionService = SessionService;\r\n        this.AccountsService = AccountsService;\r\n\r\n        this.trades = [];\r\n    }\r\n\r\n    getTrades() {\r\n        return this.trades;\r\n    }\r\n\r\n    refresh() {\r\n        this.SessionService.isLogged().then(credentials => {\r\n            this.$http.post(\"/api/trades\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId\r\n            }).then(res => {\r\n                this.trades.length = 0;\r\n                angular.extend(this.trades, res.data);\r\n                this.trades.forEach(trade => {\r\n                    trade.side = trade.currentUnits > 0 ? \"buy\" : \"sell\";\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    closeTrade(id) {\r\n        return this.SessionService.isLogged().then(\r\n            credentials => this.$http.post(\"/api/closetrade\", {\r\n                environment: credentials.environment,\r\n                token: credentials.token,\r\n                accountId: credentials.accountId,\r\n                id\r\n            }).then(order => order.data)\r\n            .catch(err => err.data)\r\n        );\r\n    }\r\n\r\n    updateTrades(tick) {\r\n        const account = this.AccountsService.getAccount(),\r\n            pips = account.pips;\r\n\r\n        this.trades.forEach((trade, index) => {\r\n            let current,\r\n                side;\r\n\r\n            if (trade.instrument === tick.instrument) {\r\n                side = trade.currentUnits > 0 ? \"buy\" : \"sell\";\r\n\r\n                if (side === \"buy\") {\r\n                    current = tick.bid;\r\n                    this.trades[index].profitPips =\r\n                        ((current - trade.price) / pips[trade.instrument]);\r\n                }\r\n                if (side === \"sell\") {\r\n                    current = tick.ask;\r\n                    this.trades[index].profitPips =\r\n                        ((trade.price - current) / pips[trade.instrument]);\r\n                }\r\n\r\n                this.trades[index].current = current;\r\n            }\r\n        });\r\n    }\r\n}\r\nTradesService.$inject = [\"$http\", \"SessionService\", \"AccountsService\"];\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/components/trades/trades.service.js\n// module id = 88\n// module chunks = 0","import angular from \"angular\";\r\n\r\nimport { rootComponent } from \"./root.component\";\r\nimport { common } from \"./common/common.module\";\r\nimport { components } from \"./components/components.module\";\r\n\r\nexport const root = angular\r\n    .module(\"root\", [\r\n        common,\r\n        components\r\n    ])\r\n    .component(\"root\", rootComponent)\r\n    .name;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/app/root.module.js\n// module id = 89\n// module chunks = 0"],"sourceRoot":""}